(function(A,C,G){A.execute(function(){A.when("A","jQuery","dp-js-logger","dp-ajax-prefetch-metrics").register("dp-ajax-prefetch",function(u,k,a,c){function f(a,h,e,m,f,g){this.scope=a;this.uniqueId=h;this.url=e;this.options=m;this.context=f;this.status=0;this.selected=!1;this.error=this.successData=this.xhr=this._status=G;this.chunks=[];this.doNotAbort=g||!1;this.prefetchMetrics=c.getInstance(this.scope)}var l=new a("dpAjaxPrefetch");f.prototype._callback=function(a,c,e,m,f){"function"===typeof a&&
a.call(self,c,e,m,f)};f.prototype._canAbort=function(){return!this.doNotAbort&&1===this.status};f.prototype._isAborted=function(){return 3===this.status};f.prototype._getUniqueId=function(){return this.uniqueId};f.prototype._abort=function(){if(1===this.status)try{this.ajaxRequestRefence.abort(),this.status=3}catch(a){l.logFatal(a,{message:" Could not abort ajax request."})}};f.prototype._flushChunkData=function(){var a=this;a.chunks.length&&k.map(a.chunks,function(c){a._callback(a.options.chunk,
c,a.context)})};f.prototype._request=function(){var a=this;a.ajaxRequestRefence=u.get(a.url,{params:a.options.params,success:function(c,e,m){a.status=4;a.successData=c;a._status=e;a.xhr=m;a.selected&&a._callback(a.options.success,c,e,m,a.context)},error:function(c,e,m){a.status=2;a.xhr=c;a._status=e;a.error=m;a.selected&&a._callback(a.options.error,c,e,m,a.context)},abort:function(c){a.status=3;a.xhr=c;a.selected&&a._callback(a.options.abort,c,a.context)},chunk:function(c){c&&(a.chunks.push(c),a.selected&&
a._callback(a.options.chunk,c,a.context))},timeout:a.options.timeout||4E4})};f.prototype.prefetchContent=function(){this.prefetchMetrics.predicted(this.uniqueId);0===this.status&&(this.status=1,this._request())};f.prototype.getContent=function(a){a&&this.prefetchMetrics.selected(this.uniqueId);f._abortPrefetchesExcept(this);this.selected=!0;0===this.status?(this.status=1,this._request()):1===this.status?this._flushChunkData():4===this.status&&(this._flushChunkData(),this._callback(this.options.success,
this.successData,this._status,this.xhr,this.context),u.trigger("a:pageUpdate"))};f._objects={};f._abortPrefetchesExcept=function(a){k.each(f._objects[a.scope],function(c,e){e._canAbort()&&c!==a._getUniqueId()&&e._abort()})};f.getInstance=function(a,c,e,m,l,g){if(!a||!c||!e||"object"!==typeof m)throw"Incorrect parameter passed.";f._objects[a]=f._objects[a]||{};var q=f._objects[a][c];q&&q._isAborted()&&(delete f._objects[a][c],q=G);q||(f._objects[a][c]=new f(a,c,e,m,l,g,this));return f._objects[a][c]};
return f});A.register("dp-js-logger",function(){return function(u){function k(a,f,l){f=f||{};"string"===typeof a&&(f.message+=a,a=G);f.logLevel=l;C.ueLogError&&C.ueLogError(a,f)}var a=this;a.attribution=u||"Twister";a.logFatal=function(a,f){k(a,f,"FATAL")};a.logError=function(a,f){k(a,f,"ERROR")};a.logCounter=function(c,f){C.ue&&C.ue.count&&ue.count(a.attribution+c,f)};a.consoleLog=function(a){C.console&&"undefined"!==typeof Twister&&Twister.printConsoleLogs&&console.log(a)}}});A.when("A","jQuery",
"dp-ajax-prefetch","twister-utils","dp-js-logger").register("dimensional-summary-module",function(u,k,a,c,f){var l=new f("dpDimensionalSummary");return function(a){function h(a){g.initData.fnToDetermineSelectedVariations?"function"===typeof g.initData.fnToDetermineSelectedVariations&&(g.currentDimCombOnGlance=g.initData.fnToDetermineSelectedVariations.call(g)):(g.glanceViewSelectedDims=DetailPage.StateController.getState().selected_variations,g.currentDimCombOnGlance=DetailPage.StateController.getState().currentDimCombID);
return a?g.currentDimCombOnGlance.split("_"):g.currentDimCombOnGlance}function e(a,d){for(var e="",b,h,m=0,p=a.length;m<p;m++)e=e+(0<m?",":"")+a[m];var t=q.extend(t,c.getQueryParams({psc:1})),t=q.extend(t,{parentAsin:DetailPage.StateController.getState().parent_asin,productGroupId:DetailPage.StateController.getState().productGroupID});g.initData.globalAjaxParameters&&(t=q.extend(t,g.initData.globalAjaxParameters));t&&(h=q.param(t));e&&(b=!Twister.multiDimensionWeblabEnabled||"dropdown"!==d.dimType.toLowerCase()&&
"swatch"!==d.dimType.toLowerCase()?d.dimType:"Dropdown",b="/gp/twister/dimension?asinList="+e+"&isDimensionSlotsAjax=1&dimSubType="+d.dimSubType+"&dimType="+b+(h?"&"+h:""));return b}function m(a){for(var d,e=0,b=a.length;e<b;e++)d=d+(0<e?",":"")+a[e];return d}function f(a,d,h){m(a);a=e(a,h);var b={};h.params&&(b.params=h.params);b.chunk=function(b,a){var d;(d=(d=(d=(d=b&&"JSON"==b.Type)&&typeof("undefined"!==b.Value))&&typeof("undefined"!==b.Value.content))&&typeof("undefined"!==b.Value.content.twisterSlotDiv))?
(h.executeChunk===G?h.chunk(b,a):h.executeChunk()&&h.chunk(b,a),g.asinDimSumCache[b.ASIN]=b):l.logFatal("The received data does not contain required properties.",{message:"[Twister]Invalid data received."})};b.success=function(b,a,d,e){h.success&&c.typeChecker.isFunction(h.success)&&h.success(b,a,d,e)};b.error=function(b,a,d){h.error&&c.typeChecker.isFunction(h.error)&&h.error(b,a,d)};b.abort=function(b){h.abort&&c.typeChecker.isFunction(h.abort)&&h.abort(b)};b.timeout=6E4;u.get(a,{success:function(a,
e,g){b.success(a,e,g,d)},chunk:function(a){b.chunk(a,d)},error:function(a,d,e){b.error(a,d,e)},abort:function(a){b.abort(a)}})}var g=this,q=u.$;g.initData=a;g.scopePrefix="dpDimSum";g.symbolForTriggeringDim="*";g.uniqueID="";g.urlPrefix="";g.asinDataCache={};g.glanceViewSelectedDims="";g.currentDimCombOnGlance="";g.mapOfDimToAsinMaps={};g.mapOfAsinToDimMaps={};g.asinDimSumCache={};g.scope=g.scopePrefix+"_"+g.initData.scopeSuffix;g.dimensionsList=g.initData.dimensionsList;g.dimensionValuesList=g.initData.dimensionValuesList;
g.dimensionCombinationToASINMap=g.initData.dimensionCombinationToASINMap;h();g.fetchDimSumData=function(a){if(a.dimTriggeringDimSum&&c.typeChecker.isString(a.dimTriggeringDimSum))var d=a.dimTriggeringDimSum;else throw"Wrong parameter passes to DimSumModule "+g.scope;var e=g.dimensionsList.indexOf(d);if(a){if(!a.asinList||!c.typeChecker.isArray(a.asinList))throw"Wrong parameter passed to DimSumModule "+g.scope;if(!a.chunk||!c.typeChecker.isFunction(a.chunk))throw"Wrong parameter passed to DimSumModule "+
g.scope;}else throw error("No options for dimSum");d={dimIndexTriggeringDimSum:e};d.dimCombOnPage=h();var b=h(!0).slice(0);b[e]=g.symbolForTriggeringDim;e=b.join("_");d.hashKey=e;for(var w=a.asinList,e=[],b=[],m=0,p=w.length;m<p;m++){var q=w[m];q&&(g.asinDimSumCache&&g.asinDimSumCache[q]?b.push(q):e.push(q))}w=[];w.asinListForServer=e;w.asinListForCache=b;0<w.asinListForServer.length&&f(w.asinListForServer,d,a);if(0<w.asinListForCache.length){e=w.asinListForCache;w=0;for(m=e.length;w<m;w++)b=e[w],
a.chunk(g.asinDimSumCache[b],d);e.length===a.asinList.length&&a.success(G,G,G,d)}}}});A.when("A","jQuery").register("detail-page-state-controller",function(){return function(){this.state={};this.getState=function(){return this.state};this.setState=function(u,k){u&&k&&(this.state[u]=k)}}});A.when("A","jQuery").register("detail-page-framework",function(){return{callbacks:{},registerCallback:function(u,k,a){"after_redraw"!=u&&"asin_select"!=u||"sims-widget"!=k&&"session-similarities"!=k&&"purchase-similarities"!=
k&&"buyxgety"!=k||(this.callbacks[k+"_feature_div"]=a)},registerFeature:function(){},registerFeatureConfig:function(){}}});A.when("A","twister-string-constants").register("twister-modal-resize-helper",function(u,k){return function(){function a(a,h){a.each(function(a,m){var f=l(m);-1==m.className.indexOf(h)&&(f.outerWidth()>c.width&&(c.width=f.outerWidth()),f.outerHeight()>c.height&&(c.height=f.outerHeight()))});return c}var c={width:0,height:0},f=this,l=u.$;f.getGlanceSwatchesInRow=function(a,c){c&&
c.fixModalSwatchesForThinWidths();var e=l("#twister_feature_div "+a),m=0,f=0;0<e.length&&(f=e.get(0).getBoundingClientRect().top,m++);for(var g=1,q=e.length;g<q;g++){var k=e.get(g).getBoundingClientRect();if(5<Math.abs(f-k.top))break;else m++}c&&c.resizeSwatchesForThinWidths();return m};f.fixSize=function(c,h,e,m,v){c.removeClass("twisterSwatchWrapper");var g=a(c,m),q=C.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;if(v!=G){var k=v.twisterModalDiv.outerWidth(),d=f.getGlanceSwatchesInRow(h,
v),x=c.first().width(),x=d*(g.width-x);0<x&&0<d&&(newModalWidth=k+x,v.setModalWidth(newModalWidth))}c.addClass("twisterSwatchWrapper");Twister.isIE8()?(c.each(function(b,a){l(a).css({"min-height":g.height+"px","min-width":g.width+"px"})}),1100<q&&l("."+m).css({height:g.height+"px"})):l("#"+e).html(h+" { min-height:"+g.height+"px; min-width:"+g.width+"px; } ."+m+" { height: "+g.height+"px;}");f.resetBestSize()};f.resetBestSize=function(){c={width:0,height:0}}}});A.when("A","jQuery","twisterModule",
"dp-js-logger","page-refresh:controller","twister-controller","twister-state","twister-string-constants").register("detailPage:RefreshHandler",function(u,k,a,c,f,l,r,h){var e=C.twisterController.twisterModel.twisterState,m=new c("dpPageRegreshHandler"),v={},g=function(a){var g=this;g.clientId=a;g.doPageRefresh=function(d){if(!Array.isArray(d))throw"Incorrect parameters passed to doPageRefresh for clientId "+g.clientId;d=e.getRequestContextForExternalTwisterUpdates(d);try{f.updatePage(d,h.EVENT_TYPE_CLICK)}catch(c){m.logFatal(c,
{message:" Error doing page-refresh for clientId "+a})}};g.getURLParamObject=function(a,e,b){if(!a||null==b)throw"Incorrect parameters passed to getURLParams for clientId "+g.clientId;return{key:encodeURIComponent(a),value:encodeURIComponent(e),isPersistent:b}}};return{getHandlerInstance:function(a){if(null==a||""==a)throw"Incorrect clientID passed to getHandlerInstance of dpRefreshHandler";v[a]||(v[a]=new g(a));return v[a]}}});A.when("A","jQuery","detailPage:RefreshHandler","twister-string-constants").register("your-module-name",
function(u,k,a,c){C.handleClickForMyButton=function(){for(var c=[],l="",r="",h=0,e=arguments.length;h<e;h++)r=arguments[h],0==h?l=a.getHandlerInstance(r):(r=l.getURLParamObject(r[0],r[1],r[2]),c.push(r));l.doPageRefresh(c)}});A.when("A","jQuery","dp-ajax-prefetch","detail-page-framework","dp-js-logger","twister-string-constants","page-refresh:meta-cache","page-refresh:page").register("page-refresh:controller",function(u,k,a,c,f,l,r,h){var e={intermediateEOS:1,EOS:1},m=new f("dpTwister");return new function(){function f(b,
a){if(!(1<a.recordImpressionPending)){var d=a.impressionCallbackData&&a.impressionCallbackData.relatedRequestID,e="/gp/twister/impression.html/?relatedRequestID="+d;d?u.delay(function(){u.get(e,{success:function(b){m.logCounter("dpTwisterImpression",1)},timeout:4E4,error:function(b,a,d){m.logCounter("dpTwisterImpressionFailed",1)}})},1500):m.logFatal("prefetchRequestId does not exists. twister prefetch ajax requests are not returning the metadata.");a.recordImpressionPending++;r.set(b,a)}}function g(b,
a,d){"undefined"===typeof a.forceFullPrefetch&&(a.forceFullPrefetch=d||l.NO,r.set(b,a));return a.forceFullPrefetch===l.NO&&x.metadata[b.mType]&&!x.metadata[b.mType].fullyPrefetchable}function q(b,a){y(b,function(b){h.executeClientFeatures(b,a)})}function y(b,a){var d=[b];b.relatedContext&&d.push(b.relatedContext);k.each(d,function(b,d){a.apply(x,[d])})}function d(d,e){y(d,function(d){h.fadeInFeatures(d);var c=d.uniqueID,w=d.url;md=r.get(d);x.newPrefetchWeblab&&md.prefetchSent&&g(d,md)&&(c+="_prefetch_1",
w+="&prefetchParam=1",md.hotFeaturesPending=!0);md.requestSent=!0;r.set(d,md);var m=x.newPrefetchWeblab&&e===l.EVENT_TYPE_CLICK;a.getInstance("dpTwister",c,w,b,d,d.doNotAbort).getContent(m)})}var x=this;x.metadata={};x.newPrefetchWeblab=!1;x.page=h;x.twisterPSCParam="psc";var b={chunk:function(b,a){var d=b.ASIN,g=b.Value,c=b.FeatureName;if(!e[c]){var m=r.get(a);"twister-request-metadata"===c?(m.impressionCallbackData=u.parseJSON(g.content[c]),r.set(a,m)):h.refreshFeature(d,c,g)}},success:function(d,
e,g,c){d=r.get(c);d.hotFeaturesPending&&(d.hotFeaturesPending=!1,r.set(c,d),a.getInstance("dpTwister",c.uniqueID+"_prefetch_2",c.url+"&prefetchParam=2",b,c,c.doNotAbort).getContent());d.recordImpressionPending&&f(c,d)},error:function(b,a,d){Twister.$("#variations-overlay").hide();Twister.showErrorMessageOnFailure&&(alert(Twister.errorMessageOnFailure),location.reload());m.logFatal(a+" "+d)},abort:function(b){m.logFatal(" Ajax aborted: "+b)},timeout:4E4};x.prefetchPage=function(d,e){y(d,function(d){var c=
d.uniqueID,h=d.url,w=r.get(d);w.requestSent||(g(d,w,e)&&(c+="_prefetch_1",h+="&prefetchParam=1"),w.prefetchSent=!0,w.recordImpressionPending=w.recordImpressionPending||1,w.requestSent=!0,r.set(d,w),a.getInstance("dpTwister",c,h,b,d,d.doNotAbort).prefetchContent())})};x.updatePage=function(b,a){if(a===l.EVENT_TYPE_CLICK||a===l.EVENT_TYPE_DROPDOWN_CHANGE){if(!b.partialState){if(c.callbacks["sims-widget_feature_div"])c.callbacks["sims-widget_feature_div"](DetailPage.StateController.getState());h.startMeasurement(b)}d(b,
a)}q(b,a)};x.reloadPage=function(b){var a;if(C.location.search){a=C.location.search;var d={};a=a.substring(a.indexOf("?")+1).split("&");for(var e=0;e<a.length;e++){var c=a[e].split("=");c[0]&&0<=c[0].length&&(d[decodeURIComponent(c[0])]=decodeURIComponent(c[1]))}a=d}var g,d="/dp/"+b.childAsin;b.partialState?a[x.twisterPSCParam]&&delete a[x.twisterPSCParam]:a[x.twisterPSCParam]=1;(b="?"+k.param(a))&&d&&(g=d+b);C.location.href=g};x.init=function(b){x.newPrefetchWeblab=b.newPrefetchWeblab;k.each(b.contextMetaData,
function(b,a){if(a.elementList){for(var d=a.elementList.length,e=!0,c=0;c<d;c++)if(!a.elementList[c].isPrefetchable){e=!1;break}x.metadata[b]||(x.metadata[b]={});x.metadata[b].fullyPrefetchable=e}});h.init(b)}}});A.when("A","jQuery","page-refresh-measurement","twister-string-constants","dp-js-logger").register("page-refresh:page",function(u,k,a,c,f){var l=new f("dpTwister");return new function(){var f=this;f.measurement=G;f.config={partial:{},full:{},parent:{},master:{}};f.dimensionsDisplayType=G;
f.initializeMeasurement=function(c){var e=c.measurement;f.dimensionsDisplayType=c.dimensionsDisplayType;f.measurement=new a(k,e.atf.marker,e.cf.marker);f.measurement.init(c.storeID,c.productGroupID)};f.init=function(a){f.initializeMeasurement(a);k.each(a.contextMetaData,function(a,h){var l=[],g={},q=h.elementList||[],y=q.length;g[c.EVENT_TYPE_MOUSEOVER]={};g[c.EVENT_TYPE_CLICK]={};for(var d=0;d<y;d++){var x=k("#"+q[d].divToUpdate);l.push("#"+q[d].divToUpdate);x.length&&q[d].customClientFunction&&
(q[d].updateOnHover&&(g[c.EVENT_TYPE_MOUSEOVER][q[d].divToUpdate]=x.attr("customfunctionname")),g[c.EVENT_TYPE_CLICK][q[d].divToUpdate]=x.attr("customfunctionname"))}f.config[a].affectedFeatures=l.join(",");f.config[a].clientFeatures=g})};f.startMeasurement=function(a){var e,m,l=f.dimensionsDisplayType;null!=a.divMetaData&&(e=a.divMetaData.dimDisplayType);"undefined"!==typeof a.currentDimCombID&&(m=a.currentDimCombID.split(c.CHAR_UNDERSCORE).length);this.measurement.start(a.newAsin,e,m,l)};f.fadeInFeatures=
function(a){k(this.config[a.mType].affectedFeatures).css({opacity:.5})};f.executeClientFeatures=function(a,e){k.each(f.config[a.mType].clientFeatures[e===c.EVENT_TYPE_CLICK||e===c.EVENT_TYPE_DROPDOWN_CHANGE?c.EVENT_TYPE_CLICK:c.EVENT_TYPE_MOUSEOVER],function(e,c){try{eval("var twisterCustomFunction = "+c+";"),twisterCustomFunction(a.reactID,DetailPage.StateController,function(){f.measurement.stampImageLoad(a.newAsin)})}catch(g){l.logFatal(g)}})};f.refreshFeature=function(a,e,c){var f,g;try{e&&c&&
c.content&&(g=c.content[e],"undefined"!==typeof g&&(f=k("#"+e),f.html(g),f.css({opacity:""})))}catch(q){e=e||"NoFeatureName",l.logFatal(q,{message:" Error in feature "+e})}this.measurement.stampFeature(e,a)}}});A.when("twister-string-constants").register("page-refresh:meta-cache",function(u){return{data:{},set:function(k,a){var c=this.getKey(k);return c?this.data[c]=a:G},get:function(k){k=this.getKey(k);return this.data[k]||{}},getKey:function(k){var a;k&&k.newAsin&&(a=k.mType===u.MTYPE_PARENT?k.mType+
k.newAsin:k.mType===u.MTYPE_MASTER?k.mType+k.id:k.mType+k.newAsin+k.reactID);if(!a)throw"Twister PageRefresh::MetaCache:getKey incorrect context passed.";return a}}});A.when("A","jQuery").register("page-refresh-ajax-scope",function(u,k){return function(a,c,f){this.scopeName=c;this.url=f;ues("t0",c,C.newTwisterInteractionStartTime);ues("ctb",c,"1");this.signalMarker=function(a){!this.markers[a]||0>=this.markers[a].conditions||0===--this.markers[a].conditions&&"function"==typeof this.markers[a].handler&&
this.markers[a].handler()};this.addlongPoleTag=function(a,c){a=a.toLowerCase();this.markers[a]&&0==this.markers[a].conditions&&0==this.markers[a].conditions&&C.ue&&"function"===typeof ue.tag&&ue.tag(c)};this.postData=function(){var c=this.scopeName;a.ajax({url:this.url,dataType:"text",timeout:4E4,error:function(){},success:function(a,e,m){ues("id",c,a);uex("ld",c)}})};var l=this;this.markers={image:{conditions:1,handler:function(){uet("ne",c);l.signalMarker("af")}},af:{conditions:Twister.atfMarkerCount?
Twister.atfMarkerCount:2,handler:function(){uet("af",c);uet("cf",c);l.signalMarker("cf")}},cf:{conditions:Twister.cfMarkerCount?Twister.cfMarkerCount:2,handler:function(){uet("cf",c);l.postData()}}}}});A.when("A","jQuery").register("page-refresh-cache",function(u,k){return function(){this.data={};this.getValue=function(a,c){return null==this.data[a]?null:c?this.data[a][c]:this.data[a]};this.setValue=function(a,c,f){if(null==this.data[a]||this.data[a].pending)this.data[a]={};this.data[a][c]=f};this.clear=
function(a){this.data[a]=null}}});A.when("A","jQuery","page-refresh-refresh","page-refresh-measurement","page-refresh-model","detail-page-framework").register("page-refresh-manager",function(u,k,a,c,f,l){return function(r,h,e,m,v){this.$=r;this.model={};this.refresh=new a(r,m,v);this.contextMetaData=h;this.measurement=new c(r,e.atfMarker,e.cfMarker);this.init=function(a,e){for(var c in this.contextMetaData)this.model[c]=new f(r,this.contextMetaData[c].AJAXUrl,this.contextMetaData[c].elementList,c.toString());
this.measurement.init(a,e)};this.getModelCacheSize=function(a){var e=0;this.model.hasOwnProperty(a)&&r.each(this.model[a].cache.data,function(a,d){d.hasOwnProperty("cacheStatus")&&("preFetched"!==d.cacheStatus&&"completeFetched"!==d.cacheStatus||e++)});return e};this.react=function(a,e){for(var c in this.model)e||this.model[c].finishAjaxCall(this.model[c].currentRequestId,1);c=0;for(var d=a.length;c<d;c++){var h=a[c];e||this.model[h.type].finishAjaxCall(this.model[h.type].currentRequestId,2);var b=
this.model[h.type].getUpdateData(this,h);this.refresh.startRefresh(b);this.model[h.type].makePendingCallBacks()}};this.pageRefreshHandler=function(a,e,c,d){if(!d.noRefresh)for(var h in d.content)try{this.refresh.doRefresh(h,d.content[h]);if(c.isFinishRefreshReq)if(this.refresh.finishRefresh(h),"session-similarities_feature_div"==h||"purchase-similarities_feature_div"==h||"buyxgety_feature_div"==h){if(l.callbacks[h])l.callbacks[h]()}else"zeroes-buy-box_feature_div"===h&&Twister.isIEBrowser(r)&&r("#"+
h).css({opacity:"",zoom:1});this.measurement.stampFeature(e,a)}catch(b){}}}});A.when("A","jQuery","page-refresh-ajax-scope").register("page-refresh-measurement",function(u,k,a){return function(c,f,l){this.atfMarker=f;this.cfMarker=l;this.scopeCount={};this.ajaxScopes={};this.url="";this.init=function(a,c){this.url="/gp/twister/dynamic-update/ajax-measurement.html/?s="+a+"&pgid="+c+"&deviceType="+Twister.deviceType;Twister.isInstaTwisterEnabled&&(this.url+="&ptd="+Twister.productTypeName)};this.start=
function(f,h,e,m){if(C.ue){this.scopeCount[f]||(this.scopeCount[f]=0);var l=f+(this.scopeCount[f]+1);this.scopeCount[f]++;var g=this.url;h&&(g+="&dimensionType="+h);"undefined"!==typeof e&&(g+="&dimensionCount="+e);"undefined"!==typeof m&&(g+="&dimensionsDisplayType="+m);this.ajaxScopes[f]=new a(c,l,g)}};this.stampImageLoad=function(a){this.ajaxScopes[a]&&(this.ajaxScopes[a].signalMarker("image"),Twister.cfImageLongPollTag&&this.ajaxScopes[a].addlongPoleTag("cf",Twister.cfImageLongPollTag))};this.stampFeature=
function(a,c){this.ajaxScopes[c]&&(a===this.atfMarker&&this.ajaxScopes[c].signalMarker("af"),a===this.cfMarker&&(this.ajaxScopes[c].signalMarker("cf"),Twister.cfHtmlLongPollTag&&this.ajaxScopes[c].addlongPoleTag("cf",Twister.cfHtmlLongPollTag)))};this.stampCustomMetrics=function(a,c){this.ajaxScopes[c]&&uet(a,this.ajaxScopes[c].scopeName)}}});A.when("A","jQuery","page-refresh-cache").register("page-refresh-model",function(u,k,a){return function(c,f,l,r){this.$=c;this.pendingCallBacks={};this.pendingCallBacksASIN=
"";this.cache=new a;this.AJAXUrl=f;this.AJAXRequests={};this.requestIdHash={};this.elementList=l;this.currentRequestId=null;this.pendingCallbacksList={};this.immediateCallbacksList=[];this.elementsToRefresh=[];this.modelType=r;this.getNewRequestId=function(){for(var a=0;100>a;a++){var e=a.toString();if(!this.requestIdHash.hasOwnProperty(e))return this.requestIdHash[e]=!0,e}};this.removeRequestId=function(a){"string"!=typeof a&&(a=a.toString());this.requestIdHash.hasOwnProperty(a)&&delete this.requestIdHash[a]};
this.executeActionItems=function(a,e,c,f,g){c=c.divToUpdate;for(var q=0,r=a.length;q<r;q++){var d=a[q];if("addToImmediate"==d)d={},d.id=e,d.key=c,this.immediateCallbacksList.push(d);else if("addToElementsRefresh"==d||"addToElementsRefreshWithLoading"==d)g.push(c+("addToElementsRefreshWithLoading"==d?",loadingBar":""));else if("updateCache"==d)d={handler:this,callbackType:"updateCache"},this.addToPendingCallbacksList(e,c,d);else if("customClientFunction"==d){var d={handler:this,callbackType:"customClientFunction"},
l={};l.refreshHandler=f;d.callbackParams=l;this.addToPendingCallbacksList(e,c,d)}else if("doRefreshAndFinish"==d||"doRefresh"==d)d={},d.handler=f,d.callbackType="doRefresh",l={isFinishRefreshReq:1},d.callbackParams=l,this.addToPendingCallbacksList(e,c,d)}};this.getAjaxCallContext=function(a,e,c,f,g,q){e=[];var r=g=0,d="notFetched";this.cache.getValue(a,"cacheStatus")&&(d=this.cache.getValue(a,"cacheStatus"));for(var l=0,b=this.elementList.length;l<b;l++){var w=this.elementList[l],B=w.divToUpdate,
p=[],t=1,k=0,H=0,I=0;"0"==w.isPrefetchable&&(t=0,r=1);"1"==w.customClientFunction&&(k=1,t=0);"1"==w.updateOnHover&&(H=1);"1"==w.loadingBar&&(I=1);if(!q||H){if(c)if(k||!t||this.cache.getValue(a,B))continue;else p.push("updateCache"),g||(g=1);else k?(p.push("customClientFunction"),p.push("addToImmediate")):this.cache.getValue(a,B)?(p.push("doRefresh"),p.push("addToImmediate")):(p.push("updateCache"),p.push("doRefreshAndFinish"),I?p.push("addToElementsRefreshWithLoading"):p.push("addToElementsRefresh"),
g||(g=1));(1==c&&"preFetched"==d||0==c&&"completeFetched"==d||1==c&&"completeFetched"==d)&&1==g&&(g=0);this.executeActionItems(p,a,w,f,e)}}(1==c&&"preFetched"==d||0==c&&"completeFetched"==d||1==c&&"completeFetched"==d)&&1==g&&(g=0);q&&g&&(g=0);g&&this.cache.setValue(a,"cacheStatus",c?r?"preFetching":"completeFetching":"preFetched"==d?"hotFeaturesFetching":"completeFetching");a={};a.isAjaxCallReq=g;a.elementsToRefresh=e;return a};this.getUpdateData=function(a,e){for(var c=e.idList,f=[],g=[],q=[],r=
[],d=0,l,b,w,B,p,t=1,k=0,H=c.length;k<H;k++){b=c[k].id;w=c[k].asin;B=c[k].isPrefetch;l=c[k].requiredDivs;l=this.getAjaxCallContext(b,w,B,a,l,c[k].isHover);p=l.elementsToRefresh;for(var I=0,n=p.length;I<n;I++)r.push(p[I]);if(l.isAjaxCallReq){d=1;B=B?1:"hotFeaturesFetching"==this.cache.getValue(b,"cacheStatus")?2:0;if(0==B||2==B)t=0;g.push(b);q.push(w);f.push(B)}}if(d){c={};c.asinList=q.join(",");c.id=g.join(",");c.prefetchParam=f.join(",");c.managerHandler=a;c.modelType=this.modelType;c.containsOnlyPrefetches=
t;try{this.doAjaxCall(c)}catch(z){}}this.elementsToRefresh=r.slice();return r};this.makeCallback=function(a,e,c,f){var g=c.handler,q=c.callbackType;c=c.callbackParams;null==f&&(f=this.cache.getValue(a,e));if("function"==typeof g)g(a,e,c,f);else if("doRefresh"==q)g.pageRefreshHandler(a,e,c,f);else if("customClientFunction"==q)try{g.callCustomClientFunction(a,e,c,f)}catch(r){}else"updateCache"==q&&g.updateCache(a,e,c,f)};this.makePendingCallBacks=function(a,e,c){var f;if(a){if("object"===typeof this.pendingCallbacksList[a])if(e){f=
this.pendingCallbacksList[a][e];if(!f){f=[];var g={handler:this,callbackType:"updateCache"};f.push(g)}for(var q=0,r=f.length;q<r;q++){g=f[q];try{this.makeCallback(a,e,g,c)}catch(d){}}this.pendingCallbacksList[a][e]&&delete this.pendingCallbacksList[a][e]}else{for(g in this.pendingCallbacksList[a])for(f=this.pendingCallbacksList[a][g],q=0,r=f.length;q<r;q++)this.makeCallback(a,e,callbackargs,c);delete this.pendingCallbacksList[a]}}else{a=0;for(r=this.immediateCallbacksList.length;a<r;a++)e=this.immediateCallbacksList[a],
this.makePendingCallBacks(e.id,e.key,null);this.immediateCallbacksList=[]}};this.addToPendingCallbacksList=function(a,e,c){this.pendingCallbacksList.hasOwnProperty(a)||(this.pendingCallbacksList[a]={});this.pendingCallbacksList[a].hasOwnProperty(e)||(this.pendingCallbacksList[a][e]=[]);this.pendingCallbacksList[a][e].push(c)};this.doAjaxCall=function(a){Twister.useVariationsOverlay&&0===Twister.remainingAjaxCalls&&Twister.$("#variations-overlay").show();Twister.remainingAjaxCalls+=1;var e=this.getNewRequestId();
this.currentRequestId=e;var c=a.managerHandler,f=this.AJAXUrl+a.asinList+"&isFlushing=2&id="+a.id+"&prefetchParam="+a.prefetchParam+"&mType="+a.modelType;Twister.isInstaTwisterEnabled&&(f+="&dpEnvironment="+Twister.dpEnvironment);var g={};if(Twister.useAuiAjax){var q=this,f=Twister.A.ajax(f,{method:"get",chunk:function(a){q.AJAXHandler(null,a,AJAXFlushUtils.ajaxReadyState.LOADING)},success:function(){q.AJAXHandler(null,null,AJAXFlushUtils.ajaxReadyState.DONE);--Twister.remainingAjaxCalls;0===Twister.remainingAjaxCalls&&
Twister.$("#variations-overlay").hide()},error:function(){Twister.$("#variations-overlay").hide();--Twister.remainingAjaxCalls;Twister.showErrorMessageOnFailure&&(alert(Twister.errorMessageOnFailure),location.reload());Twister.printConsoleLogs&&console.logs("ajax call failed")},timeout:4E4});g.streamingXhrRef=f}g.ajaxParams=a;g.managerHandler=c;this.AJAXRequests[e]=g};this.abortAllAjaxCalls=function(){for(requestId in this.requestIdHash)this.finishAjaxCall(requestId,!0)};this.finishAjaxCall=function(a,
e){if(a){var c=this.AJAXRequests[a],f=c.streamingXhrRef,g=c.ajaxParams,c=g.id.split(","),g=g.containsOnlyPrefetches;if(1!=e||!g){this.pendingCallbacksList={};this.immediateCallbacksList=[];if(e)for(f&&"function"===typeof f.abort&&f.abort(AJAXFlushUtils.ajaxHandlerCode.ABORT),f=0,g=c.length;f<g;f++)if(this.cache.getValue(c[f])){var q=this.cache.getValue(c[f],"cacheStatus");"preFetching"==q||"completeFetching"==q?e?this.cache.clear(c[f]):this.cache.setValue(c[f],"cacheStatus","preFetching"==q?"preFetched":
"completeFetched"):"hotFeaturesFetching"==q&&this.cache.setValue(c[f],"cacheStatus",e?"preFetched":"completeFetched")}this.elementsToRefresh=[];this.removeRequestId(a);delete this.AJAXRequests[a];this.currentRequestId=null}}};this.updateCache=function(a,e,c,f){"intermediateEOS"==e||"EOS"==e?(e=this.cache.getValue(a,"cacheStatus"),"preFetching"==e?this.cache.setValue(a,"cacheStatus","preFetched"):"completeFetching"!=e&&"hotFeaturesFetching"!=e||this.cache.setValue(a,"cacheStatus","completeFetched")):
this.cache.setValue(a,e,f)};this.callCustomClientFunction=function(a,e,m,f){var g=c("#"+e).attr("customFunctionName");if(g){var q=m.refreshHandler,r=DetailPage.StateController.getState().current_asin;f=function(){q.measurement.stampImageLoad(r)};m=Twister.useAui?f:null;if(g=Twister.useAui?eval("var customFunction = "+g+"; customFunction")(a,DetailPage.StateController,m):eval(g)(a,DetailPage.StateController,m)){m={isFinishRefreshReq:0};if(!Twister.useAui){var d;if("twister-main-image"==e&&r){d=document.getElementById("main-image");
if(!d){var l=document.getElementById("main_image_0");l&&(d=(d=l.getElementsByTagName("img"))?d[0]:null)}d&&(d.onload=f)}}q.pageRefreshHandler(a,e,m,g);Twister.useAui||-1<navigator.userAgent.toLowerCase().indexOf("chrome")&&d&&d.complete&&f()}}};this.AJAXHandler=function(a,e,c){if(c==AJAXFlushUtils.ajaxReadyState.DONE)return this.finishAjaxCall(this.currentRequestId,0),AJAXFlushUtils.ajaxHandlerCode.OK;for(a=0;1>a;a++){var f=e;c=f.ASIN;e=f.Value;f=f.FeatureName;"intermediateEOS"==f||"EOS"==f?this.updateCache(c,
f,null,e):this.makePendingCallBacks(c,f,e)}return AJAXFlushUtils.ajaxHandlerCode.OK};this.AJAXErrorHandler=function(a,e,c){(a=a.xhrStatus)||(a=c);return a}}});A.when("A","jQuery").register("page-refresh-refresh",function(u,k){return function(a,c,f){this.$=a;this.loadingBarHtml=c;this.loadingBarHtml2=f;this.doRefresh=function(c,f){a("#"+c).html(f)};this.startRefresh=function(c){if(c)for(var f=0,h=c.length;f<h;f++){var e=c[f].split(","),m=e[0],v=!0,g=!1;if("buy-box_feature_div"==m||"more-buying-choices_feature_div"==
m||"session-similarities_feature_div"==m&&a.browser.msie)v=!1;1<e.length&&"loadingBar"==e[1]&&(g=!0);v&&!Twister.useVariationsOverlay&&a("#"+m).css("opacity","0.5");g&&this.appendLoadingBar(m)}};this.appendLoadingBar=function(c){var f=a("#"+c);"moreBuyingChoices_feature_div"==c||f.attr("loadingBarSet")||(f.attr("loadingBarSet","1"),"more-buying-choices_feature_div"==c?(f=a("#more-buying-choice-content-div"),f.html(this.loadingBarHtml2)):(c=f.find("h2, h1, b"),0<c.length&&(c=a(c[0]),c.css({display:"inline",
padding:"0px"}),c.after(a(this.loadingBarHtml)))))};this.finishRefresh=function(c){var f=!0,h=!0;"buy-box_feature_div"==c&&(h=f=!1);if("session-similarities_feature_div"==c&&a.browser.msie||"more-buying-choices_feature_div"==c)f=!1;var e="0";"more-buying-choices_feature_div"==c&&(e="1");f&&a("#"+c).css({opacity:"",zoom:e});h&&a("#"+c).removeAttr("loadingBarSet")}}});A.when("A").register("evdd-utils",function(u){return function(){this.PopulateEVDD=function(k,a,c,f){var l={},r,h;for(r in k)h=c[r],"undefined"!=
typeof h&&(masterDimValIndex=h[0],slaveDimValIndex=h[1],f==masterDimValIndex&&(l[slaveDimValIndex]=k[r]));"function"===typeof a.dimensionViewHandlersMap[1].updateViewWithPriceInfo&&a.dimensionViewHandlersMap[1].updateViewWithPriceInfo(l)}}});A.when("A","jQuery","dp-js-logger").register("dp-ajax-prefetch-metrics",function(u,k,a){function c(a){this.scope="dpPre"+a;this.data={}}new a("PrefetchMetrics");c.prototype._count=function(a,c){var r=this.scope+a,h;C.ue&&C.ue.count&&(h="undefined"!==typeof c?
(h=ue.count(r,c))||c:(h=ue.count(r))||0);return h};c.prototype._incrementCounter=function(a){this._count(a,(this._count(a)||0)+1)};c.prototype._record=function(a,c,r){this.data[c]=this.data[c]||{};this.data[c][a]||(this.data[c][a]=r||(new Date).getTime(),"predicted"==a?this._incrementCounter("Predicted"):"selected"==a&&this.data[c].predicted?(a=this.data[c].selected-this.data[c].predicted,this.data[c].lookahead=a,this._incrementCounter("PredictedSelect"),this._count("LookAhead"+this._count("PredictedSelect"),
a),this._count("LookAhead",a)):"selected"!=a||this.data[c].predicted||this._incrementCounter("UnpredictedSelect"))};c.prototype.setCounter=function(a,c){this._count(a,c)};c.prototype.predicted=function(a,c){this._record("predicted",a,c)};c.prototype.selected=function(a,c){this._record("selected",a,c)};c._allInstances={};c.getInstance=function(a){if(!a)throw"Undefind scope. scope is a required parameter";c._allInstances[a]||(c._allInstances[a]=new c(a));return c._allInstances[a]};return c});A.when("A").register("scroll-event-handler",
function(u){return function(k,a,c){if(a){var f=u.$,l,r=(new Date).getTime();f(a).bind("scroll",function(a){var e=Date.now();l&&e-r<k&&clearTimeout(l);r=e;l=setTimeout(function(){c(a)},k)})}}});A.when("A","twister-utils","twister-string-constants","legacy-popover").register("twister-beaconized-evdd",function(u,k,a){return function(c,f){function l(){var a=8+g(q).height(),a={localContent:y,location:"bottom",showOnHover:!1,showCloseButton:!1,skin:null,clone:!1,controlCallbacks:!0,locationOffset:[-2,-a],
closeEventInclude:"CLICK_OUTSIDE",forceAlignment:!0,group:"DonsBoxDropDowns",width:null};b=g(q).amazonPopoverTrigger(a);g(document).bind("touchend click",function(){B=!1;b.amznPopoverHide()})}function r(a){B=!0;a=a.currentTarget.id.split("_");twisterController.handleClick({dimIndex:v.dimOrder,dimValueIndex:a[a.length-1]});B&&(b.amznPopoverHide(),B=!1);return!1}function h(b){g(b.currentTarget).addClass("evdd-row-hovered")}function e(b){g(b.currentTarget).removeClass("evdd-row-hovered");return!1}function m(b){g(b.currentTarget).removeClass("evdd-row-hovered");
r(b);return!1}var v=this,g=u.$,q,y,d,x,b,w={},B=!1;v.dimType="evdd";v.dimNameDisplayString;v.dimData;v.dimensionsMap;v.dimNameDisplayString;v.dimValuesDisplayData;v.dimName;v.dimOrder;v.isMasterDim=!1;v.updateView=function(a){var e=k.getDimStyleData(a.dimCombID,v.dimValuesDisplayData.length,v.dimOrder,v.twisterControllerHandle.twisterAvailabilityCache,v.displayConfigStylesData),c,h,m,n=-1;a=0;n="";b.amznPopoverHide();B=!1;for(var f=0,r=e.length;f<r;f++)c=e[f],h=w[c.style],m="#"+v.dimName+"_"+f,"evdd-row-selected"===
h&&(n=f,n=v.dimValuesDisplayData[n]),"available"!==c.style&&"selected"!==c.style||a++,$rowElement=g(m),$rowElement.removeClass(x).addClass(h),$rowElement.find(".evdd-row-snake-wrapper").show(),$rowElement.find(".evdd-row-price-info-wrapper").html(""),$rowElement.find(".evdd-row-prime-badge-wrapper").html("");e=!1;v.isMasterDim||1!==a||(e=!0);a=e;g(q).find("button").text(n);g(d).text(n);a?(g(q).addClass("evdd-hidden"),g(d).removeClass("evdd-hidden")):(g(d).addClass("evdd-hidden"),g(q).removeClass("evdd-hidden"))};
v.updateViewWithPriceInfo=function(b){var a,d,e;for(a in b)d=b[a],e="#"+v.dimName+"_"+a,e=g(e),e.find(".evdd-row-snake-wrapper").hide(),e.find(".evdd-row-price-info-wrapper").html(d[2]),e.find(".evdd-row-prime-badge-wrapper").html(d[3])};(function(){var b;v.dimOrder=f[a.STRING_DIM_ORDER];v.dimName=f[a.STRING_DIM_NAME];v.dimensionsMap=f[a.STRING_DIMENSIONS_MAP];v.dimNameDisplayString=f[a.STRING_DIMENSION_DISPLAY_STRING];v.dimValuesDisplayData=f[a.STRING_DIMENSION_VALUES_DATA];v.displayConfigStylesData=
f[a.STRING_DISPLAY_CONFIG_STYLES_DATA];v.twisterControllerHandle=f[a.STRING_TWISTER_CONTROLLER_HANDLE];v.initialTwisterState=f[a.STRING_TWISTER_INITIAL_STATE_KEY];b=v.initialTwisterState.getCurrentDimCombID();v.dimData=k.getDimStyleData(b,v.dimValuesDisplayData.length,v.dimOrder,v.twisterControllerHandle.twisterAvailabilityCache,v.displayConfigStylesData);v.isMasterDim=!1;"0"===v.dimOrder&&(v.isMasterDim=!0);v.dimNameDisplayString=f[a.STRING_DIMENSION_DISPLAY_STRING];q="#evdd-button-"+v.dimName;y=
"#evdd-table-wrapper-"+v.dimName;d="#evdd-singleton-"+v.dimName;w.invalid=v.isMasterDim?"evdd-row-default":"evdd-row-hidden";w.available="evdd-row-default";w.selected="evdd-row-selected";x="evdd-hidden evdd-row-hovered evdd-row-hidden evdd-row-default evdd-row-selected";l();for(var c=0,B=v.dimData.length;c<B;c++)b="#"+v.dimName+"_"+c,g(b).bind("click",r).bind("touchend",m).bind("touchstart",h).bind("mouseenter",h).bind("mouseleave",e)})()}});A.when("A","twister-variations-data","twister-view","twister-model",
"twister-model-new","twister-state","twister-availabilty-cache","twister-utils","evdd-utils","twister-logger","dp-js-logger").register("twister-controller",function(u,k,a,c,f,l,r,h,e,m,v){return function(g,q){function y(){for(var b=d.twisterJSInitData.num_total_variations,a=d.twisterVariationsData.dimensionValuesData,e=1,c=a.length,g=0;g<c;g++)e*=a[g].length;d.logger.logImpression(d.logger.eventTypes.TWISTER_UNAVAILABILITY_NOTIFIER,{noOfUnavailableVariations:e-b})}var d=this,x=u.$;d.logger=new m(x,
this);d.logger.init();d.twisterJSInitData=q;d.pageRefreshRefactor=q.pageRefreshRefactor;d.twisterVariationsData=new k(q);d.twisterAvailabilityCache=new r(d.twisterVariationsData,q);d.initTwisterState=new l(q,d.twisterVariationsData,d.twisterAvailabilityCache);d.twisterView=new a(d,d.initTwisterState,q,d.twisterVariationsData,d.twisterAvailabilityCache);d.twisterModel=d.pageRefreshRefactor?new f(d,q,d.twisterVariationsData):new c(d,g,q,d.twisterVariationsData,d.twisterAvailabilityCache);(function(){x(".variations .swatchOuter a").each(function(){var b=
jQuery(d).contents();x(d).replaceWith(b)});if("undefined"!==typeof TwisterNonJs)for(var b=TwisterNonJs.handleDropDown.length,a=0;a<b;a++)TwisterNonJs.handleDropDown[a]=function(){};x("#twister .swatches a").remove();x("#twisterNonJsData").html("");d.jsInteractionEnabledTime=Date.now();y()})();d.onInitializeTwister=function(){"undefined"!==typeof d.twisterView.dimensionViewHandlersMap&&d.twisterView.dimensionViewHandlersMap&&x.each(d.twisterView.dimensionViewHandlersMap,function(b,a){if("function"===
typeof a.onInitializeTwister)a.onInitializeTwister()})};d.populateEVDD=function(b){var a=this.twisterView,d=this.twisterVariationsData.asinToDimIndexMapData,c=this.twisterModel.twisterState.getMaster();b&&(new e).PopulateEVDD(b,a,d,c)};d.handleClick=function(b){this.divMetaData=b;var a=d.initTwisterState.getCurrentDimCombID(),e=h.reconstructCombinationWithDimValue(a,b.dimIndex,b.dimValueIndex);C.newTwisterInteractionStartTime=new Date;C.ue&&ue.tag&&ue.tag("twisterSwatchClick");h.isSwatchSelected(b,
d.twisterVariationsData)||a===e||(this.enableMouseOut=0,this.twisterModel.handleClick(b),d.twisterAvailabilityCache.isDimCombinationAvailable(e)||(d.logger.logImpression(d.logger.eventTypes.CLICK_NA,null),b=d.logger.eventTypes.UNAVAILABLE_SWATCH_PC_CLICK,Twister.isTabletWeb&&(b=d.logger.eventTypes.UNAVAILABLE_SWATCH_TABLET_CLICK),d.logger.logImpression(b,null)))};d.handleClickPrediction=function(b,a){this.twisterModel.prefetch(b,a)};d.handleExternalViewClick=function(b,a){try{d.handleClick(b)}catch(e){(new v(a)).logFatal(e,
{message:"[Failed to hand over click event of external view]"})}};d.handleMouseOver=function(b){if("undefined"!=typeof touchDeviceDetected&&touchDeviceDetected)return this.handleClick(b),!0;this.enableMouseOut=1;this.twisterModel.handleMouseOver(b);return!0};d.handleExternalViewMouseOver=function(b,a){try{d.handleMouseOver(b)}catch(e){(new v(a)).logFatal(e,{message:"[Failed to hand over mouse over event of external view]"})}};d.handleMouseOut=function(b,a,d){1===this.enableMouseOut&&this.twisterModel.handleMouseOut(b,
a,d)};d.handleExternalViewMouseOut=function(b,a,e,c){try{d.handleMouseOut(b,a,e)}catch(g){(new v(c)).logFatal(g,{message:"[Failed to hand over mouse out event of external view]"})}};d.handleDropdownOnChange=function(b,a){a.dimValueIndex=parseInt(b.value.split(",")[0]);C.newTwisterInteractionStartTime=new Date;C.ue&&ue.tag&&ue.tag("twisterDDClick");this.twisterModel.twisterState.setPreHoverData(a);this.twisterModel.handleDropdownChange(a)};d.registerExternalView=function(b,a){d.twisterModel.registerExternalView(b,
a)}}});A.when("A","twister-shelf","twister-counter","twister-vodd","twister-beaconized-evdd","twister-native-evdd","twister-dimension-views-swatch","twister-dimension-views-dropdown","twister-IMDD","twister-dimension-views-singleton","twister-string-constants").register("twister-dimension-view-factory",function(u,k,a,c,f,l,r,h,e,m,v){var g=u.$;return{getDimensionSubViewObject:function(q,y,d,x,b){var w,B=q.dimensionsDisplayType[d],p=q.dimensionsDisplaySubType[d],t=q.dimensions[d],F=q.dimensions,H=
q.dimensionsDisplay[d],I=[],n=g.isArray(Twister.isImmersiveViewEnabled)?Twister.isImmersiveViewEnabled[d]:!1;dimensionValuesData=y.dimensionValuesData[d];displayConfigStylesData=y.displayConfigStylesData[B];maxSwatchesForImmersiveView=q.maxSwatchesForImmersiveView[d];if("undefined"!==typeof q.isIconPresentForDimensionValue)I=q.isIconPresentForDimensionValue[d];else for(i=0;i<y.dimensionValuesData[d].length;i++)I.push(0);B===v.TWISTER_DIMENSION_VIEW_SWATCH?w=r:B===v.TWISTER_DIMENSION_VIEW_DROPDOWN?
w=n?e:h:B===v.TWISTER_DIMENSION_VIEW_SINGLETON?w=m:B===v.TWISTER_DIMENSION_VIEW_EVDD?w=g("html").hasClass("a-lt-ie8")?l:f:B===v.TWISTER_DIMENSION_VIEW_VODD?w=c:B===v.TWISTER_DIMENSION_VIEW_COUNTER?w=a:B===v.TWISTER_DIMENSION_VIEW_SHELF&&(w=k);y=dimensionValuesData;var B=displayConfigStylesData,n=maxSwatchesForImmersiveView,z={};z[v.STRING_DIM_ORDER]=d;z[v.STRING_DIM_NAME]=t;z[v.STRING_DIMENSIONS_MAP]=F;z[v.STRING_DIMENSION_DISPLAY_STRING]=H;z[v.STRING_DIMENSION_VALUES_DATA]=y;z[v.STRING_DISPLAY_CONFIG_STYLES_DATA]=
B;z[v.STRING_TWISTER_CONTROLLER_HANDLE]=x;z.isImmersiveViewEnabled=g.isArray(Twister.isImmersiveViewEnabled)?Twister.isImmersiveViewEnabled[d]:Twister.isImmersiveViewEnabled;z.isSlotsEnabled=g.isArray(Twister.isSlotsEnabled)?Twister.isSlotsEnabled[d]:Twister.isImmersiveViewEnabled;z[v.STRING_TWISTER_INITIAL_STATE_KEY]=b;z[v.STRING_MAX_SWATCHES_IMMERSIVE_VIEW]=n;z.isIconPresentForDimensionValue=I;z.dimensionDisplaySubType=p;return new w(q,z)}}});A.when("A").execute(function(){"function"===typeof uet&&
uet("bb","clickToTwister",{wb:1})});A.when("twisterModule").execute(function(u){"function"===typeof uex&&"function"===typeof uet&&(uet("be","clickToTwister",{wb:1}),uet("be","TwisterAUIWait",{wb:1}),uex("ld","clickToTwister",{wb:1}),uex("ld","TwisterAUIWait",{wb:1}))});A.when("A","twister-js-init-mason-data","twister-js-init-dpx-data","twister-controller","page-refresh-manager","dimensional-summary-module").execute(function(u,k,a,c,f,l){function r(){"undefined"!=typeof amznJQ?amznJQ.declareAvailable("newTwister"):
A.register("newTwister",function(){return C.newTwister});A.register("twisterModule",function(){return{getState:function(){return DetailPage.StateController.getState()}}});"undefined"!=typeof amznJQ?(amznJQ.declareAvailable("pageRefreshJS"),amznJQ.declareAvailable("dpf")):(A.register("pageRefreshJS",function(){return C.pageRefreshJS}),A.register("dpf",function(){return C.pageRefreshJS}))}function h(a){var e={};a.extend(e,{ajaxReadyState:{NONE:-1,UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4},
ajaxHandlerCode:{OK:0,IGNORE:1,RETRY:2,RELOAD:3,TIMEOUT:4,ABORT:5,FATAL:6,INVALID_RESP:7,INCOMPLETE_RESP:8,PAGELET_FATAL:9,DEBUG_NOAJAX:10},serverCode:{ERROR:-1,OK:200,TIMEOUT:408},shouldReload:function(a){return!1}});C.AJAXFlushUtils=e}C.Twister={};var e=C.Twister;e.$=u.$;e.DimensionViews={};u.on.ready(function(){e.A=u;if(!u.$.isEmptyObject(a)){var m=a.updateDivLists;e.dpEnvironment=a.dpEnvironment;e.isInstaTwisterEnabled=!0;e.productTypeName=k.productTypeName;e.isImmersiveViewEnabled=a.isImmersiveViewEnabledOnDim?
a.isImmersiveViewEnabledOnDim:a.isImmersiveViewEnabled;e.isSlotsEnabled=a.isSlotsEnabled;e.isImmersiveViewEnabledOnPage=a.isImmersiveViewEnabled;e.isImmersiveExperience=a.isImmersiveExperience?a.isImmersiveExperience:a.isImmersiveViewEnabled;e.multiDimensionWeblabEnabled=a.multiDimensionWeblabEnabled?a.multiDimensionWeblabEnabled:!1;e.immersivePartialStateMessage=a.immersivePartialStateMessage?a.immersivePartialStateMessage:"";e.immersiveFullySelectedStateMessage=a.immersiveFullySelectedStateMessage?
a.immersiveFullySelectedStateMessage:"";e.immersiveBannersPresent=a.immersiveBannersPresent?a.immersiveBannersPresent:!1;e.globalAjaxParameters={};e.isTabletWeb=a.isTabletWeb;var v=k.contextMetaData,g=v.full,q=v.master,y=v.parent,v=v.partial;k.dimensionSelectionData=a.dimensionSelectionData;k.dimensionsDisplayType=a.dimensionsDisplayType;k.dimensionsDisplaySubType=a.dimensionsDisplaySubType?a.dimensionsDisplaySubType:[];k.ajaxUrlParams=a.ajaxUrlParams;k.displayTypeProperties=a.displayTypeProperties?
a.displayTypeProperties:[];k.maxSwatchesForImmersiveView=a.maxSwatchesForImmersiveView?a.maxSwatchesForImmersiveView:[];"counter"===k.dimensionsDisplayType[0]&&"undefined"===typeof a.displayTypeProperties[0].expandedViewEnabled&&(k.useCounterConfig=!0,k.expandedViewEnabled=a.expandedViewEnabled?a.expandedViewEnabled:[],k.minAsinForExpandedView=a.minAsinForExpandedView?a.minAsinForExpandedView:[],k.minAsinForExpandedScroll=a.minAsinForExpandedScroll?a.minAsinForExpandedScroll:[]);if("undefined"!==
typeof a.twisterUpdateURLAppend){var d=k.twisterUpdateURLInfo,x=d.immutableURLPrefix,b=d.immutableParams,w=a.twisterUpdateURLAppend.immutableParams,B;for(B in w)if("function"!==typeof w.hasOwnProperty||w.hasOwnProperty(B))x+=(-1==x.indexOf("?")?"?":"&")+B+"="+w[B],b[B]=w[B];d.immutableURLPrefix=x;e.globalAjaxParameters=w}a.shouldUseDPXTwisterData&&(k.dimToAsinMapData=a.dimensionToAsinMap,k.asinToDimIndexMapData=a.asinToDimensionIndexMap,k.dimensionValuesData=a.dimensionValuesData,k.variation_values=
a.variationValues,k.asin_variation_values=a.asinVariationValues,k.reactId=a.reactId,k.currentDimCombID=a.currentDimensionCombinationId,k.selected_variation_values=a.selectedVariationValues,k.dimensionHierarchyData=a.dimensionHierarchyData,k.dimensionDisplayMap=k.dimensionDisplayMap,k.topHierarchicalDimensionIndex=a.topHierarchicalDimensionIndex,k.hierarchicalPivoting=a.hierarchicalPivoting,k.isIconPresentForDimensionValue=a.isIconPresentForDimensionValue,k["use-early-twister-init"]&&(k.current_asin=
a.currentAsin,k.parent_asin=a.parentAsin,k.deletedLandingAsinInfo=a.deletedLandingAsinInfo,k.num_total_variations=a.num_total_variations,k.dimensions=a.dimensions,k.unselectedDimCount=a.unselectedDimCount,k.selected_variations=a.selected_variations,k.dimensionValuesDisplayData=a.dimensionValuesDisplayData,k.prirotizeReqPrefetch=a.prioritizeReqPrefetch,k.num_variation_dimensions=a.num_variation_dimensions,k.num_total_variations=a.num_total_variations,k.dimensionsDisplay=a.dimensionsDisplay,k.variationDisplayLabels=
a.variationDisplayLabels));null!=m.full&&(g.elementList=null!=g.elementList?m.full.concat(g.elementList):m.full);null!=m.master&&(q.elementList=null!=q.elementList?m.master.concat(q.elementList):m.master);null!=m.parent&&(y.elementList=null!=y.elementList?m.parent.concat(y.elementList):m.parent);null!=m.partial&&(v.elementList=null!=v.elementList?m.partial.concat(v.elementList):m.partial)}m=k.isTablet;C.twisterInitPrefetchMode=k.twisterInitPrefetchMode;C.jqupgrade=k.jqupgrade;e.useDropdownThumbnail=
m;e.useVariationsOverlay=m;e.showErrorMessageOnFailure=m;e.remainingAjaxCalls=0;e.errorMessageOnFailure="We are sorry.  Amazon has encountered an error.  Please try again.";e.isLoggingEnabled=k.isLoggingEnabled;e.printConsoleLogs=k.printConsoleLogs;e.deviceType=k.deviceType;e.useAui=1;e.useAuiAjax=1;m=k.measurement.atf.marker;e.atfMarkerCount=k.measurement.atf.count;g=k.measurement.cf.marker;e.cfMarkerCount=k.measurement.cf.count;e.disableJsInteractions=k.disableJsInteractions?k.disableJsInteractions:
!1;e.cfImageLongPollTag=k.measurement.cf.longPollImageTag;e.cfHtmlLongPollTag=k.measurement.cf.longPollHtmlTag;m=new f(u.$,k.contextMetaData,{atfMarker:m,cfMarker:g,logChannel:"twister"},k.loadingBarHtml,k.loadingBarHtml2);C.twisterController=new c(m,k);m={};m.dimensionsList=k.dimensions;m.dimensionValuesList=k.dimensionValuesData;m.dimensionCombinationToASINMap=k.dimToAsinMapData;m.scopeSuffix="twister";m.globalAjaxParameters=e.globalAjaxParameters;e.dimensionalSummaryModule=new l(m);h(u.$);r();
if("function"===typeof C.twisterController.onInitializeTwister)C.twisterController.onInitializeTwister()});e.isIEBrowser=function(a){return a.browser.msie||!!navigator.userAgent.match(/Trident/)};e.isIE8=function(){var a=e.A.$;return a("html").hasClass("a-lt-ie9")};return e});A.when("A","twister-state","twister-utils","detail-page-framework","twister-string-constants","dp-js-logger").register("twister-model",function(u,k,a,c,f,l){return function(f,h,e,m,v){function g(a,d,e){d=0;try{for(;d<b.externalViews.length;)b.externalViews[d].updateView(a,
b.twisterState,e),d++}catch(c){(new l(externalViewNames[d])).logFatal(c,{message:"[Failed to update external view from TwisterModel]"})}}function q(a){var d,e,c,g,h,m=b.twisterState.parentASIN,n;a?(d=b.twisterState.reactId,e=b.twisterState.hoveredReactId,c=b.twisterState.unselectedDimCount,g=0<=b.twisterState.hoveredDimCombID.search(/X/)?1:0,h=b.twisterState.hoveredAsin):(d=b.twisterState.previousReactId,e=b.twisterState.reactId,c=b.twisterState.previousPartialState,g=b.twisterState.partialState,
h=b.twisterState.getCurrentASIN());n=b.twisterVariationsData.asinToDimIndexMapData[h];b.twisterVariationsData.useMS&&n&&h&&k(b.fetchMasterIDList,"m"+n[0],h,0,a);0===g?(k(b.fetchFullIDList,h,h,0,a),b.prioritizeReqPrefetch=0):0===c?(k(b.fetchPartialIDList,e,h,0,a),k(b.fetchParentIDList,m,m,0,a),b.prioritizeReqPrefetch=1):d!==e&&k(b.fetchPartialIDList,e,h,0,a)}function k(a,d,e,c,g){g||(g=0);1!=b.idsList[d]&&d&&e&&(!b.prefetchFixWeblab||e!==b.twisterState.parentASIN||"full"!==a.type)&&a&&(b.idsList[d]=
1,a.data.push({id:d,asin:e,isPrefetch:c,isHover:g}))}function d(a){a||(a=0);var d=[];0<b.fetchParentIDList.data.length&&d.push({type:"parent",idList:b.fetchParentIDList.data});0<b.fetchPartialIDList.data.length&&d.push({type:"partial",idList:b.fetchPartialIDList.data});0<b.fetchFullIDList.data.length&&d.push({type:"full",idList:b.fetchFullIDList.data});0<b.fetchMasterIDList.data.length&&d.push({type:"master",idList:b.fetchMasterIDList.data});0<d.length&&(a||b.pageRefresh.measurement.stampCustomMetrics("ns",
b.twisterState.currentASIN),b.pageRefresh.react(d,a));b.fetchParentIDList.data=[];b.fetchPartialIDList.data=[];b.fetchFullIDList.data=[];b.fetchMasterIDList.data=[];b.idsList={};b.prefetchCount=0}function x(d,e){for(var c={},g="",h=0;h<e.length;h++)g=null,b.twisterState.isDimSelected(h)&&(g=e[h],"(Please Select)"===g&&(g=null)),null!==g&&(g=a.htmlUnescape(g)),c[b.viewHandle.dimensionsMap[h]]=g;DetailPage.StateController.setState(d+"_variations",c)}var b=this;b.twisterControllerHandle=f;b.pageRefresh=
h;b.twisterJSInitData=e;b.twisterVariationsData=m;b.twisterAvailabilityCache=v;b.twisterState;b.prefetchCount=0;b.preHoverClass="";b.fetchParentIDList={type:"parent",data:[]};b.fetchPartialIDList={type:"partial",data:[]};b.fetchFullIDList={type:"full",data:[]};b.fetchMasterIDList={type:"master",data:[]};b.idsList={};b.prefetchFixWeblab=0;b.prioritizeReqPrefetch=0;b.externalViews=[];b.externalViewNames=[];b.registerExternalView=function(a,d){try{b.externalViews.push(a),b.externalViewNames.push(d)}catch(e){(new l(d)).logFatal(e,
{message:"[Failed to register external view with TwisterModel]"})}};b.handleMouseOver=function(e){var c;null!==e&&(b.twisterState.updateStateOnMouseOver(e),!a.isSwatchSelected(e,b.twisterVariationsData)||b.twisterVariationsData.useMS)&&(c=b.twisterVariationsData.getDimensionValuesDisplayData(b.twisterState.hoveredAsin),b.twisterVariationsData.useMS||x("hovered",c),this.viewHandle.updateView(e,b.twisterState,"mouseOver"),g(e,b.twisterState,"mouseOver"),q(1),d(1))};b.handleDropdownChange=function(a){b.handleClick(a)};
b.handleClick=function(e,h,p){var m=p?"mouseOut":"click",f,r,l=0;f=h;r=b.twisterState.getCurrentASIN();b.twisterVariationsData.useMS&&e&&a.isSwatchSelected(e,b.twisterVariationsData)&&(l=1);p||(p=0);if(null!==f||null!==e)if(f=b.twisterState.updateStateOnClick(e,h,m)){f=b.twisterState.getCurrentASIN();if(!p&&r!==f&&!b.twisterState.partialState&&c.callbacks["sims-widget_feature_div"])c.callbacks["sims-widget_feature_div"](DetailPage.StateController.getState());b.twisterState.partialState||p||b.pageRefresh.measurement.start(f);
r=b.twisterVariationsData.getDimensionValuesDisplayData(f);x("selected",r);x("hovered",r);b.twisterState.partialState||p||b.pageRefresh.measurement.stampCustomMetrics("bb",f);b.viewHandle.updateView({},b.twisterState,m);g(e,b.twisterState,m);b.twisterState.partialState||p||b.pageRefresh.measurement.stampCustomMetrics("be",f);1!==l&&(q(p),d(p))}};b.handleMouseOut=function(d,e,c){e=b.twisterState.getCurrentASIN();!b.twisterVariationsData.useMS&&a.isSwatchSelected(d,b.twisterVariationsData)||b.handleClick(null,
e,1)};(function(){var a;b.twisterJSInitData&&(b.twisterState=b.twisterControllerHandle.initTwisterState,b.MAX_PREFETCH_COUNT=b.twisterJSInitData.prefetchCount,b.prioritizeReqPrefetch=b.twisterJSInitData.prioritizeReqPrefetch,b.prefetchFixWeblab=b.twisterJSInitData.prefetchFixWeblab,a=b.twisterState.getCurrentASIN(),a=b.twisterVariationsData.getDimensionValuesDisplayData(a),b.viewHandle||(b.viewHandle=b.twisterControllerHandle.twisterView),x("selected",a),x("hovered",a));b.pageRefresh.init(b.twisterJSInitData.storeID,
b.twisterJSInitData.productGroupID)})()}});A.when("A","jQuery","twister-state","twister-utils","twister-string-constants","page-refresh:controller","dp-js-logger").register("twister-model-new",function(u,k,a,c,f,l,r){return function(a,e,m){function v(a,b,e){b=0;try{for(;b<d.externalViews.length;)d.externalViews[b].updateView(a,d.twisterState,e),b++}catch(c){(new r(externalViewNames[b])).logFatal(c,{message:"[Failed to update external view from TwisterModel]"})}}function g(a,b,e,g){if(b&&!d.twisterVariationsData.useMS&&
c.isSwatchSelected(b,d.twisterVariationsData))return!1;if(d.twisterState.updateStateOnClick(b,e,g,a)){e=d.twisterVariationsData.getDimensionValuesDisplayData(e);if(g==f.EVENT_TYPE_CLICK||g==f.EVENT_TYPE_DROPDOWN_CHANGE){for(var p=d.twisterState.getCurrentDimCombID().split("_"),h={},m=0,q=d.twisterState.dimensionSelectionData.length;m<q;m++)h[d.twisterState.twisterJSInitData.dimensions[m]]="1"==d.twisterState.dimensionSelectionData[m].isRequired&&"0"==d.twisterState.dimensionSelectionData[m].isSelected&&
"X"===p[m]?"-1":p[m];DetailPage.StateController.setState("selected_variation_values",h)}k("selected",e);k("hovered",e);d.viewHandle.updateView(b,d.twisterState,g);v(b,d.twisterState,g);Twister.disableJsInteractions?g!==f.EVENT_TYPE_CLICK&&g!==f.EVENT_TYPE_DROPDOWN_CHANGE||l.reloadPage(a):l.updatePage(a,g);return!0}}function q(a,b,e,c,g){if(a&&1<d.twisterVariationsData.dimensionsMap.length){d.viewHandle.updateViewAfterTwisterUpdate(e,d.twisterState,g);a=0;try{for(;a<d.externalViews.length;)d.externalViews[a].updateViewAfterTwisterUpdate(e,
d.twisterState,g),a++}catch(h){(new r(externalViewNames[a])).logFatal(h,{message:"[Failed to update external view after twister update from TwisterModel]"})}}}function k(a,b){for(var e={},c="",g=0;g<b.length;g++)c=null,d.twisterState.isDimSelected(g)&&(c=b[g],"(Please Select)"===c&&(c=null)),e[d.viewHandle.dimensionsMap[g]]=c;DetailPage.StateController.setState(a+"_variations",e)}var d=this;d.twisterControllerHandle=a;d.twisterJSInitData=e;d.twisterVariationsData=m;d.pageRefresh=l.page;d.twisterState;
d.externalViews=[];d.externalViewNames=[];d.registerExternalView=function(a,b){try{d.externalViews.push(a),d.externalViewNames.push(b)}catch(e){(new r(b)).logFatal(e,{message:"[Failed to register external view with TwisterModel]"})}};d.prefetch=function(a,b){var e=d.twisterState.getRequestContext(a,!0);l.prefetchPage(e,b)};d.handleMouseOver=function(a){if(!a||d.twisterVariationsData.useMS||!c.isSwatchSelected(a,d.twisterVariationsData)){var b=d.twisterState.getHoverContext(a);d.twisterState.updateStateOnMouseOver(a,
b);var e=d.twisterVariationsData.getDimensionValuesDisplayData(b.newAsin);d.twisterVariationsData.useMS&&(!a||a.dimDisplayType!==f.TWISTER_DIMENSION_VIEW_VODD&&a.dimDisplayType!==f.TWISTER_DIMENSION_VIEW_SHELF&&a.dimDisplayType!==f.TWISTER_DIMENSION_VIEW_COUNTER)||k("hovered",e);DetailPage.StateController.setState("hovered_asin",b.newAsin);this.viewHandle.updateView(a,d.twisterState,f.EVENT_TYPE_MOUSEOVER);v(a,d.twisterState,f.EVENT_TYPE_MOUSEOVER);Twister.disableJsInteractions||l.updatePage(b,f.EVENT_TYPE_MOUSEOVER)}};
d.handleClick=function(a){var b=d.twisterState.getRequestContext(a),e=g(b,a,b.childAsin,f.EVENT_TYPE_CLICK);q(e,b,a,b.childAsin,f.EVENT_TYPE_CLICK)};d.handleMouseOut=function(a){a=d.twisterState.getCurrentContext(a);g(a,null,a.currentAsin,f.EVENT_TYPE_MOUSEOUT)};d.handleDropdownChange=function(a){var b=d.twisterState.getRequestContext(a);g(b,a,b.childAsin,f.EVENT_TYPE_DROPDOWN_CHANGE);q(b,a,b.childAsin,f.EVENT_TYPE_DROPDOWN_CHANGE)};(function(){if(d.twisterJSInitData){d.viewHandle||(d.viewHandle=
d.twisterControllerHandle.twisterView);d.twisterState=d.twisterControllerHandle.initTwisterState;var a=d.twisterState.getCurrentASIN(),a=d.twisterVariationsData.getDimensionValuesDisplayData(a);k("selected",a);k("hovered",a);l.init(e);u.on("dp:twister:prefetch",function(b,a){d.prefetch(b,a)})}})()}});A.when("A","twister-utils","twister-string-constants").register("twister-native-evdd",function(u,k,a){return function(c,f){var l=this,r=u.$,h;l.dimType="evdd";l.dimNameDisplayString;l.dimName;l.dimOrder;
l.isMasterDim=!1;l.updateView=function(a){a=k.getDimStyleData(a.dimCombID,l.dimValuesDisplayData.length,l.dimOrder,l.twisterControllerHandle.twisterAvailabilityCache,l.displayConfigStylesData);var c,f="";r(h).empty();for(var g=0,q=a.length;g<q;g++)if(rowData=a[g],c=rowData.style,"invalid"!==c||l.isMasterDim)c="selected"===c?"selected":"",rowId="#native-"+l.dimName+"_"+g,c='<option id="'+rowId+'" value="'+g+'," '+c+">"+l.dimValuesDisplayData[g]+"</option>",f+=c;r(h).html(f)};l.dimOrder=f[a.STRING_DIM_ORDER];
l.dimName=f[a.STRING_DIM_NAME];l.dimValuesDisplayData=f[a.STRING_DIMENSION_VALUES_DATA];l.isMasterDim=!1;"0"===l.dimOrder&&(l.isMasterDim=!0);l.dimNameDisplayString=f[a.STRING_DIMENSION_DISPLAY_STRING];l.displayConfigStylesData=f[a.STRING_DISPLAY_CONFIG_STYLES_DATA];l.twisterControllerHandle=f[a.STRING_TWISTER_CONTROLLER_HANDLE];h="#evdd-select-"+l.dimName;r(h).change(function(){var a=r(h).val(),a=parseInt(a.split(",")[0]);twisterController.handleClick({dimIndex:l.dimOrder,dimValueIndex:a})})}});
A.when("A","twister-utils","detail-page-state-controller","twister-string-constants").register("twister-state",function(u,k,a,c){return function(f,l,r){function h(b){b.mType===c.MTYPE_PARENT&&b.relatedContext&&(b=b.relatedContext);return b}function e(b,a,d){var e=x.extend(!0,{},b);e.mType=c.MTYPE_MASTER;e.id="m"+d[0];e.relatedContext=b;e.doNotAbort=!0;e.url=m(e,a,[]);e.uniqueID=v(e,[]);return e}function m(b,a,e){var c=d.twisterJSInitData.twisterUpdateURLInfo,g=c.immutableURLPrefix,h=c.immutableParams,
c=c.mutableParams,m=d.twisterJSInitData.contextMetaData[b.mType].mTypeSpecificURLParams,q={};keyItr=0;q=x.extend(!0,{},c,m);if(null!=e)for(var m=0,n=e.length;m<n;m++){var f=e[m];if(!h.hasOwnProperty(f.key)){var r=f.key,l=f.value;q[r]=l;f.isPersistent&&(c[r]=l)}}for(var v in q)null!=q[v]&&(g+="&"+v+"="+q[v]);g+="&asinList="+b.newAsin+"&isFlushing=2&dpEnvironment="+Twister.dpEnvironment+"&id="+b.id+"&mType="+b.mType;a&&(g+="&prefetchRequest=1");return g}function v(b,a){var e="",c=b.mType,g=[],h=x.extend(!0,
{},d.twisterJSInitData.twisterUpdateURLInfo.mutableParams);if(null!=a)for(var m=0,q=a.length;m<q;m++){var n=a[m];h[n.key]=n.value}for(var f in h)h.hasOwnProperty(f)&&g.push(f);g.sort();m=0;for(q=g.length;m<q;m++)n=g[m],null!=n&&null!=h&&(e+=n+"="+h[n]+"&");return e+="mType="+c+"&id="+b.id}function g(b){var a=b[c.STRING_DIM_INDEX],e=b[c.STRING_DIM_VALUE_INDEX];b=d.getCurrentDimCombID().split("_");b[a]=-1===e?"X":e;b=b.join("_");return d.twisterAvailabilityCache.gAsinToRender(b,a)}function q(b,a){var e=
d.getCurrentDimCombID().split("_"),g=e.length,h=d.twisterVariationsData.asinToDimIndexMapData[b],m=-1,q;if(h)h=h.slice(0);else for(h=[],q=0;q<g;q++)h[q]="X";null!==a&&a!==G&&(m=a[c.STRING_DIM_INDEX]);for(var f=0;f<g;f++)(q=d.dimensionSelectionData[f][c.STRING_IS_REQUIRED])&&f!==parseInt(m)&&h[f]!=e[f]&&(h[f]="X",d.sizeSwatch&&0!=d.partialState&&(d.dimensionSelectionData[f][c.STRING_IS_SELECTED]=0)),-1!==parseInt(m)&&-1===parseInt(a[c.STRING_DIM_VALUE_INDEX])&&(h[m]="X");return h.join("_")}function y(b,
a){for(var e=b.split("_"),g=0;g<d.dimensionSelectionData.length;g++)1===d.dimensionSelectionData[g][c.STRING_IS_REQUIRED]&&0!==a&&(e[g]="X");return e.join("_")}var d=this,x=u.$;d.twisterJSInitData=f;d.twisterVariationsData=l;d.twisterAvailabilityCache=r;d.parentASIN="";d.currentASIN="";d.dimensionSelectionData={};d.unselectedDimCount=-1;d.master="";d.currentDimCombID="";d.preHoverClass="";d.hoveredReactId="";d.hoveredAsin="";d.hoveredDimCombID="";d.partialState="";d.previousPartialState="";d.previousReactId=
"";d.previousAsin="";d.sizeSwatch=!1;d.setMaster=function(b){d.master=b};d.getMaster=function(){return d.master};d.getCurrentASIN=function(){return d.currentASIN};d.setCurrentASIN=function(b){b&&(d.currentASIN=b)};d.getCurrentDimCombID=function(){return d.currentDimCombID};d.setCurrentDimCombID=function(b){b&&(d.currentDimCombID=b)};d.isDimSelected=function(b){return 1===d.dimensionSelectionData[b][c.STRING_IS_SELECTED]};d.setPreHoverData=function(b){d.useMS||(d.preHoverClass=k.getAttachedClass(b,
d.twisterVariationsData.dimensionsMap[b[c.STRING_DIM_INDEX]]))};d.updateStateOnMouseOver=function(b,a){var e,p;b&&"0"===b[c.STRING_DIM_INDEX]&&d.setMaster(b[c.STRING_DIM_VALUE_INDEX]);e=a&&a.childAsin||g(b);p=d.unselectedDimCount;if(""===e){if(0>=p)return;e=d.getCurrentASIN()}d.hoveredAsin=e;e=a&&a.newDimCombID||q(d.hoveredAsin,b);d.hoveredDimCombID=e;p=0<=e.search(/X/)?1:0;e=a&&a.reactID||y(e,p);d.hoveredReactId=e;d.setPreHoverData(b)};d.updateStateOnClick=function(b,a,e,p){var h=-1,m=-1;d.previousAsin=
d.getCurrentASIN();a=a||p&&p.childAsin||g(b);b&&b[c.STRING_DIM_INDEX]&&"0"===b[c.STRING_DIM_INDEX]&&d.setMaster(b[c.STRING_DIM_VALUE_INDEX]);h=d.unselectedDimCount;d.previousPartialState=h;if(""===a){if(0>=h)return!1;a=d.getCurrentASIN()}h=p&&p.newDimCombID||q(a,b);if(c.EVENT_TYPE_CLICK===e||c.EVENT_TYPE_DROPDOWN_CHANGE===e){var f=b[c.STRING_DIM_INDEX];e="undefined"!==typeof d.preHoverClass&&(-1!==d.preHoverClass.indexOf(c.CLASS_FOR_SWATCH_UNAVAILABLE)||-1!==d.preHoverClass.indexOf(c.CLASS_FOR_DROPDOWN_UNAVAILABLE));
var r=h.split("_"),m=d.currentDimCombID.split("_");r[f]="*";m[f]="*";f=r.join("_");m=m.join("_");f!=m&&(e=!0);if(e||-1===b[c.STRING_DIM_VALUE_INDEX])for(var m=h.split("_"),r=0,n=d.dimensionSelectionData.length;r<n;r++)f=d.dimensionSelectionData[r],"X"===m[r]&&1===f[c.STRING_IS_SELECTED]&&(f[c.STRING_IS_SELECTED]=0,d.unselectedDimCount++);DetailPage.StateController.setState("isUnavailableInOldDimCombId",e?"true":"false");e=b[c.STRING_DIM_INDEX];null!==b&&b!==G&&(e=d.dimensionSelectionData[e],0===e[c.STRING_IS_SELECTED]&&
-1!==parseInt(b[c.STRING_DIM_VALUE_INDEX])&&(e[c.STRING_IS_SELECTED]=1,d.unselectedDimCount--,0>d.unselectedDimCount&&(d.unselectedDimCount=0)));m=d.unselectedDimCount;d.previousReactId=d.reactId}else m=0<=h.search(/X/)?1:0,d.previousReactId=d.hoveredReactId;b=p&&p.reactID||y(h,m);d.partialState=m;d.setCurrentASIN(a);d.setCurrentDimCombID(h);d.reactId=b;DetailPage.StateController.setState("current_asin",d.getCurrentASIN());DetailPage.StateController.setState("currentDimCombID",d.getCurrentDimCombID());
DetailPage.StateController.setState("reactId",d.reactId);DetailPage.StateController.setState("dimensionSelectionData",d.dimensionSelectionData);return!0};d.getCurrentContext=function(){var b=d.getRequestContext();return h(b)};d.getHoverContext=function(b){b=d.getRequestContext(b);return h(b)};d.getRequestContext=function(b,a){var h=d.getCurrentASIN(),p=d.parentASIN,f;f=b&&g(b)||h;var r=d.getCurrentDimCombID(),l=q(f,b),k=0<=r.search(/X/)?1:0,n=0<=l.search(/X/)?c.MTYPE_PARTIAL:c.MTYPE_FULL;k||n!==c.MTYPE_PARTIAL||
(n=c.MTYPE_PARENT);var k=n!==c.MTYPE_FULL?1:0,z=y(l,k),h={divMetaData:b,currentAsin:h,newAsin:f,childAsin:f,currentDimCombID:r,newDimCombID:l,reactID:z,partialState:k,mType:n,id:0<=z.search(/X/)?z:f};if(d.useMS&&f){if(p=d.twisterVariationsData.asinToDimIndexMapData[f])h.relatedContext=e(h,a,p),h.doNotAbort=!0}else n===c.MTYPE_PARENT&&(f=x.extend(!0,{},h),f.mType=c.MTYPE_PARTIAL,f.relatedContext=h,f.url=m(f,a,[]),f.doNotAbort=!0,f.uniqueID=v(f,[]),h.relatedContext=f,h.id=p,h.newAsin=p,h.doNotAbort=
!0);h.url=m(h,a,[]);h.uniqueID=v(h,[]);return h};d.getRequestContextForExternalTwisterUpdates=function(b){var a=d.getCurrentASIN(),g=d.getCurrentDimCombID();g.search(/X/);var p=0<=g.search(/X/)?c.MTYPE_PARTIAL:c.MTYPE_FULL,h=p!==c.MTYPE_FULL?1:0,q=y(g,h),g={divMetaData:{},currentAsin:a,newAsin:a,childAsin:a,currentDimCombID:g,newDimCombID:g,reactID:q,partialState:h,mType:p,id:0<=q.search(/X/)?q:a};d.useMS&&a&&(a=d.twisterVariationsData.asinToDimIndexMapData[a])&&(g.relatedContext=e(g,0,a),g.doNotAbort=
!0);g.url=m(g,0,b);g.uniqueID=v(g,b);return g};(function(){var b=d.twisterJSInitData,e=b.keysToPopulateDetailPageStateController,g;if(b){DetailPage.StateController=new a;for(var p=0,h=e.length;p<h;p++)g=e[p],DetailPage.StateController.setState(g,b[g]);DetailPage.StateController.setState("variation_display_labels",b[c.INIT_DATA_VARIATIONS_DISPLAY_LABELS]);DetailPage.StateController.setState("variation_label_order",b[c.INIT_DATA_DIMENSIONS_MAP]);d.currentASIN=b.current_asin;d.parentASIN=b.parent_asin;
d.dimensionSelectionData=b.dimensionSelectionData;d.unselectedDimCount=b.unselectedDimCount;d.currentDimCombID=b.currentDimCombID;d.reactId=b.reactId;d.storeID=b.storeId;d.productGroupID=b.productGroupId;d.useMS=b[c.STRING_USE_MS];d.useMS&&d.currentASIN&&d.twisterVariationsData.asinToDimIndexMapData[d.currentASIN]&&d.setMaster(d.twisterVariationsData.asinToDimIndexMapData[d.currentASIN][0]);x("#sizeSwatch").length&&(d.sizeSwatch=!0)}})()}});A.when("A","twister-string-constants").register("twister-variations-data",
function(u,k){return function(a){var c=this;c.twisterJSInitData=a;c.dimensionValuesDisplay={};c.deletedLandingAsinInfo;c.dimToAsinMapData;c.dimensionValuesData;c.asinToDimIndexMapData;c.dimensionsDisplayType;c.displayConfigStylesData;c.useMS;c.hoverMS;c.dimensionsMap;c.getDimensionValuesDisplayData=function(a){var l=c.dimensionValuesDisplay[a];l||a!=c.deletedLandingAsinInfo.asin||(l=c.deletedLandingAsinInfo.dimValues);return l};(function(){var a=c.twisterJSInitData;c.dimensionsMap=a[k.INIT_DATA_DIMENSIONS_MAP];
c.dimensionValuesDisplay=a[k.INIT_DATA_DIMENSION_VALUES_DISPLAY_DATA];c.deletedLandingAsinInfo=a[k.INIT_DATA_DELETED_LANDING_ASIN_INFO];c.dimToAsinMapData=a[k.INIT_DATA_DIM_TO_ASIN_MAP];c.asinToDimIndexMapData=a[k.INIT_DATA_ASIN_TO_DIM_INDEX_MAP];c.dimensionsDisplayType=a[k.INIT_DATA_DIMENSIONS_DISPLAY_TYPE_MAP];c.dimensionValuesData=a[k.STRING_DIMENSION_VALUES_DATA];c.displayConfigStylesData=a[k.STRING_DISPLAY_CONFIG_STYLES_DATA];c.useMS=a[k.STRING_USE_MS];c.hoverMS=a[k.STRING_HOVER_MS]})()}});A.when("A",
"twister-dimension-view-factory","twister-string-constants").register("twister-view",function(u,k,a){return function(c,f,l,r,h){function e(e,c,h,d,m){var b={},w={};b[a.STRING_EVENT_TYPE]=e;b[a.STRING_DIM_COMB_ID]=c;w[a.STRING_EVENT_DIV_METADATA]=h;w[a.STRING_EVENT_DIM_INFO]=d;w[a.STRING_DIMENSION_SELECTION_DATA]=m;b[a.STRING_EVENT_DATA]=w;return b}var m=this,v=u.$;m.twisterControllerHandle=c;m.twisterJSInitData=l;m.twisterVariationsData=r;m.twisterAvailabilityCache=h;m.dimensionsMap={};m.dimensionDisplayMap=
{};m.dimensionDisplayTypeMap={};m.dimensionViewHandlersMap={};m.updateView=function(c,h,f){var d={},r,b=h.dimensionSelectionData;f===a.EVENT_TYPE_MOUSEOVER?(r=h.hoveredAsin,h=h.hoveredDimCombID):(r=h.getCurrentASIN(),h=h.getCurrentDimCombID());d[a.STRING_DIMENSION_VALUES_DATA]=m.twisterVariationsData.getDimensionValuesDisplayData(r);d[a.STRING_DIMENSION_DISPLAY_MAP]=m.dimensionDisplayMap;d[a.STRING_DIMENSIONS_MAP]=m.dimensionsMap;c=e(f,h,c,d,b);f=0;for(d=m.dimensionsMap.length;f<d;f++)m.dimensionViewHandlersMap[f].updateView(c)};
m.updateViewAfterTwisterUpdate=function(c,h,f){var d={},r=h.dimensionSelectionData;h.getCurrentASIN();h=h.getCurrentDimCombID();d[a.STRING_DIMENSION_DISPLAY_MAP]=m.dimensionDisplayMap;d[a.STRING_DIMENSIONS_MAP]=m.dimensionsMap;c=e(f,h,c,d,r);if(f===a.EVENT_TYPE_DROPDOWN_CHANGE||f===a.EVENT_TYPE_CLICK)for(f=0,d=m.dimensionsMap.length;f<d;f++)m.dimensionViewHandlersMap[f].updateViewAfterTwisterUpdate&&m.dimensionViewHandlersMap[f].updateViewAfterTwisterUpdate(c)};(function(e){var c=m.twisterJSInitData,
h=c[a.INIT_DATA_DIMENSIONS_MAP].length,d=[],f=[],b=[],w=0;for(index=0;index<h;index++)c[a.INIT_DATA_DIMENSIONS_DISPLAY_TYPE_MAP][index]!==a.HIDDEN_DIMENSION_DISPLAY_TYPE&&(d[w]=c[a.INIT_DATA_DIMENSIONS_MAP][index],f[w]=c[a.INIT_DATA_DIMENSIONS_DISPLAY][index],b[w]=c[a.INIT_DATA_DIMENSIONS_DISPLAY_TYPE_MAP][index],w++);m.dimensionsMap=d;m.dimensionDisplayMap=f;m.dimensionDisplayTypeMap=b;h=0;for(d=m.dimensionsMap.length;h<d;h++)c=k.getDimensionSubViewObject(m.twisterJSInitData,m.twisterVariationsData,
h.toString(10),m.twisterControllerHandle,e),m.dimensionViewHandlersMap[h]=c;v(a.CLASS_FOR_NON_JS_EVDD).hide();v(a.CLASS_FOR_NEW_TWISTER_EVDD).show();m.updateView({},m.twisterControllerHandle.initTwisterState,a.EVENT_TYPE_CLICK)})(f)}});A.when("A","a-dropdown","twister-thumbnailModule","twister-utils","twister-string-constants").register("twister-dimension-views-dropdown",function(u,k,a,c,f){return function(l,r){function h(){var a=f.DROPDOWN_DIV_NAME+e.dimName,c={},h;c[f.STRING_DIM_INDEX]=e.dimOrder;
h=function(a){e.twisterControllerHandle&&e.twisterControllerHandle.handleDropdownOnChange(a,c)};A.when("A").execute(function(e){e.on(f.AUI_DROPDOWN_EVENT_PREFIX+a,h)})}var e=this,m=u.$;e.dimType="dropdown";e.AuiDropdownHandle=k;e.thumbnailHandle=a;e.dimName;e.dimOrder;e.dimStyleData;e.dimensionsMap;e.dimNameDisplayString;e.dimValuesDisplayData;e.twisterControllerHandle;e.isTablet;e.updateView=function(a){switch(a[f.STRING_EVENT_TYPE]){case f.EVENT_TYPE_MOUSEOUT:case f.EVENT_TYPE_DROPDOWN_CHANGE:case f.EVENT_TYPE_CLICK:var g,
h,r,d;h=f.ID_SELECTOR+e.dimName+f.CHAR_UNDERSCORE+f.INDEX_FOR_SELECT_OPTION;var l=f.NATIVE_DROPDOWN_DIV_PREFIX+f.DROPDOWN_DIV_NAME+e.dimName,b=m(l).val().split(",")[0],w=a[f.STRING_EVENT_TYPE],B=a[f.STRING_EVENT_DATA][f.STRING_DIMENSION_SELECTION_DATA];a=c.getDimStyleData(a.dimCombID,e.dimValuesDisplayData.length,e.dimOrder,e.twisterControllerHandle.twisterAvailabilityCache,e.displayConfigStylesData);0===B[e.dimOrder][f.STRING_IS_SELECTED]&&b!==f.INDEX_FOR_SELECT_OPTION&&"undefined"!==typeof e.AuiDropdownHandle&&
e.AuiDropdownHandle.getSelect(l).val("-1");w!==f.EVENT_TYPE_CLICK&&w!==f.EVENT_TYPE_DROPDOWN_CHANGE||0!==B[e.dimOrder][f.STRING_IS_REQUIRED]||1!==B[e.dimOrder][f.STRING_IS_SELECTED]||m(h).remove();b=0;for(B=a.length;b<B;b++)if(g=a[b],h=f.NATIVE_DROPDOWN_DIV_PREFIX+e.dimName+f.CHAR_UNDERSCORE+b,g=g[f.STRING_STYLE],r=m(h).get(0).className,g===f.CLASS_NAME_FOR_SELCTED_DROPDOWN_OPTION&&(d=m(h).attr("value"),m(l).val()!==d&&e.AuiDropdownHandle.getSelect(l).val(d)),r!==g)try{r={},r[f.STRING_CSS_CLASS]=
g,r[f.STRING_NATIVE_CSS_CLASS]=g,e.AuiDropdownHandle.updateOption(h,r)}catch(p){}e.isTablet&&(w===f.EVENT_TYPE_CLICK||w===f.EVENT_TYPE_DROPDOWN_CHANGE)&&e.thumbnailHandle&&e.thumbnailHandle.update(e.dimName)}};(function(){var a;e.dimOrder=r[f.STRING_DIM_ORDER];e.dimName=r[f.STRING_DIM_NAME];e.dimensionsMap=r[f.STRING_DIMENSIONS_MAP];e.dimNameDisplayString=r[f.STRING_DIMENSION_DISPLAY_STRING];e.dimValuesDisplayData=r[f.STRING_DIMENSION_VALUES_DATA];e.twisterControllerHandle=r[f.STRING_TWISTER_CONTROLLER_HANDLE];
e.displayConfigStylesData=r[f.STRING_DISPLAY_CONFIG_STYLES_DATA];e.initialTwisterState=r[f.STRING_TWISTER_INITIAL_STATE_KEY];e.isTablet=l.isTablet;a=e.initialTwisterState.getCurrentDimCombID();e.dimStyleData=c.getDimStyleData(a,e.dimValuesDisplayData.length,e.dimOrder,e.twisterControllerHandle.twisterAvailabilityCache,e.displayConfigStylesData);h();if(e.isTablet)for(var g=0,m=e.dimensionsMap.length;g<m;g++)a=e.dimensionsMap[g],e.thumbnailHandle.attach(a),e.thumbnailHandle.preloadAllThumbnails(a)})()}});
A.when("A").register("twister-dimension-views-singleton",function(u){return function(k,a){this.updateView=function(a){}}});A.when("A","twister-dimension-views-unavailablePopover","twister-utils","twister-string-constants","aui-style-override","twister-dimension-views-ingress","twister-logger","twister-modal-resize-helper").register("twister-dimension-views-swatch",function(u,k,a,c,f,l,r,h){return function(e,m){function v(){u.declarative(Twister.isImmersiveExperience?c.AUI_EVENT_FOR_SWATCHTHUMB+"-"+
p.dimOrder:c.AUI_EVENT_FOR_SWATCHTHUMB,[c.EVENT_TYPE_CLICK,c.EVENT_TYPE_MOUSEENTER,c.EVENT_TYPE_MOUSELEAVE,c.EVENT_TYPE_MOUSEDOWN,c.EVENT_TYPE_TOUCHSTART],function(b){b.type===c.EVENT_TYPE_CLICK?p.twisterControllerHandle&&(p.twisterControllerHandle.handleClick(b.data),d(b)):b.type===c.EVENT_TYPE_MOUSEENTER?p.twisterControllerHandle&&p.twisterControllerHandle.handleMouseOver(b.data):b.type===c.EVENT_TYPE_MOUSELEAVE?p.twisterControllerHandle&&p.twisterControllerHandle.handleMouseOut(b.data,b.data[c.STRING_DIM_INDEX],
b.data[c.STRING_DIM_VALUE_INDEX]):!p.newPrefetchWeblab||b.type!==c.EVENT_TYPE_MOUSEDOWN&&b.type!==c.EVENT_TYPE_TOUCHSTART||p.twisterControllerHandle&&p.twisterControllerHandle.handleClickPrediction(b.data,"T1"===p.newPrefetchWeblab?c.YES:c.NO)})}function g(b,a){var d=DetailPage.StateController.getState().selected_variations,e=DetailPage.StateController.getState()[c.STRING_DIMENSION_SELECTION_DATA],g;p.twisterIngressHandle&&(g=p.twisterIngressHandle.modalHandle.twisterModalDiv);if(a)t("#variation_"+
p.dimName+" .selection").html(b).addClass("hover"),g&&0<g.length&&t("#"+c.TWISTER_MODAL_ID_PREFIX+p.dimName+" .selection").html(b).addClass("hover");else{var h=t("#variation_"+p.dimName+" .selection"),m=t("#"+c.TWISTER_MODAL_ID_PREFIX+p.dimName+" .selection");if(p.sizeSwatch){var w="";y(e,p.dimOrder)&&""===b||(null==d[p.dimName]?q(e,p.dimOrder)&&(w=b):w=d[p.dimName]);h.html(w).removeClass("hover");g&&0<g.length&&m.html(d[p.dimName]).removeClass("hover")}else t("#variation_"+p.dimName+" .selection").html(b).removeClass("hover"),
g&&0<g.length&&t("#"+c.TWISTER_MODAL_ID_PREFIX+p.dimName+" .selection").html(b).removeClass("hover")}}function q(b,a){var d=!1;1==b[a][c.STRING_IS_SELECTED]&&(d=!0);return d}function y(b,a){var d=!1;1==b[a][c.STRING_IS_REQUIRED]&&(d=!0);return d}function d(b,a){if(p.twisterIngressHandle){p.twisterIngressHandle.modalHandle.isModalOpen&&p.logger.logImpression(p.logger.eventTypes.IMMERSIVE_SWATCH_CLICK,null);var d=p.twisterIngressHandle.modalHandle.twisterModalDiv,e=a===G?t(b.$target).parents().closest("li"):
a,g=e.attr("id"),h=t("#"+g);d.has(e)&&0===g.indexOf(c.MODAL_SWATCH_PREFIX)&&(d=p.finalLimitForSwatches-1-1,e=t("#variation_"+p.dimName+" > ul > li"),h.index()>d&&(t(e.get(p.finalLimitForSwatches-1)).remove(),g=g.replace(c.MODAL_SWATCH_PREFIX,""),t(h.clone().attr("id",g)).insertAfter(e.get(d))),p.twisterIngressHandle&&p.twisterIngressHandle.modalHandle.isModalOpen&&p.twisterIngressHandle.modalHandle.closeTwisterModal());p.$swatches=t(p.swatchWrapper);p.twisterIngressHandle.modalHandle.$swatches=t(p.twisterIngressHandle.modalHandle.swatchWrapper)}}
function x(b){var a=Twister.isImmersiveExperience?t("."+c.TWISTER_SWATCH_CLASS_PREFIX+p.dimName+c.CHAR_UNDERSCORE+b):t(c.ID_SELECTOR+p.dimName+c.CHAR_UNDERSCORE+b);b=[];var d;if(0<a.length){b=a.get(0).className.split(" ");for(var a=0,e=b.length;a<e;a++){var g=b[a];if(0===g.indexOf("swatch")){d=g;break}}}return d}function b(b,a,d){b=Twister.isImmersiveExperience?t("."+c.TWISTER_SWATCH_CLASS_PREFIX+p.dimName+c.CHAR_UNDERSCORE+b):t(c.ID_SELECTOR+p.dimName+c.CHAR_UNDERSCORE+b);a!==d&&t(b).removeClass(a).addClass(d);
f.doOverride(d,b)}function w(b,a){var d=Twister.isImmersiveExperience?t("."+c.TWISTER_SWATCH_CLASS_PREFIX+p.dimName+c.CHAR_UNDERSCORE+b+" ."+c.PRICE_SLOT_CLASS_NAME):t(c.ID_SELECTOR+p.dimName+c.CHAR_UNDERSCORE+b+"_price"),e=c.CLASS_FOR_PRICE_SECONDARY;if(a===c.CLASS_FOR_SWATCH_SELECT||a===c.CLASS_FOR_SWATCH_UNAVAILABLE_HOVER||a===c.CLASS_FOR_SWATCH_HOVER)e=c.CLASS_FOR_PRICE_SELECTED;d.length&&d.removeClass(c.CLASS_FOR_PRICE_SECONDARY+" "+c.CLASS_FOR_PRICE_SELECTED).addClass(e)}function B(b){var d=
{};d.asinList=b;t("#"+c.TWISTER_FEATURE_DIV_ID).css("opacity",p.twisterDimmedOpacity);d.dimTriggeringDimSum=p.dimName;d.dimType=p.dimType;d.dimSubType=p.dimSubType;d.dimCombId=DetailPage.StateController.getState().currentDimCombID;d.executeChunk=function(){var b=DetailPage.StateController.getState().currentDimCombID,e=b.split("_"),c=d.dimCombId.split("_");if(d.dimCombId===b)return!0;if(!a.isPartialState(p.dimensionsMap.length)){for(var b=p.dimensionsMap.length,g=!0,h=0;h<b;h++)if(h!==parseInt(p.dimOrder)&&
c[h]!==e[h]){g=!1;break}return g}return!1};d.chunk=function(b){for(var a=t(".twister_"+p.dimName+"_"+p.twisterJSInitData.asin_variation_values[b.ASIN][p.dimName]+" .twisterSlotDiv"),d="",e=0;b.Value.content.twisterSlotDiv[e];)"IMAGE"===p.dimSubType&&(d+="<div>"),d+=b.Value.content.twisterSlotDiv[e],"IMAGE"===p.dimSubType&&(d+="</div>"),e++;a.html(d)};d.success=function(b,a,d,e){p.resizeHelperHandle.fixSize(p.$swatches,p.swatchWrapper,p.swatchDynaWrapper,p.ingressWrapper);t("#"+c.TWISTER_FEATURE_DIV_ID).css("opacity",
1)};d.error=function(){p.resizeHelperHandle.fixSize(p.$swatches,p.swatchWrapper,p.swatchDynaWrapper,p.ingressWrapper);t("#"+c.TWISTER_FEATURE_DIV_ID).css("opacity",1)};d.abort=function(){p.resizeHelperHandle.fixSize(p.$swatches,p.swatchWrapper,p.swatchDynaWrapper,p.ingressWrapper);t("#"+c.TWISTER_FEATURE_DIV_ID).css("opacity",1)};Twister.dimensionalSummaryModule.fetchDimSumData(d)}var p=this,t=u.$;p.dimType="swatch";p.dimSubType="";p.dimName;p.dimOrder;p.dimData;p.dimensionsMap;p.dimNameDisplayString;
p.dimValuesDisplayData;p.twisterControllerHandle;p.maxSwatchLimitForImmersive;p.finalLimitForSwatches;p.twisterIngressHandle;p.twisterJSInitData=e;p.newPrefetchWeblab=!1;p.resizeHelperHandle;p.landingDimCombId;if(Twister.multiDimensionWeblabEnabled)var F="ImmersiveMultiDimensionView";else Twister.isImmersiveExperience&&(F="ImmersiveSwatchSingleDimensionView");p.logger=F!==G?new r(t,this,F):new r(t,this);p.logger.init();p.sizeSwatch=!1;p.updateView=function(d){if(d[c.STRING_EVENT_TYPE]===c.EVENT_TYPE_MOUSEOVER){var e,
h,m,f,r=d[c.STRING_EVENT_DATA],l=r[c.STRING_EVENT_DIM_INFO][c.STRING_DIMENSION_VALUES_DATA][p.dimOrder],r=r[c.STRING_EVENT_DIV_METADATA];if(p.dimOrder==r[c.STRING_DIM_INDEX]){var B=x(r[c.STRING_DIM_VALUE_INDEX]),v=a.getDimStyleData(d.dimCombID,p.dimValuesDisplayData.length,p.dimOrder,p.twisterControllerHandle.twisterAvailabilityCache,p.displayConfigStylesData);e=p.twisterIngressHandle&&p.twisterIngressHandle.modalHandle.isModalOpen?c.MODAL_SWATCH_PREFIX+p.dimName+"_"+r.dimValueIndex:p.dimName+"_"+
r.dimValueIndex;h=p.twisterJSInitData;m={};m.hidePopover=h.hidePopover;m.unavailablePopOverStringValue=h.unavailablePopOverStringValue;m.showDimSecondUnavailablePopover=h.showDimSecondUnavailablePopover;parseInt(r[c.STRING_DIM_INDEX])===parseInt(p.dimOrder)&&(B!==c.CLASS_FOR_SWATCH_UNAVAILABLE||p.twisterJSInitData[c.STRING_HIDE_POPOVER]||k.triggerPopover(d,m,e));t(c.ID_SELECTOR+c.TWISTER_POPOVER).css("z-index","2000");g(l,!0);B===c.CLASS_FOR_SWATCH_UNAVAILABLE&&p.logger.logImpression(p.logger.eventTypes.UNAVAILABLE_SWATCH_HOVER,
null);d=0;for(l=v.length;d<l;d++)e=v[d],e=e[c.STRING_STYLE],h=x(d),m=h===c.CLASS_FOR_SWATCH_SELECT?!0:!1,f=parseInt(r[c.STRING_DIM_INDEX])===parseInt(p.dimOrder)&&parseInt(r[c.STRING_DIM_VALUE_INDEX])===parseInt(d)?!0:!1,m||B===c.CLASS_FOR_SWATCH_UNAVAILABLE&&!f||(e===c.CLASS_FOR_SWATCH_SELECT&&(e=h===c.CLASS_FOR_SWATCH_UNAVAILABLE?c.CLASS_FOR_SWATCH_UNAVAILABLE_HOVER:c.CLASS_FOR_SWATCH_HOVER,w(d,e)),b(d,h,e))}}else for(eventData=d[c.STRING_EVENT_DATA],eventDimInfo=eventData[c.STRING_EVENT_DIM_INFO],
dimensionValueDisplay=eventDimInfo[c.STRING_DIMENSION_VALUES_DATA][p.dimOrder],divMetaData=eventData[c.STRING_EVENT_DIV_METADATA],dimensionSelectionData=eventData[c.STRING_DIMENSION_SELECTION_DATA],dimCombID=d.dimCombID,dimDataForThisInteraction=a.getDimStyleData(dimCombID,p.dimValuesDisplayData.length,p.dimOrder,p.twisterControllerHandle.twisterAvailabilityCache,p.displayConfigStylesData),p.sizeSwatch?(B=dimCombID.split("_")[0],r=y(dimensionSelectionData,p.dimOrder),v=q(dimensionSelectionData,p.dimOrder),
"X"==B&&r&&v||g(dimensionValueDisplay,!1)):g(dimensionValueDisplay,!1),l=0,e=dimDataForThisInteraction.length;l<e;l++)B=dimDataForThisInteraction[l],v=B[c.STRING_STYLE],0===dimensionSelectionData[p.dimOrder][c.STRING_IS_SELECTED]&&v===c.CLASS_FOR_SWATCH_SELECT&&(v=c.CLASS_FOR_SWATCH_AVAILABLE),d=x(l),p.sizeSwatch&&(r=y(dimensionSelectionData,p.dimOrder),h=!q(dimensionSelectionData,p.dimOrder),d==c.CLASS_FOR_SWATCH_SELECT&&B[c.STRING_STYLE]==c.CLASS_FOR_SWATCH_SELECT&&r&&h&&(v=B[c.STRING_STYLE])),
d&&(p.sizeSwatch&&(r=y(dimensionSelectionData,p.dimOrder),d!=c.CLASS_FOR_SWATCH_SELECT&&d!=c.CLASS_FOR_SWATCH_HOVER||!r||v!=c.CLASS_FOR_SWATCH_UNAVAILABLE||g("",!1)),d=x(l),b(l,d,v),w(l,v))};p.updateViewAfterTwisterUpdate=function(b){var g=b[c.STRING_EVENT_DATA][c.STRING_EVENT_DIV_METADATA];b=DetailPage.StateController.getState().currentDimCombID.split("_");if(Twister.multiDimensionWeblabEnabled){var h=t(c.ID_SELECTOR+c.MODAL_SWATCH_PREFIX+p.dimName+"_"+b[p.dimOrder]);d(G,h);if(p.isSlotsEnabled)if(a.isPartialState(p.dimensionsMap.length))b=
t(" .twisterSwatchWrapper_"+p.dimOrder+" .twisterSlotDiv"),"none"!==b.css("display")&&(document.getElementById("twisterSwatchWrapperDynaStyle_"+p.dimOrder).innerHTML=".twisterSwatchWrapper_"+p.dimOrder+" {min-width:100%;min-height:100%;}",b.css("display","none"),p.resizeHelperHandle.fixSize(p.$swatches,p.swatchWrapper,p.swatchDynaWrapper,p.ingressWrapper)),Twister.immersiveBannersPresent&&(b=a.getImmersivePartialStateBannerContent(e,parseInt(p.dimOrder)),g=t("#twisterImmersiveGlanceBanner"),g.html(b),
g.removeClass("twisterImmersiveBannerHide"),t("#twisterImmersiveModalBanner").html(b));else if(g[c.STRING_DIM_INDEX]!=p.dimOrder||"true"===DetailPage.StateController.getState().isUnavailableInOldDimCombId){for(var h=t(c.ID_SELECTOR+"variation_"+p.dimName+" > ul > li"),g=[],m=p.twisterJSInitData.dimensionValuesData[p.dimOrder].length,w=p.isImmersiveViewEnabled?p.finalLimitForSwatches:m,f=0;f<m;f++)t("."+c.TWISTER_SWATCH_CLASS_PREFIX+p.dimName+"_"+f+" ."+c.CLASSNAME_FOR_SWATCH+"_"+p.dimOrder).css("min-width",
"");t(c.ID_SELECTOR+c.TWISTER_INGRESS_ID_PREFIX+p.dimName+" ."+c.CLASSNAME_FOR_SWATCH+"_"+p.dimOrder).css("min-width","");t("."+c.CLASSNAME_FOR_INGRESS+"_"+p.dimOrder).css("min-width","");t(c.ID_SELECTOR+c.TWISTER_INGRESS_ID_PREFIX+p.dimName+" ."+c.CLASSNAME_FOR_SWATCH+"_"+p.dimOrder).css("min-height","");for(m=0;m<w;m++){var f=t(h.get(m)).find(".a-declarative"),q=f.attr("data-action"),f=JSON.parse(f.attr("data-"+q)).dimValueIndex;b[p.dimOrder]=f;var r=b.join("_"),q=t("."+c.TWISTER_SWATCH_CLASS_PREFIX+
p.dimName+"_"+f+" .twisterSlotDiv");q.css("display","");(r=p.twisterJSInitData[c.INIT_DATA_DIM_TO_ASIN_MAP][r])?(g.push(r),q.html("<div class='loadingSlot_0' style='width: 40px; margin : 5px 0px 5px 5px; height : 7px'></div><div class='loadingSlot_1'      style='width: 30px; margin : 5px 0px 0px 5px; height : 7px'></div>")):t("."+c.TWISTER_SWATCH_CLASS_PREFIX+p.dimName+"_"+f+" .twisterSlotDiv").html("<span class='a-color-tertiary'>- -</span>")}t(c.ID_SELECTOR+c.TWISTER_MODAL_ID_PREFIX+p.dimName+" .swatches li").invalidateAppearedAlreadyCache();
m=p.twisterJSInitData.dimensionValuesData[p.dimOrder].length;for(f=0;f<m;f++)b=t(c.ID_SELECTOR+c.TWISTER_MODAL_ID_PREFIX+p.dimName+" ."+c.TWISTER_SWATCH_CLASS_PREFIX+p.dimName+"_"+f+" .twisterSlotDiv"),b.css("display",""),b.html("<div class='loadingSlot_0' style='width: 40px; margin : 5px 0px 5px 5px; height : 7px'></div><div class='loadingSlot_1' style='width: 30px;  margin : 5px 0px 0px 5px; height : 7px'></div>");0<g.length?B(g):p.resizeHelperHandle.fixSize(p.$swatches,p.swatchWrapper,p.swatchDynaWrapper,
p.ingressWrapper);Twister.immersiveBannersPresent&&(t("#twisterImmersiveGlanceBanner").addClass("twisterImmersiveBannerHide"),b=a.getImmersiveFullStateBannerContent(e,parseInt(p.dimOrder)),t("#twisterImmersiveModalBanner").html(b))}}};(function(){p.isImmersiveViewEnabled=m.isImmersiveViewEnabled;p.isSlotsEnabled=m.isSlotsEnabled;p.newPrefetchWeblab=p.twisterJSInitData.newPrefetchWeblab;p.dimOrder=m[c.STRING_DIM_ORDER];p.dimName=m[c.STRING_DIM_NAME];p.dimensionsMap=m[c.STRING_DIMENSIONS_MAP];p.dimNameDisplayString=
m[c.STRING_DIMENSION_DISPLAY_STRING];p.dimValuesDisplayData=m[c.STRING_DIMENSION_VALUES_DATA];p.displayConfigStylesData=m[c.STRING_DISPLAY_CONFIG_STYLES_DATA];p.twisterControllerHandle=m[c.STRING_TWISTER_CONTROLLER_HANDLE];p.initialTwisterState=m[c.STRING_TWISTER_INITIAL_STATE_KEY];currDimCombID=p.initialTwisterState.getCurrentDimCombID();p.dimData=a.getDimStyleData(currDimCombID,p.dimValuesDisplayData.length,p.dimOrder,p.twisterControllerHandle.twisterAvailabilityCache,p.displayConfigStylesData);
p.maxSwatchLimitForImmersive=m[c.STRING_MAX_SWATCHES_IMMERSIVE_VIEW];p.dimSubType=m.dimensionDisplaySubType;p.finalLimitForSwatches=p.maxSwatchLimitForImmersive-1;v();for(var d,e,g=0,f=p.dimData.length;g<f;g++)if(d=p.dimData[g],e=x(g))d=d[c.STRING_STYLE],b(g,e,d),w(g,d);0<t("#twister_ingress_"+p.dimName).length&&(e={},e.dimName=p.dimName,e.dimOrder=p.dimOrder,e.dimData=p.dimData,e.dimensionsMap=p.dimensionsMap,e.dimNameDisplayString=p.dimNameDisplayString,e.dimValuesDisplayData=p.dimValuesDisplayData,
e.maxSwatchLimitForImmersive=p.maxSwatchLimitForImmersive,e.dimSubType=p.dimSubType,e.isSlotsEnabled=p.isSlotsEnabled,p.twisterIngressHandle=new l(e,p.twisterJSInitData));p.resizeHelperHandle=new h;p.swatchWrapper=".twisterSwatchWrapper_"+p.dimOrder;p.swatchDynaWrapper="twisterSwatchWrapperDynaStyle_"+p.dimOrder;p.$swatches=t(p.swatchWrapper);p.twisterDimmedOpacity=.2;t("#sizeSwatch").length&&(p.sizeSwatch=!0);p.landingDimCombId=DetailPage.StateController.getState().currentDimCombID})();A.when("twister-lazy-load-data").execute(function(b){if(b.context.dimKey===
p.dimName){var d=DetailPage.StateController.getState().currentDimCombID,e=p.landingDimCombId.split("_"),d=d.split("_");e[p.dimOrder]="*";d[p.dimOrder]="*";d=d.join("_");e=e.join("_");if(d==e){var g=b.context;b=b.responseData.split("&&&");t("#"+c.TWISTER_FEATURE_DIV_ID).css("opacity",.2);t.each(b,function(b,d){var e;if(""!==a.stringTrim(d))try{e=t.parseJSON(d)}catch(c){}else e=d;var p=t(document.querySelectorAll('[data-defaultAsin="'+e.ASIN+'"]'));divToBeReplaced=p.find(" .twisterSlotDiv");if(0<divToBeReplaced.length){divToBeReplaced.css("display",
"");if(Twister.multiDimensionWeblabEnabled){for(var h="",m=0;e.Value.content.twisterSlotDiv[m];)"IMAGE"===g.dimSubType&&(h+="<div>"),h+=e.Value.content.twisterSlotDiv[m],"IMAGE"===g.dimSubType&&(h+="</div>"),m++;divToBeReplaced.html(h)}else divToBeReplaced.html(e.Value.content.twisterSlotDiv);p.removeAttr("data-defaultAsin")}});p.resizeHelperHandle.fixSize(p.$swatches,p.swatchWrapper,p.swatchDynaWrapper,p.ingressWrapper);t("#"+c.TWISTER_FEATURE_DIV_ID).css("opacity",1)}}})}});A.when("A","twister-string-constants",
"dp-js-logger").register("twister-vodd-override-behavior",function(u,k,a){this.VoddOverride=u.createClass({test:!1,shouldGetNextAvailableAsin:function(a,f){return!1},getSupplementString:function(a,f,l,r){return""}});this.voddOverrideBehavior=new VoddOverride;this.externalFeatureName="";this.setExternalOverrideBehavior=function(c,f){try{this.voddOverrideBehavior=c,this.externalFeatureName=f}catch(l){(new a(f)).logFatal(l,{message:"[Override behavior for VODD failed]"})}};this.getVoddOverrideBehavior=
function(){return this.voddOverrideBehavior};return this});A.when("A","twister-utils","twister-string-constants","scroll-event-handler","twister-vodd-popover","twister-vodd-override-behavior","dp-js-logger").register("twister-vodd",function(u,k,a,c,f,l,r){return function(h,e){function m(){var b=100*parseInt(E.dimensionOrder),a=b,d=function(b,a,d){b.addClass("animation-start");setTimeout(function(){b.animate({top:d||"0px"},{duration:300,complete:function(){K(this).removeClass("animation-start")}})},
a)};T.length&&T.parent("td").is(":visible")&&(d(T.parent("td"),b,"5px"),a=b+50);d(da.parent("td"),a,"5px")}function v(){aa=a.ID_SELECTOR+"vodd-button-"+E.dimensionName;DIMENSION_SINGLETON_ID=a.ID_SELECTOR+"vodd-singleton-"+E.dimensionName;la=a.CLASS_SELECTOR+"vodd-button-label-"+E.dimensionName;ea=a.CLASS_SELECTOR+"vodd-button-icon-"+E.dimensionName;ma=a.ID_SELECTOR+"vodd-table-"+E.dimensionName;na=a.ID_SELECTOR+"dimension-button-img-"+E.dimensionName;U=a.ID_SELECTOR+E.dimensionName+a.CHAR_UNDERSCORE;
oa="vodd-popover-"+E.dimensionName;var b=parseInt(E.dimensionOrder),d=h[a.INIT_DATA_DISPLAY_TYPE_PROPERTIES];d&&K.isArray(d)&&d.length>b&&(b=d[b],b[a.INIT_DATA_VISIBLE_ROW_COUNT]&&(X=b[a.INIT_DATA_VISIBLE_ROW_COUNT]),b[a.INIT_DATA_MAX_POPOVER_HEIGHT]&&(P=b[a.INIT_DATA_MAX_POPOVER_HEIGHT]),b[a.INIT_DATA_ANIMATE_BUTTON_CONTENT]&&(ba=b[a.INIT_DATA_ANIMATE_BUTTON_CONTENT]),b[a.INIT_DATA_POPOVER_POSITION]&&(fa=b[a.INIT_DATA_POPOVER_POSITION]))}function g(b){if(S){var d=S.length/E.dimValuesDisplayData.length*
100,d={divMetaData:B(null),count:Math.ceil(E.dimValuesDisplayData.length/X),percentage:Math.floor(d),dimDisplayType:a.TWISTER_DIMENSION_VIEW_VODD};ia.logImpression(b,d)}}function q(){2==G&&1===ca&&(V=!1);var b={trigger:E.dimensionButton,name:oa,eventListener:E,displayPosition:fa,positionOnTwisterContainer:V},d=L.find("tr").not(".aok-hidden");d.length&&d.length>X&&P&&"undefined"!==typeof P&&K.extend(b,{height:P});Q=new f(b);E.dimensionButton.bind(k.isTouchDevice()?a.EVENT_TYPE_TOUCHEND:a.EVENT_TYPE_CLICK,
function(b){if(Q&&Q.getHandle()&&Q.getHandle().isActive())return Q.getHandle().hide(),!1;ia.logImpression(ga.CLICK,{time:Date.now()});k.isTouchDevice()&&E.dimensionButton.trigger("mouseenter")})}function y(b,a){var d=ia.createFunctionTimer(ga.DIM_SUM_LOAD);d.start();Twister.dimensionalSummaryModule&&Twister.dimensionalSummaryModule.fetchDimSumData({indices:a,asinList:b,dimTriggeringDimSum:E.dimensionName,dimSubType:E.dimSubType,dimType:E.dimType,chunk:function(b){if(b&&"object"===typeof b){var a=
O[b.ASIN][parseInt(E.dimensionOrder)],a=L.find(U+a);if(b.Value&&b.Value.content&&b.Value.content.twisterSlotDiv){var d=K.trim(b.Value.content.twisterSlotDiv);0<d.length&&(a.find(".vodd-loading-placeholder").hide(),H(a),b=a.find(".dimension-details"),b.append(d),a=b.find(".twister_swatch_price").parent(),a.is("div")&&!a.attr("class")&&(a=x(a),a.find(".a-size-mini").addClass("a-size-small").removeClass("a-size-mini"),a.addClass("a-color-price")),b=b.find(".sns-data-slot").parent(),b.is("div")&&!b.attr("class")&&
x(b))}}},success:function(b,a,e,c){d.stop()},error:function(){d.stop()},abort:function(){d.stop()}})}function d(b){var a=E.initialTwisterState.getCurrentDimCombID(),d=parseInt(E.dimensionOrder),e=[],c=[];S||(S=[]);override=l.getVoddOverrideBehavior();E.voddOverrideEnabled=!0;try{E.shouldFetchNextAvailableAsin=override.shouldGetNextAvailableAsin(E.dimensionOrder,E.dimensionsMap)}catch(g){var p=new r(override.externalFeatureName),h={message:"[shouldFetchNextAvailableAsin failed for VODD Twister Override]"};
p.logFatal(g,h)}for(var m=0;m<b.length;m++){7===e.length&&(y(e,c),e=[],c=[]);var f=w(b[m].id),p=k.reconstructCombinationWithDimValue(a,d,f);asin=W[p];0>S.indexOf(f)&&S.push(f);null==asin&&E.shouldFetchNextAvailableAsin&&(p=E.initialTwisterState.getCurrentDimCombID().split("_"),d=parseInt(E.dimensionOrder),p[d]=f,p=p.join("_"),asin=E.twisterControllerHandle.twisterAvailabilityCache.gAsinToRender(p,d));if(asin){if(E.voddOverrideEnabled){var q="";try{q=override.getSupplementString(asin,W,O,ha)}catch(n){p=
new r(override.externalFeatureName),h={message:"[getSupplementString failed for VODD Twister Override]"},p.logFatal(n,h)}K(b[m]).find(".supplementString").remove();K(b[m]).find(".dimension-display-text").append('<span class="supplementString a-size-mini">'+q+"</span>")}c.push(f);e.push(asin)}}0<e.length&&y(e,c)}function x(b){var a=b.prev(),d=b.children();b.remove();a.after(d);return d}function b(b){b=k.getVisibleTableRows(b.currentTarget,L.find("tr"));d(b)}function w(b){if(!b)return-1;b=b.split(a.CHAR_UNDERSCORE);
return b[b.length-1]}function B(b){return{dimIndex:E.dimensionOrder,dimValueIndex:b?w(b.id):null,dimDisplayType:a.TWISTER_DIMENSION_VIEW_VODD}}function p(b){g(ga.CLICK_VARIATION);Y||g(ga.SCROLL);Y=!0;S=null;var a=B(b.currentTarget),d=E.initialTwisterState.getCurrentDimCombID(),e=k.reconstructCombinationWithDimValue(d,a.dimIndex,a.dimValueIndex);e!=d&&E.twisterControllerHandle&&(R(),E.twisterControllerHandle.handleClick(a));Q&&Q.getHandle()&&Q.getHandle().hide();d=E.twisterControllerHandle.twisterAvailabilityCache.isDimCombinationAvailable(e);
a={dimensionOrder:E.dimensionOrder,dimensionValueIndex:a.dimValueIndex,isSelectedDimValueAvailable:d};K(b.currentTarget).trigger("TwisterVODD.dimensionRowClick",a)}function t(b){K(b.currentTarget).addClass("vodd-row-hovered");E.twisterControllerHandle&&(b=B(b.currentTarget),E.twisterControllerHandle.handleMouseOver(b))}function F(b){K(b.currentTarget).removeClass("vodd-row-hovered");if(E.twisterControllerHandle){var a=B(b.currentTarget);b=w(b.currentTarget.id);E.twisterControllerHandle.handleMouseOut(a,
E.dimensionOrder,b)}}function H(b){b.find(".dimension-slots .availability-message").nextAll().remove()}function I(b,d){if(d)b.find(".unavailable-text").hide(),b.find(".vodd-loading-placeholder").show();else{b.find(".vodd-loading-placeholder").hide();b.find(".unavailableV2").removeClass("aok-hidden");var e;e=E.initialTwisterState.getCurrentDimCombID().split("_");var c=[],g=parseInt(E.dimensionOrder),p=w(b[0].id);e[g]=p;p=e.join("_");p=E.twisterControllerHandle.twisterAvailabilityCache.gAsinToRender(p,
g);if(p=O[p])for(var h=0;h<e.length;h++)g!==h&&Z[h]!==a.HIDDEN_DIMENSION_DISPLAY_TYPE&&c.push(ha[h][p[h]]);if(e=c.join(", "))b.find(".unavailable-text").show(),b.find(".variation-combination-text").text(e);a:{e=0;c=parseInt(E.dimensionOrder);g=parseInt(w(b[0].id));for(asin in O)if(parseInt(O[asin][c])===g&&1<++e){e=!0;break a}e=!1}e||b.find(".variation-more-text").hide()}H(b)}function n(b){N.sort(function(d,e){var c=w(d.id),g=w(e.id);if(b[c][a.STRING_STYLE]!==b[g][a.STRING_STYLE]){if(b[c][a.STRING_STYLE]===
a.CLASS_FOR_VODD_UNAVAILABLE)return 1;if(b[g][a.STRING_STYLE]===a.CLASS_FOR_VODD_UNAVAILABLE)return-1}return c-g});N.detach().appendTo(L)}function z(b){var a=L.find("tr").not(".aok-hidden");b=a.index(b);var e=a.length-X;b>e?(b=e,0>b&&(b=0)):b=0==b?b:b-1;a=a.slice(b,b+X);d(a)}function R(){N.unbind(a.EVENT_TYPE_CLICK,p);k.isTouchDevice()||N.unbind(a.EVENT_TYPE_MOUSEENTER,t).unbind(a.EVENT_TYPE_MOUSELEAVE,F)}function D(b,d,e){var c=b;if(J()){var g=b.split("_");b=E.dimensionOrder;for(var g=g.slice(0),
p=0;p<dimensionHierarchyData.length;p++)b!=p&&dimensionHierarchyData[b]<dimensionHierarchyData[p]&&(g[p]="X",c=g.join("_"))}b=c;c=k.getDimStyleData(c,E.dimValuesDisplayData.length,E.dimensionOrder,E.twisterControllerHandle.twisterAvailabilityCache,E.displayConfigStylesData);n(c);var h=null;b=c.length;for(g=0;g<c.length;g++){var p=c[g],m=L.find(U+g);if(p[a.STRING_STYLE]===a.CLASS_FOR_VODD_SELECT){if(h=m,m.addClass("vodd-row-selected"),E.dimensionValueHasIcon[g]?(da.text(""),ja.attr("class","background-sprite "+
E.dimValuesDisplayData[g].replace(/\s/g,""))):(ja.attr("class",""),da.text(E.dimValuesDisplayData[g])),T.length){var w=m.find("img.vodd-dimension-img");(w=0<w.length?w.attr("src"):null)&&T.attr("src",w).show()}}else m.removeClass("vodd-row-selected");m.removeClass("vodd-row-hovered");1<E.dimensionsMap.length&&I(m,p[a.STRING_STYLE]!==a.CLASS_FOR_VODD_UNAVAILABLE);J(e)&&(p[a.STRING_STYLE]===a.CLASS_FOR_VODD_UNAVAILABLE?(m.addClass("aok-hidden"),--b):m.removeClass("aok-hidden"))}J(e)&&(1>=b?(K(aa).addClass("aok-hidden"),
K(DIMENSION_SINGLETON_ID).removeClass("aok-hidden")):(K(DIMENSION_SINGLETON_ID).addClass("aok-hidden"),K(aa).removeClass("aok-hidden")));d?u.on.load(function(){z(h)}):z(h)}function J(){var b=!1;isHierarchicalPivoting&&topHierarchicalDimensionIndex!==parseInt(E.dimensionOrder)&&(b=!0);return b}var E=this,K=u.$,Q,ka,ha,G,ca,V=!0,M,N,L,T,da,ja,la,ea,na,aa,ma,U,oa,X=0,fa="bottom",ba=!1,P,Y=!1,S,W,Z,O,ia,ga;E.onInitializeTwister=function(){D(E.initialTwisterState.getCurrentDimCombID(),!0,null);u.loadDescendantImagesManually(L);
q()};E.handlePopoverEvent=function(d,e){if(d===a.EVENT_TYPE_SHOWPOPOVER){R();N.bind(a.EVENT_TYPE_CLICK,p);k.isTouchDevice()||N.bind(a.EVENT_TYPE_MOUSEENTER,t).bind(a.EVENT_TYPE_MOUSELEAVE,F);Y=!1;var h=e.popover.$trigger,m={popover:e};h.addClass("highlighted");h.trigger("TwisterVODD.showPopup",m);ka||(M=L.closest(".a-popover-inner"),ka=new c(200,M,b));h=L.find("tr.vodd-row-selected");M&&M.length&&h.length&&M.scrollTop(h.get(0).offsetTop-33)}else d===a.EVENT_TYPE_HIDEPOPOVER?(h=e.popover.$trigger,
m={popover:e},Y||(g(ga.SCROLL),S=null),Y=!0,K(h).removeClass("highlighted"),h.trigger("TwisterVODD.hidePopup",m)):d===a.EVENT_TYPE_UPDATEPOPOVERPOSITION&&e.popover.$trigger.trigger("TwisterVODD.updatePopupPosition",{popover:e})};E.updateView=function(b){b[a.STRING_EVENT_TYPE]===a.EVENT_TYPE_CLICK&&D(b[a.STRING_DIM_COMB_ID],!1,b[a.STRING_EVENT_DATA][a.STRING_EVENT_DIV_METADATA])};E.showVariationSelection=function(){k.isTouchDevice()||E.dimensionButton.trigger("click")};(function(){E.dimType=a.TWISTER_DIMENSION_VIEW_VODD;
E.dimensionName=e[a.STRING_DIM_NAME];E.dimensionOrder=e[a.STRING_DIM_ORDER];E.twisterControllerHandle=e[a.STRING_TWISTER_CONTROLLER_HANDLE];E.dimValuesDisplayData=e[a.STRING_DIMENSION_VALUES_DATA];E.displayConfigStylesData=e[a.STRING_DISPLAY_CONFIG_STYLES_DATA];E.initialTwisterState=e[a.STRING_TWISTER_INITIAL_STATE_KEY];E.dimensionsMap=e[a.STRING_DIMENSIONS_MAP];E.dimSubType=e[a.DIMENSION_SUB_TYPE];E.dimensionValueHasIcon=e[a.DIMENSION_VALUE_HAS_ICON];ia=E.twisterControllerHandle.logger;ga=ia.eventTypes;
ha=E.initialTwisterState.twisterAvailabilityCache.twisterVariationsData.dimensionValuesData;W=E.twisterControllerHandle.twisterJSInitData.dimToAsinMapData;Z=E.twisterControllerHandle.twisterJSInitData.dimensionsDisplayType;O=E.twisterControllerHandle.twisterJSInitData.asinToDimIndexMapData;G=K(e[a.STRING_DIMENSIONS_MAP]).length;ca=K(".vodd-dim-wrapper").size();dimensionHierarchyData=E.twisterControllerHandle.twisterJSInitData.dimensionHierarchyData;isHierarchicalPivoting=E.twisterControllerHandle.twisterJSInitData.hierarchicalPivoting;
topHierarchicalDimensionIndex=E.twisterControllerHandle.twisterJSInitData.topHierarchicalDimensionIndex;E.initialTwisterState.asinDimensionValuesInfo||(E.initialTwisterState.asinDimensionValuesInfo={});v();E.dimensionButton=K(aa);L=K(ma);N=L.find("tr");T=K(na);da=K(la);ja=K(ea);var b=Math.ceil(E.dimValuesDisplayData.length/X);ia.logImpression(ga.DIM_INIT,{count:b,dimDisplayType:a.TWISTER_DIMENSION_VIEW_VODD});ba&&A.when("A","ready").execute(function(b){C.setTimeout(function(){m()},1E3)})})()}});A.when("A",
"twister-string-constants").register("twister-dimension-views-unavailablePopover",function(u,k){function a(a,c,r,h,e){for(var m="",v=0;v<c.length;v++)v!==a&&1===c[v][k.STRING_IS_SELECTED]&&(m=m?m+", "+r[v]:r[v]);m="<strong>"+m+"</strong>";return e?h+"&nbsp;"+m:m+"&nbsp;"+h}var c=u.$;return{triggerPopover:function(f,l,r){var h=f[k.STRING_EVENT_DATA];f=h[k.STRING_EVENT_DIM_INFO][k.STRING_DIMENSION_DISPLAY_MAP];var e=h[k.STRING_DIMENSION_SELECTION_DATA],h=h[k.STRING_EVENT_DIV_METADATA][k.STRING_DIM_INDEX],
m=l[k.STRING_UNAVAILABLE_POPOVER_STRING_VALUE];l=l[k.STRING_SHOW_DIM_SECOND_UNAVAILABLE_POPOVER];if("undefined"===typeof touchDeviceDetected||!touchDeviceDetected){l=a(h,e,f,m,l);f="ap_body";e=[2,22];if(c.browser.msie||navigator.userAgent.match(/Trident/))f+=" styleIE";h=c("#"+r);c.AmazonPopover.displayPopover({modal:!1,showOnHover:!0,draggable:!1,showCloseButton:!1,hoverShowDelay:50,hoverHideDelay:0,width:null,closeEventInclude:"CLICK_TRIGGER",literalContent:l,skin:"<div id='twisterPopover' class='ap_popover twisterPopoverSkin a-text-color-white'><div class='ap_header'></div><div class='"+
f+"'><div class='ap_content'></div></div><div class='ap_footer'><div class='ap_middle'></div></div></div>",location:"top",locationElement:Twister.$("#"+r),align:"center",attached:!1,group:"TwisterPopover",locationOffset:e,paddingLeft:5,paddingRight:5,paddingBottom:5,onShow:function(){var a=c("#twisterPopover").width();c.browser.msie?c("#twisterPopover").find(".ap_footer").find(".ap_middle").addClass("twisterPopoverArrow").css({top:"16px",width:a-68+"px"}):c("#twisterPopover").find(".ap_footer").find(".ap_middle").addClass("twisterPopoverArrow").css({width:a-
68+"px"})}},h);c("#"+r).trigger("mouseover.amzPopover")}}}});A.when("A","twister-utils","twister-string-constants","scroll-event-handler","dimensional-summary-module","a-popover","twister-logger").register("twister-IMDD",function(u,k,a,c,f,l,r){return function(c,e){function m(){u.declarative("twister-idd-button-click-"+n.dimOrder,[a.EVENT_TYPE_CLICK,a.EVENT_TYPE_MOUSEENTER,a.EVENT_TYPE_MOUSELEAVE,a.EVENT_TYPE_MOUSEDOWN,a.EVENT_TYPE_TOUCHSTART],function(b){if(b.type===a.EVENT_TYPE_CLICK){n.modalAttachedToButton?
(b="imdd-appear-"+e[a.STRING_DIM_NAME],z("#"+n.immersiveDropdownDivId+" .twister-idd-row").forceAppear({force_process:!0,$window:n.immersiveDropdownDiv,$scrollHandlerDiv:n.immersiveDropdownContentDiv,eventToBeTriggered:b})):(q(),z("#"+n.dropdownDivPlaceHolderId).after(n.immersiveDropdownDiv),f());n.logger.logImpression(n.logger.eventTypes.IMMERSIVE_DROPDOWN_OPENED,null);n.immersiveDropdownDiv.css("display","block");n.modalAttachedToButton||(f(),n.modalAttachedToButton=1);b=z("#twisterDropdownWidthHelper_"+
n.dimOrder);if(0<b.length){var d=b.html();b=z("#"+n.immersiveDropdownDivId+" #twister-idd-modal-selection").html();z("#"+n.immersiveDropdownDivId+" #twister-idd-modal-selection").html(d);n.dropdownHeaderDiv.css("height","");n.maxHeaderHeight=n.dropdownHeaderDiv.outerHeight();d=n.immersiveDropdownDiv.height()-n.maxHeaderHeight;n.immersiveDropdownContentDiv.css({height:d});n.dropdownHeaderDiv.css({height:n.dropdownHeaderDiv.outerHeight()});z("#"+n.immersiveDropdownDivId+" #twister-idd-modal-selection").html(b)}var d=
n.immersiveDropdownDiv.outerHeight(),c=n.$dropdownButtonDiv.outerHeight();b=n.$dropdownButtonDiv.offset();var g=z(C).height()+z(C).scrollTop()-b.top,g=350<g?350:g,g=g>d?d:g,p=n.$subNav.offset().top+n.$subNav.outerHeight(),c=b.top+c,p=c-p,p=350<p?350:p,d=p>d?d:p;g>=d?(n.immersiveDropdownDiv.css("height",g+"px"),b=b.top):(n.immersiveDropdownDiv.css("height",d-10+"px"),b=c-n.immersiveDropdownDiv.outerHeight()+10);n.immersiveDropdownDiv.offset({top:b});b=n.immersiveDropdownDiv.height()-n.maxHeaderHeight;
n.immersiveDropdownContentDiv.css({height:b});n.immersiveDropdownContentDiv.get(0).scrollHeight>n.immersiveDropdownContentDiv.get(0).clientHeight?z(a.ID_SELECTOR+n.immersiveDropdownDivId+" ."+a.CLASSNAME_FOR_STYLERBOTTOM).css("display","block"):z(a.ID_SELECTOR+n.immersiveDropdownDivId+" ."+a.CLASSNAME_FOR_STYLERBOTTOM).css("display","none");n.immersiveDropdownDiv.css("display","none");n.immersiveDropdownDiv.css("display","block");k.disableTwisterDiv();n.modalAttachedToButton=1;n.isDropdownOpen=1}});
u.declarative("twister-idd-row-click-"+n.dimOrder,[a.EVENT_TYPE_CLICK,a.EVENT_TYPE_MOUSEENTER,a.EVENT_TYPE_MOUSELEAVE,a.EVENT_TYPE_MOUSEDOWN,a.EVENT_TYPE_TOUCHSTART],function(b){b.type===a.EVENT_TYPE_CLICK?n.twisterControllerHandle&&(n.twisterControllerHandle.handleClick(b.data),g(),n.logger.logImpression(n.logger.eventTypes.IMMERSIVE_DROPDOWN_ROW_CLICK,null)):b.type===a.EVENT_TYPE_MOUSEENTER?n.twisterControllerHandle&&n.twisterControllerHandle.handleMouseOver(b.data):b.type===a.EVENT_TYPE_MOUSELEAVE&&
n.twisterControllerHandle&&n.twisterControllerHandle.handleMouseOut(b.data,b.data[a.STRING_DIM_INDEX],b.data[a.STRING_DIM_VALUE_INDEX])});u.declarative("twister-idd-close-button-"+n.dimOrder,[a.EVENT_TYPE_CLICK],function(b){b.type===a.EVENT_TYPE_CLICK&&(g(),n.logger.logImpression(n.logger.eventTypes.IMMERSIVE_DROPDOWN_CLOSED,null))});z(document).ready(function(){z(document).click(function(b){b.target.id==n.immersiveDropdownDivId||n.immersiveDropdownDiv.has(b.target).length||b.target.id==n.dropdownButtonId||
n.$dropdownButtonDiv.has(b.target).length||!n.isDropdownOpen||g()})});z(document).keyup(function(b){27==b.keyCode&&g()});n.immersiveDropdownContentDiv.bind("scroll",function(){z(this).scrollTop()+z(this).innerHeight()>=this.scrollHeight?(n.logger.logImpression(n.logger.eventTypes.IMMERSIVE_DROPDOWN_FULL_SCROLL,null),z(a.ID_SELECTOR+n.immersiveDropdownDivId+" ."+a.CLASSNAME_FOR_STYLERBOTTOM).css("display","none")):(0==z(this).scrollTop()?z(a.ID_SELECTOR+n.immersiveDropdownDivId+" ."+a.CLASSNAME_FOR_STYLERTOP).css("display",
"none"):z(a.ID_SELECTOR+n.immersiveDropdownDivId+" ."+a.CLASSNAME_FOR_STYLERTOP).css("display","block"),z(a.ID_SELECTOR+n.immersiveDropdownDivId+" ."+a.CLASSNAME_FOR_STYLERBOTTOM).css("display","block"))});n.immersiveDropdownContentDiv.live("DOMMouseScroll mousewheel  wheel",function(b){var d=z(this),e=this.scrollTop,c=this.scrollHeight,g=d.height(),p=b.originalEvent.wheelDelta;"undefined"==typeof p&&(p=-b.originalEvent.deltaY);var h=0<p,m=function(){b.stopPropagation();b.preventDefault();return b.returnValue=
!1};if(!h&&-p>c-g-e)return d.scrollTop(c),z(a.ID_SELECTOR+n.immersiveDropdownDivId+" ."+a.CLASSNAME_FOR_STYLERBOTTOM).css("display","none"),m();if(h&&p>e)return z(a.ID_SELECTOR+n.immersiveDropdownDivId+" ."+a.CLASSNAME_FOR_STYLERTOP).css("display","none"),d.scrollTop(0),m();d.scrollTop()+d.innerHeight()>c&&(z(a.ID_SELECTOR+n.immersiveDropdownDivId+" ."+a.CLASSNAME_FOR_STYLERBOTTOM).css("display","block"),z(a.ID_SELECTOR+n.immersiveDropdownDivId+" ."+a.CLASSNAME_FOR_STYLERTOP).css("display","block"))})}
function f(){var b=-1<navigator.platform.indexOf("Win"),d=n.immersiveDropdownContentDiv.scrollTop()+n.immersiveDropdownContentDiv.get(0).scrollHeight>n.immersiveDropdownContentDiv.outerHeight()+15;if(d){var e=parseInt(n.immersiveDropdownDiv.width())+25+"px";n.immersiveDropdownDiv.css("width",e);b&&(b=parseInt(z(a.ID_SELECTOR+n.immersiveDropdownDivId+" ."+a.CLASSNAME_FOR_STYLERBOTTOM).width())-21+"px",z(a.ID_SELECTOR+n.immersiveDropdownDivId+" ."+a.CLASSNAME_FOR_STYLERBOTTOM).css("width",b),z(a.ID_SELECTOR+
n.immersiveDropdownDivId+" ."+a.CLASSNAME_FOR_STYLERTOP).css("width",b))}d&&n.logger.logImpression(n.logger.eventTypes.IMMERSIVE_DROPDOWN_VISIBLE_SCROLLBAR,null)}function g(){k.enableTwisterDiv();n.immersiveDropdownDiv.css("display","none");n.isDropdownOpen=0}function q(){var b="imdd-appear-"+e[a.STRING_DIM_NAME];z("#"+n.immersiveDropdownDivId+" .twister-idd-row").appearedInTwisterImmersiveView({force_process:!0,$window:n.immersiveDropdownDiv,$scrollHandlerDiv:n.immersiveDropdownContentDiv,eventToBeTriggered:b});
u.on(b,function(b){for(b=b[0].slice(0);b.length;)n.requestStack.push(b.splice(0,n.maxBatchLimitForIMDD));l()})}function l(){if(!(0>=n.requestStack.length)&&n.noOfOngoingConnections!==MAX_AJAX_CONNECTIONS_ALLOWED){n.noOfOngoingConnections++;for(var b=n.requestStack.shift(),a=[],d=0,e=b.length;d<e;d++){var c=z(b[d]),c=n.immersiveDropdownDiv.find("#"+c.attr("id")).closest(".a-declarative"),g=c.attr("data-action"),c=JSON.parse(c.attr("data-"+g)).dimValueIndex;a.push(c)}w(a);l()}}function d(b){n.initData.fnToDetermineSelectedVariations?
"function"===typeof n.initData.fnToDetermineSelectedVariations&&(n.currentDimCombOnGlance=n.initData.fnToDetermineSelectedVariations.call(n)):(n.glanceViewSelectedDims=DetailPage.StateController.getState().selected_variations,n.currentDimCombOnGlance=DetailPage.StateController.getState().currentDimCombID);return b?n.currentDimCombOnGlance.split("_"):n.currentDimCombOnGlance}function x(b){var a=d(!0);a[b]=n.symbolForTriggeringDim;var a=a.join("_"),e={},c={};b=A[b];if(!n.mapOfDimToAsinMaps[a]){for(var g=
0,p=b.length;g<p;g++){var h=a.replace(n.symbolForTriggeringDim,g);(h=D[h])?(e[b[g]]=h,c[h]=b[g]):e[b[g]]=""}e&&(n.mapOfDimToAsinMaps[a]=e);c&&(n.mapOfAsinToDimMaps[a]=c)}}function b(b,a,e){e=[];var c=d(!0).slice(0);c[a]=n.symbolForTriggeringDim;var c=c.join("_"),c=n.mapOfDimToAsinMaps[c],g=H();a=A[a];for(var p=0,h=b.length;p<=h;p++){var m=b[p],w=a[m];w&&((w=c[w])?e.push(w):(m=z("#"+ROW_ID_PREFIX+n.dimensionName+"_"+m+" .idd_loading_slot_0"),g||m.html("<span class='a-color-tertiary'>- -</span>")))}return e}
function w(c){var g={};g.indices=c;g.dimTriggeringDimSum=e[a.STRING_DIM_NAME];g.dimType=n.dimType;var p=dimensionsList.indexOf(g.dimTriggeringDimSum);x(p);g.asinList=b(c,p,g);0==g.asinList.length?(n.noOfOngoingConnections--,l()):(g.dimCombId=d(!1),g.executeChunk=function(){var b=DetailPage.StateController.getState().currentDimCombID,a=b.split("_"),d=g.dimCombId.split("_");if(g.dimCombId===b)return!0;if(!k.isPartialState(n.dimensionsMap.length)){for(var b=n.dimensionsMap.length,e=!0,c=0;c<b;c++)if(c!==
parseInt(n.dimOrder)&&d[c]!==a[c]){e=!1;break}return e}return!1},g.chunk=function(b,a){b.dimensionValue=dimensionsList[a.dimIndexTriggeringDimSum]+"_"+A[a.dimIndexTriggeringDimSum].indexOf(n.mapOfAsinToDimMaps[a.hashKey][b.ASIN]);var d=z("#"+ROW_ID_PREFIX+b.dimensionValue+" .idd_loading_slot_0");d.html(b.Value.content.twisterSlotDiv["0"]);d=z("#"+ROW_ID_PREFIX+b.dimensionValue+" .idd_loading_slot_1");d.html(b.Value.content.twisterSlotDiv["1"])},g.success=function(b,a,d,e){n.noOfOngoingConnections--;
l()},g.error=function(){n.noOfOngoingConnections--;l()},g.abort=function(){n.noOfOngoingConnections--;l()},Twister.dimensionalSummaryModule.fetchDimSumData(g))}function B(b){var d=z("#"+ROW_ID_PREFIX+n.dimensionName+a.CHAR_UNDERSCORE+b);b=[];var e;if(0<d.length){b=d.get(0).className.split(" ");for(var d=0,c=b.length;d<c;d++){var g=b[d];if(0===g.indexOf("twister-idd-row-")){e=g;break}}}return e}function p(b,d,e){b=z("#"+ROW_ID_PREFIX+n.dimensionName+a.CHAR_UNDERSCORE+b);d!==e&&(d==G?z(b).addClass(e):
z(b).removeClass(d).addClass(e))}function t(b,d){var e=z("#"+ROW_ID_PREFIX+n.dimensionName+a.CHAR_UNDERSCORE+b+" .idd_loading_slot_0 ."+a.PRICE_SLOT_CLASS_NAME),c=a.CLASS_FOR_PRICE_SECONDARY;if("twister-idd-row-selected"===d||d===a.CLASS_FOR_SWATCH_UNAVAILABLE_HOVER||"twister-idd-row-hover"===d)c=a.CLASS_FOR_PRICE_SELECTED;e.length&&e.removeClass(a.CLASS_FOR_PRICE_SECONDARY+" "+a.CLASS_FOR_PRICE_SELECTED+" a-color-tertiary").addClass(c)}function F(b,a){DetailPage.StateController.getState();a?z("#"+
n.immersiveDropdownDivId+" #twister-idd-modal-selection").html(b).addClass("hover"):(z("#"+n.dropdownButtonId+" #twister-idd-button-selection").html(b).removeClass("hover"),z("#"+n.immersiveDropdownDivId+" #twister-idd-modal-selection").html(b).removeClass("hover"))}function H(){for(var b=n.dimensionsMap.length,a=DetailPage.StateController.getState().currentDimCombID.split("_"),d=!1,e=0;e<b;e++)if(e!==parseInt(n.dimOrder)&&"X"===a[e]){d=!0;break}return d}function I(b){b=b?k.getImmersivePartialStateBannerContent(c,
parseInt(n.dimOrder)):k.getImmersiveFullStateBannerContent(c,parseInt(n.dimOrder));z("#twisterImmersiveDropdownBanner_"+n.dimOrder).html(b)}var n=this,z=u.$,A,D;ROW_ID_PREFIX="twister_idd_";DEFAULT_DISPLAY_VALUE="Select";n.symbolForTriggeringDim="*";n.currentDimCombOnGlance="";n.twisterFeatureDiv=z("#twister_feature_div");n.mapOfDimToAsinMaps={};n.mapOfAsinToDimMaps={};n.$subNav=z(a.ID_SELECTOR+"nav-subnav");n.updateView=function(b){if(b[a.STRING_EVENT_TYPE]===a.EVENT_TYPE_MOUSEOVER){var d;d=b[a.STRING_EVENT_DATA];
var e=d[a.STRING_EVENT_DIM_INFO][a.STRING_DIMENSION_VALUES_DATA][n.dimOrder];d=d[a.STRING_EVENT_DIV_METADATA];n.dimOrder==d[a.STRING_DIM_INDEX]&&(B(d[a.STRING_DIM_VALUE_INDEX]),b=k.getDimStyleData(b.dimCombID,n.dimValuesDisplayData.length,n.dimOrder,n.twisterControllerHandle.twisterAvailabilityCache,n.displayConfigStylesData),-1===d.dimValueIndex?F(DEFAULT_DISPLAY_VALUE,!0):F(e,!0),e=d.dimValueIndex,-1<e&&(b=b[e],b=b[a.STRING_STYLE],d=B(e),"twister-idd-row-selected"!==d&&("twister-idd-row-selected"===
b&&(b="twister-idd-row-unavailable"===d?"twister-idd-row-unavailable-hover":"twister-idd-row-hover",t(e,b)),p(e,d,b))))}else{var c;eventData=b[a.STRING_EVENT_DATA];eventDimInfo=eventData[a.STRING_EVENT_DIM_INFO];dimensionValueDisplay=eventDimInfo[a.STRING_DIMENSION_VALUES_DATA][n.dimOrder];divMetaData=eventData[a.STRING_EVENT_DIV_METADATA];dimensionSelectionData=eventData[a.STRING_DIMENSION_SELECTION_DATA];dimCombID=b.dimCombID;dimDataForThisInteraction=k.getDimStyleData(dimCombID,n.dimValuesDisplayData.length,
n.dimOrder,n.twisterControllerHandle.twisterAvailabilityCache,n.displayConfigStylesData);0===dimensionSelectionData[n.dimOrder][a.STRING_IS_SELECTED]?("click"===b.eventType&&(c=B("-1"))&&(c=B("-1"),p("-1",c,"twister-idd-row-selected")),F(DEFAULT_DISPLAY_VALUE,!1)):("click"===b.eventType&&(c=B("-1"))&&(c=B("-1"),p("-1",c,"twister-idd-row-available")),F(dimensionValueDisplay,!1));e=0;for(b=dimDataForThisInteraction.length;e<b;e++)if(d=dimDataForThisInteraction[e],d=d[a.STRING_STYLE],0===dimensionSelectionData[n.dimOrder][a.STRING_IS_SELECTED]&&
d===a.CLASS_FOR_SWATCH_SELECT&&(d=a.CLASS_FOR_SWATCH_AVAILABLE),c=B(e))c=B(e),p(e,c,d),t(e,d)}};n.updateViewAfterTwisterUpdate=function(b){var d=b[a.STRING_EVENT_DATA][a.STRING_DIMENSION_SELECTION_DATA][n.dimOrder][a.STRING_IS_SELECTED];b=H();if(k.isPartialState(n.dimensionsMap.length)&&(d||F(DEFAULT_DISPLAY_VALUE,!1),b)){for(var d=A[n.dimOrder].length,e=0;e<d;e++)z("#"+ROW_ID_PREFIX+n.dimensionName+"_"+e+" .idd_loading_slot_1").css("display","none"),z("#"+ROW_ID_PREFIX+n.dimensionName+"_"+e+" .idd_loading_slot_0").css("display",
"none");Twister.multiDimensionWeblabEnabled&&Twister.immersiveBannersPresent&&I(!0)}if(!b){b=A[n.dimOrder].length;for(d=0;d<b;d++)e=z("#"+ROW_ID_PREFIX+n.dimensionName+"_"+d+" .idd_loading_slot_1"),e.html(""),e.css("display",""),e=z("#"+ROW_ID_PREFIX+n.dimensionName+"_"+d+" .idd_loading_slot_0"),e.html("Loading details..."),e.css("display","");Twister.multiDimensionWeblabEnabled&&Twister.immersiveBannersPresent&&I(!1)}z("#"+n.immersiveDropdownDivId+" .twister-idd-row").invalidateAppearedAlreadyCache()};
(function(){n.dimensionName=e[a.STRING_DIM_NAME];n.dimOrder=e[a.STRING_DIM_ORDER];n.twisterControllerHandle=e[a.STRING_TWISTER_CONTROLLER_HANDLE];n.dimValuesDisplayData=e[a.STRING_DIMENSION_VALUES_DATA];n.displayConfigStylesData=e[a.STRING_DISPLAY_CONFIG_STYLES_DATA];n.initialTwisterState=e[a.STRING_TWISTER_INITIAL_STATE_KEY];n.dimensionsMap=e[a.STRING_DIMENSIONS_MAP];n.dropdownButtonId="twister-idd-button-"+n.dimensionName;n.$dropdownButtonDiv=z("#"+n.dropdownButtonId);n.immersiveDropdownDivId="twister-idd-modal-"+
n.dimensionName;n.immersiveDropdownDiv=z("#"+n.immersiveDropdownDivId);n.immersiveDropdownContentDiv=z("#twister-idd-table_"+n.dimensionName);n.immersiveDropdownButtonId="twister-idd-table_"+n.dimensionName;n.dropdownDivPlaceHolderId=n.dimensionName+a.SUFFIX_FOR_DROPDOWN_PANEL_PLACEHOLDER;n.dropdownHeaderDiv=z("#twister-idd-modal-header_"+n.dimensionName);n.requestStack=[];n.maxBatchLimitForIMDD=8;n.MAX_AJAX_CONNECTIONS_ALLOWED=2;n.noOfOngoingConnections=0;n.dimType="Dropdown";n.modalAttachedToButton=
0;A=n.initialTwisterState.twisterAvailabilityCache.twisterVariationsData.dimensionValuesData;D=n.twisterControllerHandle.twisterJSInitData.dimToAsinMapData;dimensionsList=n.twisterControllerHandle.twisterJSInitData.dimensions;n.initData={};n.initData.scopeSuffix="twister";n.symbolForTriggeringDim="*";n.displayConfigStylesData.available="twister-idd-row-available";n.displayConfigStylesData.invalid="twister-idd-row-unavailable";n.displayConfigStylesData.selected="twister-idd-row-selected";n.displayConfigStylesData.hidden=
"twister-idd-row-hidden";n.logger=new r(z,this,Twister.multiDimensionWeblabEnabled?"ImmersiveMultiDimensionView":"ImmersiveDropdownSingleDimensionView");n.logger.init();n.isDropdownOpen=0;m()})()}});A.when("A","dp-js-logger").register("twister-logger-service",function(u,k){return function(a,c,f){var l=new k,r=f||"";this.logCounters=function(c){a.each(c,function(a,c){var h=r+":"+c.name;Twister.printConsoleLogs&&console.log("Logging metric: "+h+" -> "+c.value);l.logCounter(h,c.value)})};this.init=function(){function h(){var a=
c.getDataToUploadOnUnload();e.logCounters(a);return null}var e=this;if("undefined"!==typeof ue.onunload)ue.onunload(h);else a(C).bind("beforeunload",h)}}});A.when("A","twister-logger-service","twister-string-constants").register("twister-logger",function(u,k,a){return function(c,f,l){function r(e){if(!e)return null;var c=f.jsInteractionEnabledTime||Date.now();return(e[a.TWISTER_EVENT_DATA_TIME]||Date.now())-c}function h(a){if(a.hasOwnProperty("getMetricData"))return a.getMetricData();var e=a.stringVal;
a=a.hasOwnProperty("getUploadValue")?a.getUploadValue():a.hasOwnProperty("currentValue")?a.currentValue:a.initValue;return isNaN(a)?null:{value:a,name:e}}var e=this,m;this.createFunctionTimer=function(a){return{eventType:a,start:function(){this.startTime=Date.now()},stop:function(){e.logImpression(this.eventType,{duration:Date.now()-this.startTime})}}};this.eventTypes={CLICK:{metricList:["M_CLICK_COUNT","M_FIRST_CLICK"]},IMMERSIVE_DROPDOWN_OPENED:{metricList:["IMMERSIVE_DROPDOWN_OPEN_COUNT"]},IMMERSIVE_DROPDOWN_CLOSED:{metricList:["IMMERSIVE_DROPDOWN_CLOSE_COUNT"]},
IMMERSIVE_DROPDOWN_VISIBLE_SCROLLBAR:{metricList:["IMMERSIVE_DROPDOWN_VISIBLE_SCROLLBAR_COUNT"]},IMMERSIVE_DROPDOWN_FULL_SCROLL:{metricList:["IMMERSIVE_DROPDOWN_FULL_SCROLL_COUNT"]},IMMERSIVE_DROPDOWN_ROW_CLICK:{metricList:["IMMERSIVE_DROPDOWN_ROW_CLICK_COUNT"]},IMMERSIVE_DROPDOWN_SCROLL:{metricList:["IMMERSIVE_DROPDOWN_SCROLL_COUNT"]},IMMERSIVE_OPTION_CLICK:{metricList:["M_IMMERSIVE_CLICK_COUNT"]},IMMERSIVE_SWATCH_CLICK:{metricList:["M_IMMERSIVE_SWATCH_CLICK_COUNT"]},IMMERSIVE_MODAL_CLOSE_CLICK:{metricList:["M_IMMERSIVE_CLOSE_CLICK_COUNT"]},
IMMODAL_VISIBLE_SCROLLBAR:{metricList:["M_IMMERSIVE_VISIBLE_SCROLL_COUNT"]},IMMODAL_FULL_SCROLL:{metricList:["M_IMMERSIVE_FULL_SCROLL_COUNT"]},UNAVAILABLE_SWATCH_HOVER:{metricList:["UNAVAILABLE_SWATCH_HOVER_COUNT"]},UNAVAILABLE_SWATCH_TABLET_CLICK:{metricList:["UNAVAILABLE_SWATCH_TABLET_CLICK_COUNT"]},UNAVAILABLE_SWATCH_PC_CLICK:{metricList:["UNAVAILABLE_SWATCH_PC_CLICK_COUNT"]},TWISTER_UNAVAILABILITY_NOTIFIER:{metricList:["UNAVAILABILE_VARIATIONS_COUNT","IS_UNAVAILABLITY_PRESENT"]},HOVER:{metricList:["M_HOVER_COUNT",
"M_FIRST_HOVER"]},HOVER_OUT:[],CACHE_HIT:{metricList:["M_CACHE_HIT","M_CACHE_USED"]},CACHE_MISS:{metricList:["M_CACHE_MISS","M_CACHE_USED"]},PAGE_UNLOAD:{metricList:["M_CACHE_UNUSED","M_CACHE_HIT_RATIO","M_CACHE_USED_RATIO"]},REQ_DIM_CHANGED:{metricList:["M_OTHER_REQ_DIM_SELECTED_COUNT","M_REQ_DIM_CHANGE_COUNT"]},DIM_SUM_LOAD:{metricList:["M_DIM_SUM_LOAD"]},CLICK_NA:{metricList:["M_NA_CLICK_COUNT"]},DIM_INIT:{metricList:["M_DIM_PAGENATION_COUNT"]},SCROLL:{metricList:["M_VIEWED_DIM_COUNT"]},CLICK_VARIATION:{metricList:["M_DIM_CLICK_VIEWED_DIM_COUNT"]},
EXPAND_BUTTON_CLICK:{metricList:["EXPAND_BUTTON_CLICK_COUNT"]},COLLAPSE_BUTTON_CLICK:{metricList:["COLLAPSE_BUTTON_CLICK_COUNT"]},EXPANDER:{metricList:["EXPANDER_COUNT"]}};var v=function(e,g){this.stringVal=g;this.initValue=NaN;this.deferLogging=!0;this.pagenationCountName=e;this.updateFunction=function(d){var e;e=25*Math.ceil(d[a.TWISTER_EVENT_DATA_PERCENTAGE]/25);var b=d[a.TWISTER_EVENT_DATA_DIV_METADATA][a.STRING_DIM_INDEX];this.metrics||(this.metrics={});this.metrics[b]||(this.metrics[b]={});
(this.metrics[b].percentage||0)<e&&(this.metrics[b].percentage=e);this.metrics[b].pageCount=d[a.TWISTER_EVENT_DATA_COUNT];this.metrics[b].dimDisplayType=d[a.TWISTER_EVENT_DATA_DISPLAY_TYPE];Twister.printConsoleLogs&&console.log(this.stringVal+": index - "+b+" page - "+this.metrics[b].pageCount+" percentage - "+this.metrics[b].percentage)};this.getMetricData=function(){if(this.metrics){var a=[],e=this;c.each(this.metrics,function(b,c){var g=e.pagenationCountName+c.pageCount;c.dimDisplayType&&(g=c.dimDisplayType+
":"+g);a.push({name:g+"_"+(e.stringVal+c.percentage),value:1})});return a}}},g={M_CACHE_HIT:{stringVal:"CacheHit",initValue:0,deferLogging:!0,updateFunction:function(a){this.currentValue=0<this.currentValue?this.currentValue+1:1;Twister.printConsoleLogs&&console.log("incrementing cacheHit count to "+this.currentValue)}},M_CACHE_MISS:{stringVal:"CacheMiss",initValue:0,deferLogging:!0,updateFunction:function(a){this.currentValue=0<this.currentValue?this.currentValue+1:1}},M_CACHE_HIT_RATIO:{stringVal:"CacheHitRatio",
initValue:NaN,deferLogging:!0,updateFunction:function(a){a=e.getMetricCurrentValue("M_CACHE_HIT");var c=e.getMetricCurrentValue("M_CACHE_MISS");if(a||c)this.currentValue=Math.round(a/(a+c)*100)}},M_CACHE_USED:{stringVal:"CacheUsed",initValue:0,deferLogging:!0,updateFunction:function(a){this.currentValue||(this.currentValue=this.initValue,this.usedIdCache={});a=a.id;this.usedIdCache.hasOwnProperty(a)||(this.currentValue++,this.usedIdCache[a]=!0)}},M_CACHE_UNUSED:{stringVal:"CacheUnused",initValue:0,
deferLogging:!0,updateFunction:function(a){a=f.twisterModel.pageRefresh.getModelCacheSize("full")-e.getMetricCurrentValue("M_CACHE_USED");this.currentValue=0>a?0:a}},M_CACHE_USED_RATIO:{stringVal:"CacheUsedRatio",initValue:NaN,deferLogging:!0,updateFunction:function(a){a=e.getMetricCurrentValue("M_CACHE_USED");var c=e.getMetricCurrentValue("M_CACHE_UNUSED");if(a||c)this.currentValue=Math.round(a/(a+c)*100)}},M_FIRST_CLICK:{stringVal:"FirstClick",initValue:NaN,deferLogging:!0,updateFunction:function(a){this.firstClickLogged||
(this.currentValue=r(a),Twister.printConsoleLogs&&console.log("first click = "+this.currentValue),this.firstClickLogged=!0)}},M_CLICK_COUNT:{stringVal:"ClickCount",initValue:0,deferLogging:!1,updateFunction:function(a){this.currentValue=1;Twister.printConsoleLogs&&console.log("incrementing click count to "+this.currentValue)}},M_HOVER_COUNT:{stringVal:"HoverCount",initValue:0,deferLogging:!0,updateFunction:function(a){a=a.divMetaData;this.lastHoveredDivMetaData&&a&&this.lastHoveredDivMetaData.dimIndex===
a.dimIndex&&this.lastHoveredDivMetaData.dimValueIndex===a.dimValueIndex||(this.lastHoveredDivMetaData=a,this.currentValue=0<this.currentValue?this.currentValue+1:1,Twister.printConsoleLogs&&console.log("incrementing hover count to "+this.currentValue))}},M_FIRST_HOVER:{stringVal:"FirstHover",initValue:NaN,deferLogging:!0,updateFunction:function(a){this.firstHoverLogged||(this.currentValue=r(a),Twister.printConsoleLogs&&console.log("first hover = "+this.currentValue),this.firstHoverLogged=!0)}},M_OTHER_REQ_DIM_SELECTED_COUNT:{stringVal:"OtherReqDimSelectedCount",
initValue:NaN,deferLogging:!0,updateFunction:function(a){var e=a.newReqDimValueIndex;a=a.oldReqDimValueIndex;"X"===e?this.currentValue||(this.lastReqDimValueIndex=a,this.currentValue=0):this.lastReqDimValueIndex!==e&&(this.lastReqDimValueIndex=e,this.currentValue||0===this.currentValue?this.currentValue++:"X"===a?this.currentValue=0:this.currentValue=1,Twister.printConsoleLogs&&console.log("OtherReqDimSelectedCount incremented to : "+this.currentValue))}},M_REQ_DIM_CHANGE_COUNT:{stringVal:"ReqDimChangeCount",
initValue:0,deferLogging:!0,updateFunction:function(a){this.currentValue?(this.currentValue++,Twister.printConsoleLogs&&console.log("ReqDimChangeCount incremented to : "+this.currentValue)):this.currentValue=1}},M_DIM_SUM_LOAD:{stringVal:"DimSumLoadingDuration",initValue:NaN,deferLogging:!1,updateFunction:function(e){this.currentValue=e[a.TWISTER_EVENT_DATA_DURATION];Twister.printConsoleLogs&&console.log("DimSumLoadingDuration: "+this.currentValue)}},M_NA_CLICK_COUNT:{stringVal:"NAClickCount",initValue:NaN,
deferLogging:!0,updateFunction:function(a){this.currentValue=(this.currentValue||0)+1;Twister.printConsoleLogs&&console.log("NAClick incremented to: "+this.currentValue)}},M_DIM_PAGENATION_COUNT:{stringVal:"DimPageCount",initValue:1,deferLogging:!1,updateFunction:function(e){this.pageCount=e[a.TWISTER_EVENT_DATA_COUNT]||1;this.dimDisplayType=e[a.TWISTER_EVENT_DATA_DISPLAY_TYPE];Twister.printConsoleLogs&&console.log("DimPageCount: "+this.pageCount)},getMetricData:function(){var a=this.stringVal+(this.pageCount||
1);this.dimDisplayType&&(a=this.dimDisplayType+":"+a);return{name:a,value:1}}},M_VIEWED_DIM_COUNT:new v("DimPageCount","ViewedVariationCount"),M_DIM_CLICK_VIEWED_DIM_COUNT:new v("DimPageCount","ViewedVariationCountBeforeClick"),IMMERSIVE_DROPDOWN_ROW_CLICK_COUNT:{stringVal:"ImmersiveDropdownRowClickCount",initValue:0,deferLogging:!1,updateFunction:function(a){this.currentValue?(this.currentValue++,Twister.printConsoleLogs&&console.log("Immsersive Dropdown Row Click Count incremented to : "+this.currentValue)):
this.currentValue=1}},IMMERSIVE_DROPDOWN_OPEN_COUNT:{stringVal:"ImmersiveDropdownOpenedCount",initValue:0,deferLogging:!1,updateFunction:function(a){this.currentValue?(this.currentValue++,Twister.printConsoleLogs&&console.log("Immsersive Dropdown Opened Count incremented to : "+this.currentValue)):this.currentValue=1}},IMMERSIVE_DROPDOWN_CLOSE_COUNT:{stringVal:"ImmersiveDropdownClosedCount",initValue:0,deferLogging:!1,updateFunction:function(a){this.currentValue?(this.currentValue++,Twister.printConsoleLogs&&
console.log("Immsersive Dropdown Closed Count incremented to : "+this.currentValue)):this.currentValue=1}},IMMERSIVE_DROPDOWN_VISIBLE_SCROLLBAR_COUNT:{stringVal:"ImmersiveDropdownScrollBarCount",initValue:0,deferLogging:!1,updateFunction:function(a){this.currentValue?(this.currentValue++,Twister.printConsoleLogs&&console.log("Immsersive Dropdown Visible Scroll Bar Count incremented to : "+this.currentValue)):this.currentValue=1}},IMMERSIVE_DROPDOWN_FULL_SCROLL_COUNT:{stringVal:"ImmersiveDropdownFullScrollCount",
initValue:0,deferLogging:!1,updateFunction:function(a){this.currentValue?(this.currentValue++,Twister.printConsoleLogs&&console.log("Immsersive Dropdown Full Scroll Count incremented to : "+this.currentValue)):this.currentValue=1}},IMMERSIVE_DROPDOWN_SCROLL_COUNT:{stringVal:"ImmersiveDropdownScrollCount",initValue:0,deferLogging:!1,updateFunction:function(a){this.currentValue?(this.currentValue++,Twister.printConsoleLogs&&console.log("Immsersive Dropdown Scroll Count incremented to : "+this.currentValue)):
this.currentValue=1}},M_IMMERSIVE_CLICK_COUNT:{stringVal:"ImmersiveClickCount",initValue:0,deferLogging:!1,updateFunction:function(a){this.currentValue?(this.currentValue++,Twister.printConsoleLogs&&console.log("Immsersive Click Count incremented to : "+this.currentValue)):this.currentValue=1}},M_IMMERSIVE_SWATCH_CLICK_COUNT:{stringVal:"ImmersiveSwatchClickCount",initValue:0,deferLogging:!1,updateFunction:function(a){this.currentValue?(this.currentValue++,Twister.printConsoleLogs&&console.log("Immersive swatch click Count incremented to : "+
this.currentValue)):this.currentValue=1}},M_IMMERSIVE_CLOSE_CLICK_COUNT:{stringVal:"ImmersiveCloseClickCount",initValue:0,deferLogging:!1,updateFunction:function(a){this.currentValue?(this.currentValue++,Twister.printConsoleLogs&&console.log("Immersive modal close click count : "+this.currentValue)):this.currentValue=1}},M_IMMERSIVE_VISIBLE_SCROLL_COUNT:{stringVal:"ImmersiveScrollBarCount",initValue:0,deferLogging:!1,updateFunction:function(a){this.currentValue?(this.currentValue++,Twister.printConsoleLogs&&
console.log("Immersive modal scrollBar count : "+this.currentValue)):this.currentValue=1}},M_IMMERSIVE_FULL_SCROLL_COUNT:{stringVal:"ImmersiveFullScrollCount",initValue:0,deferLogging:!1,updateFunction:function(a){this.currentValue?(this.currentValue++,Twister.printConsoleLogs&&console.log("Immersive modal full scroll down count : "+this.currentValue)):this.currentValue=1}},EXPAND_BUTTON_CLICK_COUNT:{stringVal:"ExpandButtonClickCount",initValue:0,deferLogging:!0,updateFunction:function(e){this.dimDisplayType=
e[a.TWISTER_EVENT_DATA_DISPLAY_TYPE];this.currentValue?(this.currentValue++,Twister.printConsoleLogs&&console.log("Expand Button Click Count incremented to : "+this.currentValue)):this.currentValue=1},getMetricData:function(){var a=this.stringVal;this.dimDisplayType&&(a=this.dimDisplayType+":"+a);return{name:a,value:this.currentValue}}},COLLAPSE_BUTTON_CLICK_COUNT:{stringVal:"CollapseButtonClickCount",initValue:0,deferLogging:!0,updateFunction:function(e){this.dimDisplayType=e[a.TWISTER_EVENT_DATA_DISPLAY_TYPE];
this.currentValue?(this.currentValue++,Twister.printConsoleLogs&&console.log("Collapse Button Click Count incremented to : "+this.currentValue)):this.currentValue=1},getMetricData:function(){var a=this.stringVal;this.dimDisplayType&&(a=this.dimDisplayType+":"+a);return{name:a,value:this.currentValue}}},EXPANDER_COUNT:{stringVal:"ExpanderCount",initValue:0,deferLogging:!0,updateFunction:function(e){this.dimDisplayType=e[a.TWISTER_EVENT_DATA_DISPLAY_TYPE];this.currentValue?(this.currentValue++,Twister.printConsoleLogs&&
console.log("Expander Count incremented to : "+this.currentValue)):this.currentValue=1},getMetricData:function(){var a=this.stringVal;this.dimDisplayType&&(a=this.dimDisplayType+":"+a);return{name:a,value:this.currentValue}}},IS_UNAVAILABLITY_PRESENT:{stringVal:"UnavailabilityPresent",initValue:NaN,deferLogging:!0,updateFunction:function(a){"undefined"===typeof this.currentValue&&(this.currentValue=0,0<a.noOfUnavailableVariations&&(this.currentValue=1),Twister.printConsoleLogs&&console.log("IsUnavailabilityPresent : "+
this.currentValue))}},UNAVAILABILE_VARIATIONS_COUNT:{stringVal:"UnavailableVariations",initValue:NaN,deferLogging:!0,updateFunction:function(a){"undefined"==typeof this.currentValue&&(this.currentValue=a.noOfUnavailableVariations,Twister.printConsoleLogs&&console.log("Possible unavailable variations present are : "+this.currentValue))}},UNAVAILABLE_SWATCH_HOVER_COUNT:{stringVal:"UnavailableSwatchHover",initValue:NaN,deferLogging:!0,updateFunction:function(a){this.currentValue=(this.currentValue||
0)+1;Twister.printConsoleLogs&&console.log("UnavailableSwatchHoverCount is incremented to : "+this.currentValue)}},UNAVAILABLE_SWATCH_PC_CLICK_COUNT:{stringVal:"UnavailableSwatchPCClick",initValue:NaN,deferLogging:!0,updateFunction:function(a){this.currentValue=(this.currentValue||0)+1;Twister.printConsoleLogs&&console.log("UnavailableSwatchPCClickCount is incremented to : "+this.currentValue)}},UNAVAILABLE_SWATCH_TABLET_CLICK_COUNT:{stringVal:"UnavailableSwatchTabletClick",initValue:NaN,deferLogging:!0,
updateFunction:function(a){this.currentValue=(this.currentValue||0)+1;Twister.printConsoleLogs&&console.log("UnavailableSwatchTabletClickCount is incremented to : "+this.currentValue)}}};this.init=function(){m=l!==G?new k(c,this,l):new k(c,this);m.init()};this.logImpression=function(a,e){try{c.each(a.metricList,function(a,b){try{var d=g[b];d.updateFunction(e);g[b].deferLogging||m.logCounters(Array(h(d)))}catch(c){Twister.printConsoleLogs&&console.log("metricUpdate failing for metric = "+b)}})}catch(d){Twister.printConsoleLogs&&
console.log("logImpression failed")}};this.getDataToUploadOnUnload=function(a){this.logImpression(this.eventTypes.PAGE_UNLOAD);var e=[];c.each(g,function(a,g){try{if(g.deferLogging){var b=h(g);b&&(c.isArray(b)?e=c.merge(b,e):e.push(b))}}catch(m){}});return e};this.getMetricCurrentValue=function(a){try{return g[a].hasOwnProperty("currentValue")?g[a].currentValue:g[a].initValue}catch(e){return g[a].initValue}}}});A.when("A").register("twister-availabilty-cache",function(u){return function(k,a){function c(a,
h){var e=a+":"+h,m=a.split("_"),f=m.length,g=-1,q,k;if(null!==l.asinToRenderCache[e]&&l.asinToRenderCache[e]!==G)return l.asinToRenderCache[e];l.intermediateAsinToRenderCache[e]=!0;for(e=0;e<f;e++)if("X"===m[e]){g=e;break}if(-1===g)return q=null,null!=l.twisterVariationsData.dimToAsinMapData[a]&&(q=l.twisterVariationsData.dimToAsinMapData[a]),q;for(var f=l.twisterVariationsData.dimensionValuesData[g].length,d=0;d<f&&(m[g]=d,e=m.join("_"),k=e+":"+h,l.intermediateAsinToRenderCache.hasOwnProperty(k)||
(q=c(e,h),null===q||q===G));d++);return q}function f(a){for(var c in l.intermediateAsinToRenderCache)l.asinToRenderCache[c]=a,delete l.intermediateAsinToRenderCache[c];l.intermediateAsinToRenderCache={}}var l=this;l.twisterVariationsData=k;l.dimensionHierarchyData=a.dimensionHierarchyData;l.isHierarchicalPivoting=a.hierarchicalPivoting;l.dimAvailabilityCache={};l.asinToRenderCache={};l.intermediateAsinToRenderCache={};l.isUpdateCacheReq=!1;l.isDimCombinationAvailable=function(a){var c=a.split("_"),
e,m=-1,f,g;e=c.length;if(null!==l.dimAvailabilityCache[a]&&l.dimAvailabilityCache[a]!==G)return l.dimAvailabilityCache[a];for(g=0;g<e;g++)if("X"===c[g]){m=g;break}if(-1===m)return f=!1,null!==l.twisterVariationsData.dimToAsinMapData[a]&&l.twisterVariationsData.dimToAsinMapData[a]!==G&&(f=!0),l.dimAvailabilityCache[a]=f;e=l.twisterVariationsData.dimensionValuesData[m].length;for(var q=0;q<e&&(c[m]=q,g=c.join("_"),null!==l.dimAvailabilityCache[g]&&l.dimAvailabilityCache[g]!==G?f=l.dimAvailabilityCache[g]:
(f=l.isDimCombinationAvailable(g),l.dimAvailabilityCache[g]=f),!f);q++);return l.dimAvailabilityCache[a]=f};l.gAsinToRender=function(a,h){var e=null,m,v,g=a.split("_"),q=g.length,k=a+":"+h;if(null!==l.asinToRenderCache[k]&&l.asinToRenderCache[k]!==G)return l.isUpdateCacheReq&&(f(l.asinToRenderCache[k]),l.isUpdateCacheReq=!1),l.asinToRenderCache[k];l.isUpdateCacheReq||(l.isUpdateCacheReq=!0);l.intermediateAsinToRenderCache.hasOwnProperty(k)||(e=c(a,h));if(null!==e&&e!==G)return l.isUpdateCacheReq&&
("X"===g[h]?(l.asinToRenderCache[k]=e,l.intermediateAsinToRenderCache={}):f(e),l.isUpdateCacheReq=!1),e;for(k=0;k<q;k++)if(m=l.isHierarchicalPivoting&&l.dimensionHierarchyData&&l.dimensionHierarchyData[k]<l.dimensionHierarchyData[h],k!=h&&"X"!=g[k]&&!m&&(e=g[k],g[k]="X",m=g.join("_"),v=m+":"+h,g[k]=e,!l.intermediateAsinToRenderCache.hasOwnProperty(v)&&(e=c(m,h),null!==e&&e!==G)))return l.isUpdateCacheReq&&(f(e),l.isUpdateCacheReq=!1),e;e=-1;for(k=0;k<q;k++)if(m=l.isHierarchicalPivoting&&l.dimensionHierarchyData&&
l.dimensionHierarchyData[k]<l.dimensionHierarchyData[h],"X"!==g[k]&&k!==h&&!m){e=k;break}if(-1===e)return"";g[e]="X";m=g.join("_");return l.gAsinToRender(m,h)}}});A.when("A","twister-modal","twister-string-constants","twister-logger","aui-style-override").register("twister-dimension-views-ingress",function(u,k,a,c,f){return function(l,r){function h(){u.declarative(a.AUI_EVENT_FOR_INGRESS_PREFIX+l.dimOrder,[a.EVENT_TYPE_CLICK,a.EVENT_TYPE_TOUCHSTART],function(c){c.type===a.EVENT_TYPE_CLICK&&(e.logger.logImpression(e.logger.eventTypes.IMMERSIVE_OPTION_CLICK,
null),e.modalHandle.openTwisterModal())});m(document).ready(function(){m(document).click(function(c){var h=e.modalHandle.twisterModalDiv;m("#"+a.TWISTER_FEATURE_DIV_ID);c.target.id==h.attr("id")||h.has(c.target).length||c.target.id==m(e.ingressDiv).attr("id")||m(e.ingressDiv).has(c.target).length||e.modalHandle.closeTwisterModal()})})}var e=this,m=u.$;e.ingressDiv;e.dimensionData=l;e.modalHandle;if(Twister.multiDimensionWeblabEnabled)var v="ImmersiveMultiDimensionView";else Twister.isImmersiveExperience&&
(v="ImmersiveSwatchSingleDimensionView");e.logger=v!==G?new c(m,this,v):new c(m,this);e.logger.init();e.twisterJSInitData=r;(function(){e.modalHandle=new k(l,e.twisterJSInitData);e.ingressDiv="#"+a.TWISTER_INGRESS_ID_PREFIX+l.dimName;h();var c=e.modalHandle.closeTwisterModal;e.modalHandle.closeTwisterModal=function(a){f.ingressOverride(m(e.ingressDiv));c.apply(e.modalHandle,a)}})()}});A.when("A","twister-utils","scroll-event-handler","twister-modal-resize-helper","twister-string-constants","twister-logger").register("twister-modal",
function(u,k,a,c,f,l){C.MAX_AJAX_CONNECTIONS_ALLOWED=2;return function(a,h){function e(){u.declarative(f.AUI_EVENT_CLOSE_MODAL_PREFIX+a.dimName,[f.EVENT_TYPE_CLICK,f.EVENT_TYPE_TOUCHSTART],function(a){a.type===f.EVENT_TYPE_CLICK&&(b.logger.logImpression(b.logger.eventTypes.IMMERSIVE_MODAL_CLOSE_CLICK,null),b.closeTwisterModal())});w(document).keyup(function(a){27==a.keyCode&&b.closeTwisterModal()});b.twisterModalContentDiv.bind("scroll",function(){w(this).scrollTop()+w(this).innerHeight()>=this.scrollHeight?
(b.logger.logImpression(b.logger.eventTypes.IMMODAL_FULL_SCROLL,null),w(f.ID_SELECTOR+b.twisterModalDivId+" ."+f.CLASSNAME_FOR_STYLERBOTTOM).css("display","none")):(0==w(this).scrollTop()?w(f.ID_SELECTOR+b.twisterModalDivId+" ."+f.CLASSNAME_FOR_STYLERTOP).css("display","none"):w(f.ID_SELECTOR+b.twisterModalDivId+" ."+f.CLASSNAME_FOR_STYLERTOP).css("display","block"),w(f.ID_SELECTOR+b.twisterModalDivId+" ."+f.CLASSNAME_FOR_STYLERBOTTOM).css("display","block"))});b.twisterModalContentDiv.live("DOMMouseScroll mousewheel  wheel",
function(a){var d=w(this),e=this.scrollTop,c=this.scrollHeight,g=d.height(),h=a.originalEvent.wheelDelta;"undefined"==typeof h&&(h=-a.originalEvent.deltaY);var m=function(){a.stopPropagation();a.preventDefault();return a.returnValue=!1};if(!(0<h)&&-h>c-g-e)return d.scrollTop(c),w(f.ID_SELECTOR+b.twisterModalDivId+" ."+f.CLASSNAME_FOR_STYLERBOTTOM).css("display","none"),m();if(0<=h&&h>=e)return w(f.ID_SELECTOR+b.twisterModalDivId+" ."+f.CLASSNAME_FOR_STYLERTOP).css("display","none"),d.scrollTop(0),
m();w(f.ID_SELECTOR+b.twisterModalDivId+" ."+f.CLASSNAME_FOR_STYLERBOTTOM).css("display","block");w(f.ID_SELECTOR+b.twisterModalDivId+" ."+f.CLASSNAME_FOR_STYLERTOP).css("display","block")})}function m(){return k.isPartialState(b.dimensions.length)}function v(){var a=f.AUI_EVENT_VISIBILITY_PREFIX+b.dimName;w(f.ID_SELECTOR+b.twisterModalDivId+" .swatches li").appearedInTwisterImmersiveView({force_process:!0,$window:b.twisterModalDiv,$scrollHandlerDiv:b.twisterModalContentDiv,eventToBeTriggered:a,blockIsAppear:m});
u.on(a,function(a){for(a=a[0].slice(0);a.length;)b.requestStack.push(a.splice(0,b.maxSwatchLimitForImmersive));g()})}function g(){if(!(0>=b.requestStack.length)&&b.noOfOngoingConnections!==MAX_AJAX_CONNECTIONS_ALLOWED){b.noOfOngoingConnections++;for(var a=b.requestStack.shift(),d=[],e=0,c=a.length;e<c;e++){var h=w(a[e]).find(".a-declarative"),m=h.attr("data-action"),h=JSON.parse(h.attr("data-"+m)).dimValueIndex;d.push(h)}x(d);g()}}function q(a){b.initData.fnToDetermineSelectedVariations?"function"===
typeof b.initData.fnToDetermineSelectedVariations&&(b.currentDimCombOnGlance=b.initData.fnToDetermineSelectedVariations.call(b)):(b.glanceViewSelectedDims=DetailPage.StateController.getState().selected_variations,b.currentDimCombOnGlance=DetailPage.StateController.getState().currentDimCombID);return a?b.currentDimCombOnGlance.split("_"):b.currentDimCombOnGlance}function y(a){var d=q(!0);d[a]=b.symbolForTriggeringDim;var d=d.join("_"),e={},c={};a=dimensionValuesList[a];if(!b.mapOfDimToAsinMaps[d]){for(var g=
0,h=a.length;g<h;g++){var m=d.replace(b.symbolForTriggeringDim,g);(m=dimensionToAsinMap[m])?(e[a[g]]=m,c[m]=a[g]):e[a[g]]=""}e&&(b.mapOfDimToAsinMaps[d]=e);c&&(b.mapOfAsinToDimMaps[d]=c)}}function d(a,d,e){e=[];var c=q(!0).slice(0);c[d]=b.symbolForTriggeringDim;c=c.join("_");c=b.mapOfDimToAsinMaps[c];d=dimensionValuesList[d];for(var g=0,h=a.length;g<=h;g++){var m=a[g],f=d[m];f&&((f=c[f])?e.push(f):(m=w(".twister_"+b.dimName+"_"+m+" .twisterSlotDiv"),m.html("<span class='a-color-tertiary'>- -</span>"),
m.css("display","")))}return e}function x(a){var e={};e.indices=a;e.dimTriggeringDimSum=b.dimensionData.dimName;e.dimSubType=b.dimSubType;var c=dimensionsList.indexOf(e.dimTriggeringDimSum);e.dimType=dimensionsDisplayTypesArray[c];y(c);e.asinList=d(a,c,e);0==e.asinList.length?(b.noOfOngoingConnections--,g()):(e.dimCombId=q(!1),e.executeChunk=function(){var a=DetailPage.StateController.getState().currentDimCombID,d=a.split("_"),c=e.dimCombId.split("_");if(e.dimCombId===a)return!0;if(!k.isPartialState(b.dimensions.length)){for(var a=
b.dimensions.length,g=!0,h=0;h<a;h++)if(h!==parseInt(b.dimOrder)&&c[h]!==d[h]){g=!1;break}return g}return!1},e.chunk=function(a,d){a.dimensionValue=dimensionsList[d.dimIndexTriggeringDimSum]+"_"+dimensionValuesList[d.dimIndexTriggeringDimSum].indexOf(b.mapOfAsinToDimMaps[d.hashKey][a.ASIN]);var e=w(".twister_"+a.dimensionValue+" .twisterSlotDiv");e.css("display","");if(Twister.multiDimensionWeblabEnabled){for(var c="",g=0;a.Value.content.twisterSlotDiv[g];)"IMAGE"===b.dimSubType&&(c+="<div>"),c+=
a.Value.content.twisterSlotDiv[g],"IMAGE"===b.dimSubType&&(c+="</div>"),g++;e.html(c)}else e.html(a.Value.content.twisterSlotDiv)},e.success=function(a,d,e,c){(a=b.getWindowWidth())&&a<b.slotsEligibleWidth?b.resizeHelperHandle.fixSize(b.$twisterModalSwatches,b.swatchWrapper,b.swatchDynaWrapper,b.ingressWrapper,b):b.resizeHelperHandle.fixSize(b.$swatches,b.swatchWrapper,b.swatchDynaWrapper,b.ingressWrapper,b);b.noOfOngoingConnections--;g()},e.error=function(){b.noOfOngoingConnections--;g()},e.abort=
function(){b.noOfOngoingConnections--;g()},Twister.dimensionalSummaryModule.fetchDimSumData(e))}var b=this,w=u.$;b.maxSwatchLimitForImmersive;b.dimensionData=a;b.dimOrder=b.dimensionData.dimOrder;b.centerColDivId=f.ID_SELECTOR+f.CENTER_COL_DIV_ID;b.centerColDiv=w(b.centerColDivId);b.twisterModalDivId=f.TWISTER_MODAL_ID_PREFIX+b.dimensionData.dimName;b.twisterModalDiv=w(f.ID_SELECTOR+b.twisterModalDivId);b.variationsPrefix="variation_";b.swatchWrapperClassForAnimation="twisterSwatchWrapper";b.swatchWrapper=
".twisterSwatchWrapper_"+b.dimOrder;b.swatchDynaWrapper="twisterSwatchWrapperDynaStyle_"+b.dimOrder;b.ingressWrapper="twisterIngressWrapper_"+b.dimOrder;b.glanceSwatchContainer=f.ID_SELECTOR+b.variationsPrefix+b.dimensionData.dimName;b.twisterModalContentDiv=w(f.ID_SELECTOR+f.MODAL_CONTENTDIV_PREFIX+b.dimensionData.dimName);b.twisterModalHeaderDiv=w(f.ID_SELECTOR+f.MODAL_HEADER_PREFIX+b.dimensionData.dimName);b.resizeHelperHandle;b.twisterFeatureDiv=w(f.ID_SELECTOR+f.TWISTER_FEATURE_DIV_ID);b.$swatches=
w(b.swatchWrapper);b.$twisterModalSwatches=w(".twisterModal "+b.swatchWrapper);b.$subNav=w(f.ID_SELECTOR+"nav-subnav");b.modalWidth;b.contentDivWidth;b.contentDivHeight;b.requestStack=[];b.noOfOngoingConnections=0;b.isModalOpen=0;b.isSlotRowPopulated=!1;b.showModalFadeDuration=500;b.isIE8=w("html").hasClass("a-lt-ie9");b.slotsEligibleWidth=1100;b.windowWidth=C.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;b.executeResizeSwatchesForThin=0;b.logger=new l(w,this,Twister.multiDimensionWeblabEnabled?
"ImmersiveMultiDimensionView":"ImmersiveSwatchSingleDimensionView");b.logger.init();b.twisterJSInitData=h;b.symbolForTriggeringDim="*";b.currentDimCombOnGlance="";b.mapOfDimToAsinMaps={};b.mapOfAsinToDimMaps={};b.dimName=b.dimensionData.dimName;b.dimValuesDisplayData=b.dimensionData.dimValuesDisplayData;b.noOfDimValues=b.dimValuesDisplayData.length;b.maxSwatchLimitForImmersive=b.dimensionData.maxSwatchLimitForImmersive;b.dimSubType=b.dimensionData.dimSubType;b.dimensions=b.twisterJSInitData.dimensions;
dimensionValuesList=b.twisterJSInitData.dimensionValuesData;dimensionDisplayLabels=b.twisterJSInitData.dimensionsDisplay;dimensionToAsinMap=b.twisterJSInitData.dimToAsinMapData;asinToDimIndexMapData=b.twisterJSInitData.asinToDimIndexMapData;dimensionsList=b.twisterJSInitData.dimensions;dimensionsDisplayTypesArray=h.dimensionsDisplayType;b.initData={};b.initData.scopeSuffix="twister";b.symbolForTriggeringDim="*";b.resizeHelperHandle=new c;b.closeTwisterModal=function(){b.isModalOpen&&(k.enableTwisterDiv(),
b.isIE8?b.twisterModalDiv.css("display","none"):b.twisterModalDiv.fadeOut(b.showModalFadeDuration),b.isModalOpen=0)};b.resizeSwatchesForThinWidths=function(){var a=document.getElementById("twister").querySelectorAll(b.swatchWrapper),d=a.length;b.getWindowWidth();if(b.executeResizeSwatchesForThin)for(var e=b.executeResizeSwatchesForThin=0;e<d;e++)w(a[e]).addClass(f.CLASSNAME_FOR_THIN_WIDTH_OVERRIDE)};b.openTwisterModal=function(){if("centerCol"!==b.twisterModalDiv.parent().attr("id"))w(b.centerColDivId+
" > hr").first().after(b.twisterModalDiv),e(),a.isSlotsEnabled&&v();else{var d=f.AUI_EVENT_VISIBILITY_PREFIX+b.dimName;w(f.ID_SELECTOR+b.twisterModalDivId+" .swatches li").forceAppear({force_process:!0,$window:b.twisterModalDiv,$scrollHandlerDiv:b.twisterModalContentDiv,eventToBeTriggered:d,blockIsAppear:m})}b.fixModalSwatchesForThinWidths();b.twisterModalDiv.css("display","block");d=b.twisterModalDiv.css("transition-duration");b.$twisterModalSwatches.removeClass(b.swatchWrapperClassForAnimation);
d!=G&&b.twisterModalDiv.css("transition-duration","0s");b.resizeHelperHandle.fixSize(b.$swatches,b.swatchWrapper,b.swatchDynaWrapper,b.ingressWrapper);b.twisterModalDiv.css({"z-index":"290"});var c,g=w(b.glanceSwatchContainer+" li"),h;h=g.first()[0].getBoundingClientRect();c=h.left;for(var q=h.top,l=0,n=1,g=g.length;n<g;n++){var y;y=w(b.glanceSwatchContainer+" li:eq("+n+")")[0].getBoundingClientRect();if(5<Math.abs(q-y.top))break;else l=y.right}c=0<l?l-c+55:h.right-c+55;b.setModalWidth(c);b.twisterModalContentDiv.css({"max-height":"420px"});
h=w(".twisterModal_innerDiv ul").outerHeight()>w(".twisterModal_innerDiv").outerHeight()+15;-1<navigator.platform.indexOf("Win")&&h&&(c=parseInt(c)+25+"px",b.twisterModalDiv.css("width",c));h&&b.logger.logImpression(b.logger.eventTypes.IMMODAL_VISIBLE_SCROLLBAR,null);b.resizeSwatchesForThinWidths();b.twisterModalDiv.offset();b.twisterModalDiv.outerHeight();500<w(C).height()&&(b.isIE8?(q=b.twisterModalDiv.offset().top+document.documentElement.scrollTop+b.twisterModalDiv.outerHeight(),c=b.twisterModalDiv.offset().top+
document.documentElement.scrollTop,h=b.$subNav.offset().top+document.documentElement.scrollTop+b.$subNav.outerHeight()):(q=b.twisterModalDiv.offset().top+b.twisterModalDiv.outerHeight(),c=b.twisterModalDiv.offset().top,h=b.$subNav.offset().top+b.$subNav.outerHeight()),q>w(C).height()&&(q-=w(C).height(),c=c-q-30,0<q&&(c>h?b.twisterModalDiv.offset({top:c}):b.twisterModalDiv.offset({top:h+20}))));q=b.glanceSwatchContainer+" ."+b.ingressWrapper+":first";h="#"+b.twisterModalDivId+":first";b.isIE8?(offSetTopIngress=
w(q).offset().top+document.documentElement.scrollTop,offSetTopModal=w(h).offset().top+document.documentElement.scrollTop):(offSetTopIngress=w(q).offset().top,offSetTopModal=w(h).offset().top);c=w(h).outerHeight();q=w(q).outerHeight();c=offSetTopIngress+q-(offSetTopModal+c);0<c&&(c+=offSetTopModal,w(h).offset({top:c}));k.disableTwisterDiv();b.twisterModalContentDiv.get(0).scrollHeight>b.twisterModalContentDiv.get(0).clientHeight?w(f.ID_SELECTOR+b.twisterModalDivId+" ."+f.CLASSNAME_FOR_STYLERBOTTOM).css("display",
"block"):w(f.ID_SELECTOR+b.twisterModalDivId+" ."+f.CLASSNAME_FOR_STYLERBOTTOM).css("display","none");b.twisterModalDiv.css("display","none");d!=G&&(b.$twisterModalSwatches.addClass(b.swatchWrapperClassForAnimation),b.twisterModalDiv.css("transition-duration",d));b.twisterModalDiv.fadeIn(b.showModalFadeDuration);b.isModalOpen=1};b.fixModalSwatchesForThinWidths=function(){var a=document.getElementById("twister").querySelectorAll(b.swatchWrapper),d=a.length,e=b.getWindowWidth();if(e&&e<b.slotsEligibleWidth)for(b.executeResizeSwatchesForThin=
1,e=0;e<d;e++)w(a[e]).removeClass(f.CLASSNAME_FOR_THIN_WIDTH_OVERRIDE)};b.getWindowWidth=function(){return C.innerWidth||document.documentElement.clientWidth||document.body.clientWidth};b.setModalWidth=function(a){var d=b.twisterFeatureDiv.css("width");a=parseInt(a);b.twisterModalDiv.css({width:a?a+"px":d});d=(a?a:d)-30;w(f.ID_SELECTOR+b.twisterModalDivId+" ."+f.CLASSNAME_FOR_STYLERBOTTOM).css("width",d+"px");w(f.ID_SELECTOR+b.twisterModalDivId+" ."+f.CLASSNAME_FOR_STYLERTOP).css("width",d+"px")}}});
A.when("A","twister-string-constants").register("twister-utils",function(u,k){var a=u.$,c=this,f={};c.windowWidth=C.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;c.immersiveTwisterOverlay=a("#"+k.TWISTER_FEATURE_DIV_ID+" #"+k.IMMERSIVE_TWISTER_OVERLAY);c.twisterFeatureDiv=a("#"+k.TWISTER_FEATURE_DIV_ID);(function(){for(var a="Array Object String Date RegExp Function Boolean Number Null Undefined".split(" "),c=0,h=a.length;c<h;c++)f["is"+a[c]]=function(a){return function(c){return Object.prototype.toString.call(c).slice(8,
-1)===a}}(a[c])})();return{enableTwisterDiv:function(){c.immersiveTwisterOverlay.css({opacity:"0",position:"absolute",width:"0px",height:"0px"})},disableTwisterDiv:function(){var a=c.twisterFeatureDiv.get(0).clientWidth,f=c.twisterFeatureDiv.get(0).clientHeight;c.immersiveTwisterOverlay.css({opacity:"0.8",position:"absolute",width:a,height:f,"background-color":"white","z-index":10})},isSwatchSelected:function(a,c){var h=Twister.isImmersiveExperience?"."+k.TWISTER_SWATCH_CLASS_PREFIX+c.dimensionsMap[a[k.STRING_DIM_INDEX]]+
"_"+a[k.STRING_DIM_VALUE_INDEX]:"#"+c.dimensionsMap[a[k.STRING_DIM_INDEX]]+"_"+a[k.STRING_DIM_VALUE_INDEX],e=[],m;if(u.$(h).is("li")){e=u.$(h);!Twister.isImmersiveExperience||0<e.length||(e=u.$("."+k.TWISTER_SWATCH_CLASS_PREFIX+c.dimensionsMap[a[k.STRING_DIM_INDEX]]+"_"+a[k.STRING_DIM_VALUE_INDEX]));for(var e=e.get(0).className.split(" "),h=0,f=e.length;h<f;h++){var g=e[h];if(0===g.indexOf("swatch")){m=g;break}}m!==k.CLASS_FOR_SWATCH_UNAVAILABLE_HOVER&&m!==k.CLASS_FOR_SWATCH_UNAVAILABLE||u.$("#twisterPopover.twisterPopoverSkin").hide();
return m===k.CLASS_FOR_SWATCH_SELECT}return!1},isPartialState:function(a){for(var c=DetailPage.StateController.getState().currentDimCombID.split("_"),h=!1,e=0;e<a;e++)if("X"===c[e]){h=!0;break}return h},getImmersivePartialStateBannerContent:function(a,c){for(var h="",e=Twister.immersivePartialStateMessage,m=a.dimensionSelectionData,f=a.dimensionsDisplay,g=0;g<m.length;g++)g!==c&&0===m[g][k.STRING_IS_SELECTED]&&(h=h?h+", "+f[g]:f[g]);return e.replace("dimName",h)},getImmersiveFullStateBannerContent:function(a,
c){for(var h="",e=Twister.immersiveFullySelectedStateMessage,m=a.dimensionSelectionData,f=a.dimensions,g=a.dimensionsDisplay,q=DetailPage.StateController.getState().selected_variations,y=0;y<m.length;y++)y!==c&&1===m[y][k.STRING_IS_SELECTED]&&(h=h?h+", "+g[y]+" "+q[f[y]]:g[y]+" "+q[f[y]]);return e.replace("dimName",h)},isSmallerWidthScreen:function(){return 1100>c.windowWidth?1:0},getAttachedClass:function(c,f){var h=c[k.STRING_DIM_VALUE_INDEX],e="#"+f+"_"+h;if(u.$(e).is("li")){var m=[],v,m=u.$(e);
!Twister.isImmersiveExperience||0<m.length||(m=a("."+k.TWISTER_SWATCH_CLASS_PREFIX+f+"_"+h));m=m.get(0).className.split(" ");h=0;for(e=m.length;h<e;h++){var g=m[h];if(0===g.indexOf("swatch")){v=g;break}}return v}e=Twister.isImmersiveExperience?k.IMMERSIVE_DROPDOWN_ROW_PREFIX+f+"_"+h:k.NATIVE_DROPDOWN_DIV_PREFIX+f+"_"+h;return u.$(e).attr("class")},htmlUnescape:function(a){return String(a).replace(/&quot;/g,'"').replace(/&#39;/g,"'").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")},
getDimStyleData:function(a,c,h,e,m){a=a.split("_");for(var f=[],g=a.slice(0),q,y,d=0;d<c;d++)y={},a[h]===d.toString()?q=k.STYLE_CLASS_TYPE_FOR_SELECTED:(g[h]=d,q=g.join("_"),q=(q=e.isDimCombinationAvailable(q))?k.STYLE_CLASS_TYPE_FOR_AVAILABLE:k.STYLE_CLASS_TYPE_FOR_INAVLID),q=m[q],y.style=q,f[d]=y;return f},getVisibleTableRows:function(c,f){var h=[],e=c.getBoundingClientRect();f||(f=a(c).find("tr"));if(f.length)for(var m=0;m<f.length;m++){var v=f.get(m),g=v.getBoundingClientRect(),q=(g.bottom-g.top)/
2,k=e.bottom+q;e.top-q<g.top&&k>g.bottom&&h.push(v);if(e.bottom<g.top)break}return h},reconstructCombinationWithDimValue:function(a,c,h){if(!a)return a;var e=a.split(k.CHAR_UNDERSCORE);if(c>=e.length)return a;e[c]=h;return e.join(k.CHAR_UNDERSCORE)},isTouchDevice:function(){return u.capabilities.touch},typeChecker:f,getQueryParams:function(c){c=c===G?{}:c;var f={},h=decodeURIComponent(C.location.href).match(/^.*?\?(.*?)(#.*)?$/);if(null===h||2>h.length||h[1]===G)return{};h=h[1].split("&");a.each(h,
function(a,h){var v=h.split("=");2>v.length||c.hasOwnProperty(v[0])||(f[v[0]]=v[1])});return f},stringTrim:function(a){var c=/^\s+/,h=/\s+$/;return String.prototype.trim?String.prototype.trim.call(a):a.replace(c,"").replace(h,"")}}});A.when("A").register("twister-string-constants",function(u){return{YES:"YES",NO:"NO",MTYPE_PARENT:"parent",MTYPE_PARTIAL:"partial",MTYPE_FULL:"full",MTYPE_MASTER:"master",AUI_DROPDOWN_EVENT_PREFIX:"a:dropdown:selected:",AUI_EVENT_FOR_SWATCHTHUMB:"swatchthumb-action",
CHAR_SEMICOLON:":",CHAR_UNDERSCORE:"_",CLASS_FOR_DROPDOWN_UNAVAILABLE:"dropdownUnavailable",CLASS_FOR_NEW_TWISTER_EVDD:"#newTwisterEVDD",CLASS_FOR_NON_JS_EVDD:"#nonJSEVDD",CLASS_FOR_SWATCH_AVAILABLE:"swatchAvailable",CLASS_FOR_SWATCH_HOVER:"swatchHover",CLASS_FOR_SWATCH_SELECT:"swatchSelect",CLASS_FOR_SWATCH_UNAVAILABLE:"swatchUnavailable",CLASS_FOR_SWATCH_UNAVAILABLE_HOVER:"swatchUnavailableHover",AUI_CLASS_FOR_SWATCH_UNAVAILABLE:"a-button-unavailable",AUI_CLASS_FOR_SWATCH_SELECT:"a-button-selected",
CLASS_FOR_VODD_AVAILABLE:"voddAvailable",CLASS_FOR_VODD_HOVER:"voddHover",CLASS_FOR_VODD_SELECT:"voddSelect",CLASS_FOR_VODD_UNAVAILABLE:"voddUnavailable",CLASS_NAME_FOR_SELCTED_DROPDOWN_OPTION:"dropdownSelect",DROPDOWN_DIV_NAME:"dropdown_selected_",EVENT_TYPE_SHOWPOPOVER:"showPopover",EVENT_TYPE_HIDEPOPOVER:"hidePopover",EVENT_TYPE_UPDATEPOPOVERPOSITION:"updatePopoverPosition",EVENT_TYPE_DROPDOWN_CHANGE:"dropdownChange",EVENT_TYPE_CLICK:"click",EVENT_TYPE_MOUSEENTER:"mouseenter",EVENT_TYPE_MOUSELEAVE:"mouseleave",
EVENT_TYPE_MOUSEDOWN:"mousedown",EVENT_TYPE_MOUSEOUT:"mouseOut",EVENT_TYPE_MOUSEOVER:"mouseOver",EVENT_TYPE_TOUCHSTART:"touchstart",EVENT_TYPE_TOUCHEND:"touchend",EVENT_TYPE_TOUCHMOVE:"touchmove",EVENT_TYPE_KEYPRESS:"keypress",ID_SELECTOR:"#",CLASS_SELECTOR:".",TWISTER_POPOVER:"twisterPopover",INDEX_FOR_SELECT_OPTION:"-1",INIT_DATA_ASIN_TO_DIM_INDEX_MAP:"asinToDimIndexMapData",INIT_DATA_DELETED_LANDING_ASIN_INFO:"deletedLandingAsinInfo",INIT_DATA_DIM_TO_ASIN_MAP:"dimToAsinMapData",INIT_DATA_DIMENSION_VALUES_DISPLAY_DATA:"dimensionValuesDisplayData",
INIT_DATA_DIMENSIONS_DISPLAY:"dimensionsDisplay",INIT_DATA_DIMENSIONS_DISPLAY_TYPE_MAP:"dimensionsDisplayType",INIT_DATA_DIMENSIONS_MAP:"dimensions",INIT_DATA_VARIATIONS_DISPLAY_LABELS:"variationDisplayLabels",INIT_DATA_MAX_POPOVER_HEIGHT:"maxPopoverHeight",INIT_DATA_VISIBLE_ROW_COUNT:"visibleRowCount",INIT_DATA_POPOVER_POSITION:"popoverPosition",INIT_DATA_ANIMATE_BUTTON_CONTENT:"animateButtonContent",INIT_DATA_DISPLAY_TYPE_PROPERTIES:"displayTypeProperties",NATIVE_DROPDOWN_DIV_PREFIX:"#native_",
STRING_CSS_CLASS:"css_class",STRING_DIM_COMB_ID:"dimCombID",STRING_DIM_DATA:"dimData",STRING_DIM_INDEX:"dimIndex",STRING_DIM_NAME:"dimName",STRING_DIM_ORDER:"dimOrder",STRING_DIM_VALUE_INDEX:"dimValueIndex",STRING_DIMENSION_DISPLAY_MAP:"dimensionDisplayMap",STRING_DIMENSION_DISPLAY_STRING:"dimensionDisplayString",STRING_DIMENSION_SELECTION_DATA:"dimensionSelectionData",STRING_DIMENSION_VALUES_DATA:"dimensionValuesData",STRING_DIMENSION_VALUES_DATA_GLOBAL:"dimensionValuesDataGlobal",STRING_DIMENSIONS_MAP:"dimensionsMap",
STRING_DISPLAY_CONFIG_STYLES_DATA:"displayConfigStylesData",STRING_EVENT_DATA:"eventData",STRING_EVENT_DIM_DATA:"dimData",STRING_EVENT_DIM_INFO:"eventDimInfo",STRING_EVENT_DIV_METADATA:"divMetaData",STRING_EVENT_POPOVER_DATA:"popoverData",STRING_EVENT_TYPE:"eventType",STRING_HIDE_POPOVER:"hidePopover",STRING_HOVER_MS:"hoverMS",STRING_IS_REQUIRED:"isRequired",STRING_IS_SELECTED:"isSelected",STRING_NATIVE_CSS_CLASS:"native_css_class",STRING_SHOW_DIM_SECOND_UNAVAILABLE_POPOVER:"showDimSecondUnavailablePopover",
STRING_STYLE:"style",STRING_TWISTER_CONTROLLER_HANDLE:"twisterControllerHandle",STRING_TWISTER_INITIAL_STATE_KEY:"twisterInitialState",STRING_UNAVAILABLE_POPOVER_STRING_VALUE:"unavailablePopOverStringValue",STRING_ACCESSIBILITY_CURRENT_SELECTION:"twisterAccessibilityCurrentSelection",STRING_USE_MS:"useMS",STYLE_CLASS_TYPE_FOR_AVAILABLE:"available",STYLE_CLASS_TYPE_FOR_INAVLID:"invalid",STYLE_CLASS_TYPE_FOR_SELECTED:"selected",TWISTER_DIMENSION_VIEW_DROPDOWN:"dropdown",TWISTER_DIMENSION_VIEW_EVDD:"etdd",
TWISTER_DIMENSION_VIEW_SINGLETON:"singleton",TWISTER_DIMENSION_VIEW_SWATCH:"swatch",TWISTER_DIMENSION_VIEW_VODD:"vodd",TWISTER_DIMENSION_VIEW_COUNTER:"counter",TWISTER_DIMENSION_VIEW_SHELF:"shelf",TWISTER_EVENT_DATA_DIV_METADATA:"divMetaData",TWISTER_EVENT_DATA_DISPLAY_TYPE:"dimDisplayType",TWISTER_EVENT_DATA_TIME:"time",TWISTER_EVENT_DATA_DURATION:"duration",TWISTER_EVENT_DATA_COUNT:"count",TWISTER_EVENT_DATA_PERCENTAGE:"percentage",TWISTER_EVENT_DATA_DIM_INDEX:"dimIndex",MODAL_SWATCH_PREFIX:"modal_",
STRING_MAX_SWATCHES_IMMERSIVE_VIEW:"maxSwatchesForImmersiveView",TWISTER_SWATCH_CLASS_PREFIX:"twister_",PRICE_SLOT_CLASS_NAME:"twister_swatch_price",CLASS_FOR_PRICE_SECONDARY:"a-color-secondary",CLASS_FOR_PRICE_SELECTED:"a-color-price",TWISTER_MODAL_ID_PREFIX:"twister_modal_",TWISTER_INGRESS_ID_PREFIX:"twister_ingress_",AUI_EVENT_FOR_INGRESS_PREFIX:"twister-ingress-click-",TWISTER_FEATURE_DIV_ID:"twister_feature_div",IMMERSIVE_TWISTER_OVERLAY:"immersiveTwisterOverlay",CENTER_COL_DIV_ID:"centerCol",
MODAL_CONTENTDIV_PREFIX:"twister_modal_innerDiv_",MODAL_HEADER_PREFIX:"twister_modal_header_",IMMERSIVE_DROPDOWN_ROW_PREFIX:"twister_idd_",DYNAMIC_STYLE_RULES_ID:"twisterSwatchWrapperDynaStyle",CLASSNAME_FOR_STYLERBOTTOM:"twisterModal_stylerBottom",CLASSNAME_FOR_STYLERTOP:"twisterModal_stylerTop",CLASSNAME_FOR_SWATCH:"twisterSwatchWrapper",CLASSNAME_FOR_INGRESS:"twisterIngressWrapper",AUI_EVENT_CLOSE_MODAL_PREFIX:"close-twisterModal-",AUI_EVENT_VISIBILITY_PREFIX:"twister-appear-",CLASSNAME_FOR_THIN_WIDTH_OVERRIDE:"thinWidthOverride",
DIMENSION_SUB_TYPE:"dimensionDisplaySubType",AUI_EVENT_FOR_COUNTER:"twister_counter-action",EXPANDED_VIEW_ENABLED:"expandedViewEnabled",MIN_ASINS_FOR_EXPANDED_VIEW:"minAsinForExpandedView",MIN_ASINS_FOR_EXPANDED_VIEW_TEXT:"minAsinForExpandedViewText",MIN_ASINS_FOR_EXPANDED_VIEW_IMAGE:"minAsinForExpandedViewImage",MIN_ASINS_FOR_EXPANDED_SCROLL:"minAsinForExpandedScroll",MIN_ASINS_FOR_EXPANDED_SCROLL_TEXT:"minAsinForExpandedScrollText",MIN_ASINS_FOR_EXPANDED_SCROLL_IMAGE:"minAsinForExpandedScrollImage",
SUFFIX_FOR_DROPDOWN_PANEL_PLACEHOLDER:"_placeHolderDivForDD",DIMENSION_VALUE_HAS_ICON:"isIconPresentForDimensionValue",HIDDEN_DIMENSION_DISPLAY_TYPE:"hidden"}});A.when("A").register("aui-style-override",function(u){return{doOverride:function(){},ingressOverride:function(){}}});A.when("A").register("twister-thumbnailModule",function(u){var k=u.$;return{attach:function(a){var c=k("#dropdown_selected_thumbnail_"+a);a=k("#dropdown_selected_"+a+" .a-button-inner");0<c.length&&0<a.length&&(c.detach(),a.append(c),
"#"!==c.attr("src")&&c.show())},update:function(a){var c=k("#native_dropdown_selected_"+a).val().split(",")[0];"undefined"!==typeof c&&"-1"!==c&&(c=k("#native_"+a+"_"+c),c=0<c.length?c.attr("data-a-image-source"):"",a=k("#dropdown_selected_thumbnail_"+a),0<a.length&&""!==c?(a.attr("src",c),a.show()):a.hide())},preloadAllThumbnails:function(a){if(a){var c=k("#native_dropdown_selected_"+a+" option");a=k("#dropdown_selected_"+a).attr("data-a-class");c&&a&&-1!==a.indexOf("twister-image-dropdown")&&k.each(c,
function(a,c){var r=c.getAttribute("data-a-image-source");r&&((new Image).src=r)})}}}});A.when("A","twister-string-constants","scroll-event-handler").execute(function(u,k,a){(function(c){function f(a){function e(d,g){var b=c(g).get(0).getBoundingClientRect(),h=a.$window.get(0).getBoundingClientRect(),f=h.right-h.left,p=h.bottom-h.top;return h.top<b.top&&b.top<h.top+p&&h.left<b.left&&b.left<h.left+f}h=!1;for(var g=0,f=a.selector.length;g<f;g++){var l=[];a.blockIsAppear!==G&&a.blockIsAppear()||(l=c(a.selector[g]).filter(function(){return c(this).is(e)}).not(r));
0<l.length&&(u.trigger(a.eventToBeTriggered,[l.clone()]),r=r.add(l))}}var l=[],r=c(),h=!1,e={interval:250,force_process:!1};c.fn.extend({appearedInTwisterImmersiveView:function(m){var r=c.extend({},e,m||{}),g=this.selector||this;r.selector=[];r.selector[0]=g;var q=function(){h||(h=!0,setTimeout(function(){f(r)},r.interval))};new a(200,m.$scrollHandlerDiv,q);m.$window.resize(q);r.force_process&&setTimeout(function(){f(r)},r.interval);l.push(g);return c(g)},forceAppear:function(a){var h=c.extend({},
e,a||{});a=this.selector||this;h.selector=[];h.selector[0]=a;setTimeout(function(){f(h)},h.interval)},invalidateAppearedAlreadyCache:function(a){r=r.not(this.selector)}})})(u.$)});A.when("A","twister-utils","twister-string-constants","twister-expander").register("twister-counter",function(u,k,a,c){return function(f,l){function r(b){t=q(a.ID_SELECTOR+b.data.dimValueSelectedID);var d=k.reconstructCombinationWithDimValue(g.currDimCombID,b.data[a.TWISTER_EVENT_DATA_DIM_INDEX],b.data[a.STRING_DIM_VALUE_INDEX]);
g.currDimCombID!=d&&g.twisterControllerHandle&&g.twisterControllerHandle.handleClick(b.data)}function h(d){var e=d[a.STRING_EVENT_DATA][a.STRING_EVENT_DIV_METADATA][a.TWISTER_EVENT_DATA_DISPLAY_TYPE];H=q(b+d.dimCombID.split(a.CHAR_UNDERSCORE)[g.dimOrder]);(I=q(".vodd-dim-wrapper").length)&&H.hasClass("counter_unavailable")&&e===a.TWISTER_DIMENSION_VIEW_COUNTER&&u.animate(q(".vodd-dim-wrapper"),{scale:1.1},150,"ease-in",function(){u.animate(q(".vodd-dim-wrapper"),{scale:1},100,"ease-out",function(){})})}
function e(a,d){var e=q(b+d);a?e.addClass("hoverSwatch"):e.removeClass("hoverSwatch")}function m(){"undefined"===typeof g.$variationList&&(g.$variationList=q("#"+a.TWISTER_DIMENSION_VIEW_COUNTER+"-"+g.dimName+" .counterSwatch"));for(var b=g.$variationList,d=g.initialTwisterState.getCurrentDimCombID(),e=parseInt(g.dimOrder),c=[],h=0;h<b.length;h++){5===c.length&&(v(c),c=[]);var p;(p=b[h].id)?(p=p.split(a.CHAR_UNDERSCORE),p=p[p.length-1]):p=-1;p=k.reconstructCombinationWithDimValue(d,e,p);(p=g.dimensionToAsinMap[p])?
c.push(p):q(b[h]).addClass("counter_unavailable")}0<c.length&&v(c)}function v(a){var d=z.createFunctionTimer(z.eventTypes.DIM_SUM_LOAD);d.start();var e=function(){d.stop()};0<a.length&&Twister.dimensionalSummaryModule.fetchDimSumData({indices:G,asinList:a,dimTriggeringDimSum:g.dimName,dimSubType:g.dimSubType,dimType:g.dimType,chunk:function(a){var d=parseInt(A[a.ASIN][parseInt(g.dimOrder)]),d=q(b+d);0<a.Value.content.twisterSlotDiv.length&&d.removeClass("counter_unavailable")},success:function(b,
a,d,c){e()},error:e,abort:e})}var g=this,q=u.$,y=q(a.ID_SELECTOR+"expanderButton"),d=q(a.ID_SELECTOR+"collapseButton"),x,b,w,B,p,t,F,H,I,n,z,A;g.updateView=function(d){if(d[a.STRING_EVENT_TYPE]===a.EVENT_TYPE_CLICK&&g.currDimCombID!=d[a.STRING_DIM_COMB_ID]){var e=d[a.STRING_EVENT_DATA][a.STRING_EVENT_DIM_INFO][a.STRING_DIMENSION_VALUES_DATA][g.dimOrder];F.css("z-index",0);t.css("z-index",1);x.html(e);t=q(b+d.dimCombID.split(a.CHAR_UNDERSCORE)[g.dimOrder]);t.removeClass("hoverSwatch");t.addClass("selectedSwatch");
F.removeClass("selectedSwatch");h(d);m();g.currDimCombID=d[a.STRING_DIM_COMB_ID];u.trigger("counter:select",g.currDimCombID);null!=n&&(n.updateSelectedVariation(g.currDimCombID,t),n.isCollapsed&&p&&n.handleVariationSwap(p),n.isCollapsed?n.handleVariationSwap(!0):n.scrollVariationIntoView());F=t}};g.selectCounterVariationAtIndex=function(a){p=!0;q(b+a).children().click()};g.getCurrentSelectedIndex=function(){return parseInt(g.currDimCombID,10)};g.expandCounter=function(){null!=n&&n.isCollapsed&&n.handleExpand()};
g.onInitializeTwister=function(){m()};g.dimOrder=l[a.STRING_DIM_ORDER];g.dimName=l[a.STRING_DIM_NAME];g.dimensionsMap=l[a.STRING_DIMENSIONS_MAP];g.dimNameDisplayString=l[a.STRING_DIMENSION_DISPLAY_STRING];g.dimValuesDisplayData=l[a.STRING_DIMENSION_VALUES_DATA];g.twisterControllerHandle=l[a.STRING_TWISTER_CONTROLLER_HANDLE];g.initialTwisterState=l[a.STRING_TWISTER_INITIAL_STATE_KEY];g.dimensionToAsinMap=g.twisterControllerHandle.twisterJSInitData.dimToAsinMapData;f.useCounterConfig?(g.expandedViewEnabled=
f[a.EXPANDED_VIEW_ENABLED],g.minAsinsForExpandedView=f[a.MIN_ASINS_FOR_EXPANDED_VIEW],g.minAsinsForExpandedScroll=f[a.MIN_ASINS_FOR_EXPANDED_SCROLL]):(g.displayTypeProperties=f[a.INIT_DATA_DISPLAY_TYPE_PROPERTIES][g.dimOrder],g.expandedViewEnabled=g.displayTypeProperties[a.EXPANDED_VIEW_ENABLED],g.minAsinsForExpandedView=g.displayTypeProperties[a.MIN_ASINS_FOR_EXPANDED_VIEW],g.minAsinsForExpandedScroll=g.displayTypeProperties[a.MIN_ASINS_FOR_EXPANDED_SCROLL]);g.dimSubType=l.dimensionDisplaySubType;
g.currDimCombID=g.initialTwisterState.getCurrentDimCombID();z=g.twisterControllerHandle.logger;A=g.twisterControllerHandle.twisterJSInitData.asinToDimIndexMapData;x=q(a.ID_SELECTOR+"counter-label-"+g.dimName+" .selection");b=a.ID_SELECTOR+g.dimName+a.CHAR_UNDERSCORE;w=q(a.ID_SELECTOR+"counterSwatchSection-"+g.dimName);B=g.dimValuesDisplayData.length;F=q(b+g.currDimCombID.split(a.CHAR_UNDERSCORE)[g.dimOrder]);t=q(b+g.currDimCombID.split(a.CHAR_UNDERSCORE)[g.dimOrder]);p=!1;(function(){q(".counterSwatch").each(function(b){b=
q(this);b.parent().is("a")&&b.unwrap()})})();(function(){var d=a.AUI_EVENT_FOR_COUNTER;if(k.isTouchDevice()){var c=!1,h="";u.declarative(d,[a.EVENT_TYPE_CLICK,a.EVENT_TYPE_TOUCHSTART,a.EVENT_TYPE_TOUCHEND,a.EVENT_TYPE_TOUCHMOVE],function(b){b.data&&(b.data.dimDisplayType=a.TWISTER_DIMENSION_VIEW_COUNTER);b.type===a.EVENT_TYPE_CLICK?r(b):b.type===a.EVENT_TYPE_TOUCHSTART?(h=b.data.dimValueSelectedID,c=!1):b.type===a.EVENT_TYPE_TOUCHMOVE?c=!0:b.type!==a.EVENT_TYPE_TOUCHEND||c||h!==b.data.dimValueSelectedID||
(h="",c=!1,r(b));p=!1})}else u.declarative(d,[a.EVENT_TYPE_CLICK,a.EVENT_TYPE_MOUSEENTER,a.EVENT_TYPE_MOUSELEAVE],function(d){d.data&&(d.data.dimDisplayType=a.TWISTER_DIMENSION_VIEW_COUNTER);d.type===a.EVENT_TYPE_CLICK?r(d):d.type===a.EVENT_TYPE_MOUSEENTER?(g.twisterControllerHandle&&g.twisterControllerHandle.handleMouseOver(d.data),d=d.data[a.STRING_DIM_VALUE_INDEX],q(b+d).css("cursor","pointer"),d!=g.currDimCombID.split(a.CHAR_UNDERSCORE)[g.dimOrder]&&(q(b+d).css("z-index",1),e(!0,d),x.html(g.dimValuesDisplayData[d]))):
d.type===a.EVENT_TYPE_MOUSELEAVE&&(g.twisterControllerHandle&&g.twisterControllerHandle.handleMouseOut(d.data,d.data[a.STRING_DIM_INDEX],d.data[a.STRING_DIM_VALUE_INDEX]),d=d.data[a.STRING_DIM_VALUE_INDEX],d!=g.currDimCombID.split(a.CHAR_UNDERSCORE)[g.dimOrder]&&(q(b+d).css("z-index",0),e(!1,d),d=g.dimValuesDisplayData[g.currDimCombID.split(a.CHAR_UNDERSCORE)[g.dimOrder]],x.html(d)));p=!1})})();g.expandedViewEnabled&&B>=g.minAsinsForExpandedView&&(n=new c({minHeightForExpandedSection:55,maxHeightForExpandedSection:155,
maxHeightForExpandedSectionInView:101,scrollAnimationDuration:500,expanderSection:w,useExpanderScrollView:B>=g.minAsinsForExpandedScroll-1,minAsinsForExpandedView:g.minAsinsForExpandedView,expanderButtonReplacementIndex:g.minAsinsForExpandedView-2,dimValuePrefix:b,initSelectedID:g.currDimCombID,swatchImageSize:54,swatchImageMargin:10,expanderButton:y,collapseButton:d,dimDisplayType:"counter",logger:z,dimOrder:g.dimOrder}));C.CounterScenesController&&C.CounterScenesController.registerCounter(g)}});
A.when("A","twister-utils","twister-string-constants","twister-expander").register("twister-shelf",function(u,k,a,c){return function(f,l){function r(){E=new c({minHeightForExpandedSection:89,maxHeightForExpandedSection:209,maxHeightForExpandedSectionInView:135,scrollAnimationDuration:500,expanderSection:t,useExpanderScrollView:F>=d.minAsinsForExpandedScroll-1,minAsinsForExpandedView:d.minAsinsForExpandedView,expanderButtonReplacementIndex:d.minAsinsForExpandedView-1,dimValuePrefix:p,initSelectedID:d.currDimCombID,
swatchImageSize:74,swatchImageMargin:17,expanderButton:b,collapseButton:w,expanderHidesVariation:!1,dimDisplayType:"shelf",logger:n,dimOrder:d.dimOrder,synchronousPreExpanderCallback:function(){t.removeClass("twisterShelf_isCollapsed");t.removeClass("twisterShelf_isCollapsedAnimated");t.addClass("twisterShelf_isExpanded");t.addClass("twisterShelf_isExpandedAnimated");v()},synchronousPostExpanderCallback:function(){m();t.removeClass("twisterShelf_isExpandedAnimated")},synchronousPreCollapseCallback:function(){t.removeClass("twisterShelf_isExpanded");
t.removeClass("twisterShelf_isExpandedAnimated");t.addClass("twisterShelf_isCollapsed");t.addClass("twisterShelf_isCollapsedAnimated");v()},synchronousPostCollapseCallback:function(){m();t.removeClass("twisterShelf_isCollapsedAnimated")}})}function h(b){if(!b)return-1;b=b.split(a.CHAR_UNDERSCORE);return b[b.length-1]}function e(b){return{dimIndex:d.dimOrder,dimValueIndex:b?h(b.id):null,dimDisplayType:a.TWISTER_DIMENSION_VIEW_SHELF,dimValueSelectedID:b.id}}function m(){v();H.bind(a.EVENT_TYPE_CLICK,
function(b){b=e(b.currentTarget);D=x(a.ID_SELECTOR+b.dimValueSelectedID);var c=k.reconstructCombinationWithDimValue(d.currDimCombID,b.dimIndex,b.dimValueIndex);d.currDimCombID!=c&&d.twisterControllerHandle&&d.twisterControllerHandle.handleClick(b)});k.isTouchDevice()||(H.bind(a.EVENT_TYPE_MOUSEENTER,function(b){b=e(b.currentTarget);d.twisterControllerHandle&&d.twisterControllerHandle.handleMouseOver(b);b=b[a.STRING_DIM_VALUE_INDEX];var c=x(p+b);c.css("cursor","pointer");b!=d.currDimCombID.split(a.CHAR_UNDERSCORE)[d.dimOrder]&&
(c.addClass("hoverSwatch"),B.html(d.dimValuesDisplayData[b]))}),H.bind(a.EVENT_TYPE_MOUSELEAVE,function(b){b=e(b.currentTarget);d.twisterControllerHandle&&d.twisterControllerHandle.handleMouseOut(b,b[a.STRING_DIM_INDEX],b[a.STRING_DIM_VALUE_INDEX]);b=b[a.STRING_DIM_VALUE_INDEX];var c=x(p+b);b!=d.currDimCombID.split(a.CHAR_UNDERSCORE)[d.dimOrder]&&(c.removeClass("hoverSwatch"),b=d.dimValuesDisplayData[d.currDimCombID.split(a.CHAR_UNDERSCORE)[d.dimOrder]],B.html(b))}))}function v(){H.unbind(a.EVENT_TYPE_CLICK);
k.isTouchDevice()||(H.unbind(a.EVENT_TYPE_MOUSEENTER),H.unbind(a.EVENT_TYPE_MOUSELEAVE))}function g(b){var e=b[a.STRING_EVENT_DATA][a.STRING_EVENT_DIV_METADATA][a.TWISTER_EVENT_DATA_DISPLAY_TYPE];z=x(p+b.dimCombID.split(a.CHAR_UNDERSCORE)[d.dimOrder]);(A=x(".vodd-dim-wrapper").length)&&z.hasClass("shelf_unavailable")&&e===a.TWISTER_DIMENSION_VIEW_SHELF&&u.animate(x(".vodd-dim-wrapper"),{scale:1.1},150,"ease-in",function(){u.animate(x(".vodd-dim-wrapper"),{scale:1},100,"ease-out",function(){})})}function q(b){"undefined"===
typeof d.$variationList&&(d.$variationList=x("#"+a.TWISTER_DIMENSION_VIEW_SHELF+"-"+d.dimName+" .twisterShelf_swatch"));for(var e=d.$variationList,c=d.initialTwisterState.getCurrentDimCombID(),g=parseInt(d.dimOrder),p=[],m=0;m<e.length;m++){5===p.length&&(y(p),p=[]);var f=h(e[m].id),f=k.reconstructCombinationWithDimValue(c,g,f);if(f=d.dimensionToAsinMap[f])b?x(".twisterShelf_container #"+d.dimName+"_"+I[f]+" .twisterShelf_infoSection_slots").length||p.push(f):p.push(f);else{var f=x(e[m]),w,n=e[m];
w=d.initialTwisterState.getCurrentDimCombID().split(a.CHAR_UNDERSCORE);var q=[],t=parseInt(d.dimOrder),n=h(n.id);w[t]=n;for(var n=w.join(a.CHAR_UNDERSCORE),n=d.twisterControllerHandle.twisterAvailabilityCache.gAsinToRender(n,t),n=I[n],r=0;r<w.length;r++)t!==r&&q.push(d.dimensionValuesList[r][n[r]]);w=q.join(", ");f.addClass("shelf_unavailable");"undefined"!==typeof w?(f.find(".unavailableV2").empty(),f.find(".unavailableV2").text("Select in "+w),f.find(".unavailable-text").removeClass("aok-hidden"),
f.find(".shelf_loading_placeholder").hide(),f.find(".unavailableV2").removeClass("aok-hidden"),f=f.find(".twisterShelf_infoSection"),f.empty(),f.addClass("aok-hidden")):(f.find(".shelf_loading_placeholder").hide(),f.find(".outofstock-text").removeClass("aok-hidden"),f.find(".shelf-outofstock").removeClass("aok-hidden"))}}0<p.length&&y(p)}function y(b){var a=n.createFunctionTimer(n.eventTypes.DIM_SUM_LOAD);a.start();var e=function(){a.stop()};0<b.length&&Twister.dimensionalSummaryModule.fetchDimSumData({indices:G,
asinList:b,dimTriggeringDimSum:d.dimName,dimSubType:d.dimSubType,dimType:d.dimType,chunk:function(b){if(b&&"object"===typeof b){var a=parseInt(I[b.ASIN][parseInt(d.dimOrder)]),a=x(p+a);if(b.Value&&b.Value.content&&b.Value.content.twisterSlotDiv){var e=x.trim(b.Value.content.twisterSlotDiv);if(0<e.length){a.removeClass("shelf_unavailable");a.find(".unavailableV2").addClass("aok-hidden");a.find(".outofstock-text").addClass("aok-hidden");a.find(".shelf-outofstock").addClass("aok-hidden");a.find(".unavailable-text").addClass("aok-hidden");
b=a.find(".twisterShelf_infoSection");b.empty();b.addClass("aok-hidden");b.append(e);e=a.find(".twisterShelf_infoSection .price_slot_ppu, .twisterShelf_infoSection .deal_slot_ppu");if(e.length){var c=x("<p></p>");c.append(e);b.append(c);e=a.find(".twisterShelf_infoSection i");a=a.find(".twisterShelf_infoSection .olpWrapper");c=x(".twisterShelf_swatchSection.twisterShelf_isCollapsed");e.length&&a.length&&c.length&&b.addClass("hasAllItems")}b.removeClass("aok-hidden")}}}},success:function(b,a,d,c){e()},
error:e,abort:e})}var d=this,x=u.$,b,w,B,p,t,F,H,I,n,z,A,D,J,E;d.updateView=function(b){if(b[a.STRING_EVENT_TYPE]===a.EVENT_TYPE_CLICK&&d.currDimCombID!=b[a.STRING_DIM_COMB_ID]){for(var e=b[a.STRING_EVENT_DATA][a.STRING_EVENT_DIM_INFO][a.STRING_DIMENSION_VALUES_DATA][d.dimOrder],c=0;c<d.$variationList.length;c++){var h=x(d.$variationList[c]);h.find("twisterShelf_infoSection").addClass("shelf_loading_placeholder");h.find("twisterShelf_infoSection").removeClass("aok-hidden");h.find("twisterShelf_infoSection").addClass("twisterShelf_placeholder_price");
h.find("twisterShelf_infoSection").addClass("twisterShelf_placeholder_badge");h.find("unavailableV2").addClass("aok-hidden");h.find("twister_swatch_price").addClass("aok-hidden")}B.html(e);D=x(p+b.dimCombID.split(a.CHAR_UNDERSCORE)[d.dimOrder]);D.removeClass("hoverSwatch");J.removeClass("selectedSwatch");D.addClass("selectedSwatch");g(b);q(!1);d.currDimCombID=b[a.STRING_DIM_COMB_ID];null!=E&&(E.updateSelectedVariation(d.currDimCombID,D),E.isCollapsed?E.handleVariationSwap(!0):E.scrollVariationIntoView());
J=D}};d.onInitializeTwister=function(){u.loadDescendantImagesManually(t);q(!1)};d.dimOrder=l[a.STRING_DIM_ORDER];d.dimName=l[a.STRING_DIM_NAME];d.dimensionsMap=l[a.STRING_DIMENSIONS_MAP];d.dimNameDisplayString=l[a.STRING_DIMENSION_DISPLAY_STRING];d.dimValuesDisplayData=l[a.STRING_DIMENSION_VALUES_DATA];d.twisterControllerHandle=l[a.STRING_TWISTER_CONTROLLER_HANDLE];d.initialTwisterState=l[a.STRING_TWISTER_INITIAL_STATE_KEY];d.expandedViewEnabled=f[a.INIT_DATA_DISPLAY_TYPE_PROPERTIES][d.dimOrder][a.EXPANDED_VIEW_ENABLED];
d.dimensionToAsinMap=d.twisterControllerHandle.twisterJSInitData.dimToAsinMapData;"IMAGE"===l[a.DIMENSION_SUB_TYPE]?(d.minAsinsForExpandedView=f[a.INIT_DATA_DISPLAY_TYPE_PROPERTIES][d.dimOrder][a.MIN_ASINS_FOR_EXPANDED_VIEW_IMAGE],d.minAsinsForExpandedScroll=f[a.INIT_DATA_DISPLAY_TYPE_PROPERTIES][d.dimOrder][a.MIN_ASINS_FOR_EXPANDED_SCROLL_IMAGE]):(d.minAsinsForExpandedView=f[a.INIT_DATA_DISPLAY_TYPE_PROPERTIES][d.dimOrder][a.MIN_ASINS_FOR_EXPANDED_VIEW_TEXT],d.minAsinsForExpandedScroll=f[a.INIT_DATA_DISPLAY_TYPE_PROPERTIES][d.dimOrder][a.MIN_ASINS_FOR_EXPANDED_SCROLL_TEXT]);
d.dimType=a.TWISTER_DIMENSION_VIEW_SHELF;d.dimSubType=l[a.DIMENSION_SUB_TYPE];d.currDimCombID=d.initialTwisterState.getCurrentDimCombID();n=d.twisterControllerHandle.logger;I=d.twisterControllerHandle.twisterJSInitData.asinToDimIndexMapData;d.dimensionValuesList=d.initialTwisterState.twisterAvailabilityCache.twisterVariationsData.dimensionValuesData;H=x(a.ID_SELECTOR+"shelfSwatchSection-"+d.dimName+" .twisterShelf_swatch");B=x(a.ID_SELECTOR+"shelf-label-"+d.dimName+" .twisterShelf_dimension_label span");
p=a.ID_SELECTOR+d.dimName+a.CHAR_UNDERSCORE;t=x(a.ID_SELECTOR+"shelfSwatchSection-"+d.dimName);F=d.dimValuesDisplayData.length;J=x(p+d.currDimCombID.split(a.CHAR_UNDERSCORE)[d.dimOrder]);D=x(p+d.currDimCombID.split(a.CHAR_UNDERSCORE)[d.dimOrder]);b=x(a.ID_SELECTOR+"shelfSwatchSection-"+d.dimName+" .expanderButton");w=x(a.ID_SELECTOR+"shelfSwatchSection-"+d.dimName+" .collapseButton");(function(){x(".twisterShelf_swatch").each(function(b){b=x(this);b.parent().is("a")&&b.unwrap()})})();m();d.expandedViewEnabled&&
F>=d.minAsinsForExpandedView&&r()}});A.when("A","a-popover","twister-string-constants","twister-utils").register("twister-vodd-popover",function(u,k,a,c){return function(f){function l(a,e){y.eventListener&&y.eventListener.handlePopoverEvent&&y.eventListener.handlePopoverEvent(a,e)}function r(d){l(a.EVENT_TYPE_SHOWPOPOVER,d);var e="bottom"===y.displayPosition?"vodd-modified-popover":"vodd-modified-top-popover";d.popover.$container.hasClass(e)||d.popover.$container.addClass(e);m(d.popover.$container)}
function h(d){l(a.EVENT_TYPE_HIDEPOPOVER,d);d.popover.$trigger.blur()}function e(d){m(d.popover.$container);l(a.EVENT_TYPE_UPDATEPOPOVERPOSITION,d)}function m(a){var e=q.get(0).getBoundingClientRect(),b,c;C.pageYOffset?(b=C.pageYOffset,c=C.pageXOffset):"CSS1Compat"===(document.compatMode||"")?(b=document.documentElement.scrollTop,c=document.documentElement.scrollLeft):(b=document.body.scrollTop,c=document.body.scrollLeft);b="bottom"===y.displayPosition?e.bottom+b:e.top+b-a.height();var g=e.right-
e.left,e=e.left+c;a&&a.css({top:b+"px",left:e+"px",width:g+"px"})}var v,g=u.$,q,y={name:null,trigger:null,eventListener:null,displayPosition:"bottom",positionOnTwisterContainer:!0};this.getHandle=function(){return v};f&&g.extend(y,f);if(!y.name)throw"Popover name should not be null";if(!y.trigger)throw"Popover trigger should not be null";(function(){var a="triggerBottom";"top"===y.displayPosition&&(a="triggerTop");a={closeButton:!1,closeButtonLabel:"close",position:a,name:y.name,popoverLabel:y.name,
activate:c.isTouchDevice()?"onmouseover":"onclick"};y.height&&g.extend(a,{height:y.height});v=k.create(y.trigger,a)})();(function(){u.on("a:popover:afterShow:"+y.name,r);u.on("a:popover:afterHide:"+y.name,h);u.on("a:popover:afterUpdatePosition:"+y.name,e);var a=function(){v&&v.isActive()&&m(v.$container)};u.on("a:pageUpdate",a);g(C).resize(a)})();q=y.positionOnTwisterContainer?g("#twister"):y.trigger}});A.when("A").register("accessibility-helper",function(u){return{announceText:function(){}}});A.when("A").register("twister-expander",
function(u){return function(k){function a(){"function"===typeof b.synchronousPreCollapseCallback&&b.synchronousPreCollapseCallback();b.logger.logImpression(b.logger.eventTypes.COLLAPSE_BUTTON_CLICK,x);b.expanderSection.height();b.expanderSection.animate({height:b.minHeightForExpandedSection},{duration:b.scrollAnimationDuration,queue:!1,complete:function(){b.expanderSection.css("overflow-y","hidden");b.expanderSection.css("overflow","hidden");b.expanderHidesVariation||b.expanderButton.removeClass("aok-hidden");
"function"===typeof b.synchronousPostCollapseCallback&&b.synchronousPostCollapseCallback()}});b.expanderSection.animate({scrollTop:0},{duration:b.scrollAnimationDuration,queue:!1});h.isCollapsed=!0;b.expanderHidesVariation?f():b.collapseButton.addClass("aok-hidden");h.handleVariationSwap()}function c(){y.hasClass("aok-hidden")&&(y.removeClass("aok-hidden"),b.expanderButton.prev().insertAfter(v))}function f(){h.isCollapsed?(b.collapseButton.addClass("aok-hidden"),b.expanderHidesVariation&&q.addClass("aok-hidden"),
b.expanderButton.removeClass("aok-hidden")):(b.expanderButton.addClass("aok-hidden"),q.removeClass("aok-hidden"),b.collapseButton.removeClass("aok-hidden"))}function l(){d.bind("click",function(d){b.expanderButton[0].id==d.currentTarget.id||h.isCollapsed||a()})}var r=u.$,h=this,e,m,v,g,q,y,d=r(".expanderButton"),x,b={minHeightForExpandedSection:50,maxHeightForExpandedSection:100,maxHeightForExpandedSectionInView:null,scrollAnimationDuration:500,expanderSection:null,useExpanderScrollView:!0,minAsinsForExpandedView:null,
expanderButtonReplacementIndex:null,dimValuePrefix:null,initSelectedID:null,swatchImageSize:null,swatchImageMargin:null,expanderButton:null,collapseButton:null,expanderHidesVariation:!0,synchronousPreExpanderCallback:null,synchronousPostExpanderCallback:null,synchronousPreCollapseCallback:null,synchronousPostCollapseCallback:null,dimDisplayType:null,logger:null,dimOrder:null};h.handleExpand=function(){"function"===typeof b.synchronousPreExpanderCallback&&b.synchronousPreExpanderCallback();b.logger.logImpression(b.logger.eventTypes.EXPAND_BUTTON_CLICK,
x);var a=b.expanderSection.height();h.isCollapsed=!1;h.handleVariationSwap();b.expanderHidesVariation?f():b.expanderButton.addClass("aok-hidden");if(b.useExpanderScrollView)b.expanderSection.height(a).animate({height:b.maxHeightForExpandedSection},{duration:b.scrollAnimationDuration,queue:!1,complete:function(){b.expanderSection.css("overflow-y","auto");h.scrollVariationIntoView();b.expanderHidesVariation||b.collapseButton.removeClass("aok-hidden");"function"===typeof b.synchronousPostExpanderCallback&&
b.synchronousPostExpanderCallback()}});else{var d=b.expanderSection.css("height","auto").height();b.expanderSection.height(a).animate({height:d},{duration:b.scrollAnimationDuration,queue:!1,complete:function(){b.expanderHidesVariation||b.collapseButton.removeClass("aok-hidden");"function"===typeof b.synchronousPostExpanderCallback&&b.synchronousPostExpanderCallback()}})}};h.handleVariationSwap=function(a){h.isCollapsed&&e>=g?(a&&c(),e==g&&b.expanderHidesVariation?(q.removeClass("aok-hidden"),v=y):
v=e==g+1&&b.expanderHidesVariation?b.expanderButton:b.expanderHidesVariation?r(b.dimValuePrefix+(e-1)):e==g?b.expanderButton:r(b.dimValuePrefix+(e-1)),m.insertBefore(b.expanderButton),y.addClass("aok-hidden")):h.isCollapsed||c()};h.scrollVariationIntoView=function(){var a=m.offset().top,d=b.expanderSection.offset().top,e=b.expanderSection.scrollTop(),a=a-d,e=e+a;0>a?b.expanderSection.animate({scrollTop:e},{duration:b.scrollAnimationDuration,queue:!1}):a>b.maxHeightForExpandedSectionInView&&(e-=b.swatchImageSize+
b.swatchImageMargin,b.expanderSection.animate({scrollTop:e},{duration:b.scrollAnimationDuration,queue:!1}))};h.updateSelectedVariation=function(a,d){null!=d&&(m=d);null!=a&&(e=a.split("_")[b.dimOrder])};(function(){k&&r.extend(b,k);if(!b.collapseButton)throw"Expander collapseButton should not be null";if(!b.expanderButton)throw"Expander expanderButton should not be null";if(!b.expanderSection)throw"Expander expanderSection should not be null";if(!b.initSelectedID)throw"Expander initSelectedID should not be null";
if(!b.minAsinsForExpandedView)throw"Expander minAsinsForExpandedView should not be null";if(!b.dimValuePrefix)throw"Expander dimValuePrefix should not be null";if(!b.swatchImageSize)throw"Expander swatchImageSize should not be null";if(!b.swatchImageMargin)throw"Expander swatchImageMargin should not be null";if(!b.expanderButtonReplacementIndex)throw"Expander expanderButtonReplacementIndex should not be null";if(!b.dimDisplayType)throw"Expander dimDisplayType should not be null";if(!b.logger)throw"Expander Logger should not be null";
b.dimOrder||(b.dimOrder=0);x={dimDisplayType:b.dimDisplayType};b.logger.logImpression(b.logger.eventTypes.EXPANDER,x);g=b.expanderButtonReplacementIndex;q=r(b.dimValuePrefix+g);y=r(b.dimValuePrefix+(g-1));e=b.initSelectedID.split("_")[b.dimOrder];m=r(b.dimValuePrefix+b.initSelectedID.split("_")[b.dimOrder]);h.isCollapsed=!0;b.expanderButton.click(function(){h.handleExpand()});b.collapseButton.click(function(){a()});l();h.handleVariationSwap()})()}});A.when("A","twisterModule").register("twister-view-registry",
function(u,k){var a=u.createClass({init:function(a,c){this.twisterControllerHandle=a;this.externalViewName=c;this.dimensions=a.twisterJSInitData.dimensions;this.dimensionToAsinMap=a.twisterJSInitData.dimToAsinMapData;this.dimensionValues=a.twisterJSInitData.dimensionValuesData;this.dimensionAsinToValuesMap=a.twisterJSInitData.dimensionValuesDisplayData;this.variationValues=a.twisterJSInitData.variation_values;this.asinVariationValues=a.twisterJSInitData.asin_variation_values;this.parentAsin=a.twisterJSInitData.parent_asin;
this.currentDimCombID=a.twisterJSInitData.currentDimCombID;this.currentAsin=a.twisterJSInitData.current_asin;this.getControllerInterface=function(){function c(a,e,m){return{dimIndex:a,dimValueIndex:e,dimDisplayType:m}}return{handleClick:function(h,e,m){h=c(h,e,m);a.handleExternalViewClick(h,this.externalViewName)},handleMouseOver:function(h,e,m){h=c(h,e,m);a.handleExternalViewMouseOver(h,this.externalViewName)},handleMouseOut:function(h,e,m){h=c(e);a.handleExternalViewMouseOut(h,h.dimIndex,h.dimValueIndex,
this.externalViewName)}}}},updateView:function(a,c,r){},updateViewAfterTwisterUpdate:function(a,c,r){}}),c=C.twisterController;this.createAndRegisterExternalView=function(f){var l=new a(c,f);c.registerExternalView(l,f);return l};return this})})})(function(){var A=window.AmazonUIPageJS||window.P,C=A._namespace||A.attributeErrors;return C?C("DetailPageTwisterAssets"):A}(),window);