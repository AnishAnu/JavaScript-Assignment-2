(function(f,m,D){f.execute(function(){f.register("postMetric",function(){return{postCountMetric:function(f){if("undefined"!==typeof f){var c=m.ue;if(c){var g=c.count(f)||0;c.count(f,g+1)}}}}});f.when("jQuery","ImageBlockController","ImageBlockATF","ImageBlockBTF").register("ImageBlock",function(f,c,g,e){f=f.extend(!0,{},g,e);return new c(f)});f.when("A","jQuery","ImageBlockBTF").register("ImageBlockAiryLoader",function(m,c,g){m=g.airyConfig;m.jsUrl&&f.load.js(m.jsUrl);m.cssUrl&&
f.load.css(m.cssUrl)});f.when("A","jQuery","ImageBlockModel","ImageBlockView","imageBlockUtils").register("ImageBlockController",function(f,c,g,e,b){var a={};return function(d){var k=this;k.dispatch=function(d,e){var g=a[d];b.isDefined(g)&&c.each(g,function(a,b){b.call(m,e)})};k.register=function(d,c){b.isDefined(a[d])||(a[d]=[]);"function"===typeof c&&a[d].push(c)};k.model=new g(d,k);k.view=new e(d,k,k.model);k.init=function(){k.model.init();k.view.init()};k.init()}});f.when("A",
"jQuery","imageBlockUtils").register("ImageBlockModel",function(f,c,g){function e(a,b,d,c,e){g.isDefined(a)&&(l.type=a);g.isDefined(b)&&(l.index=b);g.isDefined(d)&&(l.thumbnailIndex=d);g.isDefined(c)&&(l.variant=c);g.isDefined(e)&&(l.color=e)}function b(a){a=a.data;h=f.copy(l);e(a.type,a.index,a.thumbnailIndex,a.variant,a.color)}function a(a){b(a);a=f.copy(a);a.data=f.copy(l);k.dispatch("updateView",a)}var d,k,l={},h={};return function(c,g){k=g;d=c;k.register("updateSelection",a);k.register("updateModel",
b);this.init=function(){e("image",0,0,"MAIN",d.landingAsinColor||d.defaultColor)};this.getCurrentItem=function(){return f.copy(l)};this.getPreviousItem=function(){return f.copy(h)}}});f.when("ImageBlockBTF").execute(function(M){function c(c,e,b,a,d){function k(a){t.dispatch("updateSelection",a)}function l(a){t.dispatch("imageClick",a)}function h(a){t.dispatch("imageHover",a)}function f(d){!b.isDefined(d)||"swatchClick"!==d.type&&"updatedData"!==d.type?(q.update(d),"swatchHover"!==d.type&&
B.getPreviousItem().thumbnailIndex!==d.data.thumbnailIndex&&a.postCountMetric(d.data.type+"ThumbnailSelected"),c.trigger("image-block-thumbnail-selected",d.data)):q.render(d.data.color,!1,d.onload)}function p(a){t.dispatch("resize",a)}function M(a){var d=w.find("img");b.isDefined(d[a])&&e(d[a]).click()}var q,r,t,B,w;return function(a,b,v){q=this;r=a;t=b;B=v;w=e("#imageBlock #altImages ul");var A=e("#imageBlock .canvas"),G=e("#main-image-container");q.subViews=[];for(b=0;b<d.length;b++)q.subViews.push(new d[b](a,
v,q,t));q.render=function(a,b,d){var c=0;w.find(".item").remove();a=a||B.getCurrentItem().color;e.each(q.subViews,function(e,g){c=g.render(a,c,A,w,G,b,d)||c})};q.init=function(){w=e("#imageBlock #altImages ul");var a=w.find(".a-button-selected").closest(".a-declarative"),b=a.data("action"),a=a.data(b)||{};a.color=r.landingAsinColor||r.defaultColor;t.dispatch("updateModel",{data:a});q.render(a.color,!0);r.isDebug&&m.console&&console.log(r);t.register("updateView",f);t.register("selectThumbnail",M);
c.declarative("thumb-action",["click","mouseenter"],k);c.declarative("main-image-click",["click"],l);c.declarative("main-image-click",["mouseenter","mouseleave"],h);e(m).resize(p)};q.update=function(a){e.each(q.subViews,function(b,d){d.update(a)})}}}M=["A","jQuery","imageBlockUtils","postMetric"].concat(M.views);f.when.apply(f,M).register("ImageBlockView",function(){for(var g=arguments[0],e=arguments[1],b=arguments[2],a=arguments[3],d=[],k=4,l=arguments.length;k<l;k++)d.push(arguments[k]);return c(g,
e,b,a,d)})});f.when("A","jQuery","imageBlockUtils","postMetric").register("ImageBlockAltImageView",function(f,c,g,e){function b(a,b,d,e){if(!g.isjQueryObjDefined(a.find(".a-button-selected"))){var k=w.getCurrentItem();if(!e||"chromeless-video"!==k.type||!B.autoplayVideo){e=0;"image"===k.type&&(e=l(k.color,k.variant),e=-1!==e?e:0);var f=b+e;f>=d&&(e=0,f=b);b=h(k.color,e);-1!==b&&(y.dispatch("updateModel",{data:{index:e,thumbnailIndex:f,variant:b.variant,type:"image"}}),b=a.find(".item").get(f),
g.selectGivenThumbnail(c(b),a))}}}function a(a,d,e){d=B.colorImages&&B.colorImages[d];var k=a;g.isDefined(d)&&(c.each(d,function(b,d){a<B.maxAlts&&(g.createThumbnail({type:"image",index:b,thumbnailIndex:a,variant:d.variant},d.thumb,C),a++)}),b(C,k,a,e));return a}function d(a,b){if("image"===a.type){var d=c("#image-canvas-caption #canvasCaption"),e,g=B.staticStrings,k=B.colorImages,h=a.color,l=a.index;b&&B.useIV?e=g.clickToExpand:k[h]&&k[h][l].hiRes&&B.useHoverZoom?(e=B.useHoverZoomIpad?g.touchToZoom:
B.useClickZoom?g.clickToZoom:g.rollOverToZoom,B.hoverZoomIndicator&&(e="<img src='"+B.staticImages.hoverZoomIcon+"'/>&nbsp;"+e)):B.useIV&&(e=g.clickToExpand);d.html(e)}}function k(){v.find("li").removeClass("selected");c("#image-canvas-caption #canvasCaption").empty();g.hideUnavailable()}function l(a,b){var d=B.colorImages;if(1>d.length||!g.isDefined(d[a])||!g.isDefined(b))return-1;var e=-1;c.each(d[a],function(a,d){d.variant===b&&(e=a)});return e}function h(a,b){var d=B.colorImages;return!(g.isDefined(d)&&
g.isDefined(d[a])&&g.isDefined(d[a][b])&&g.isDefined(d[a][b].main))||1>c.map(d[a][b].main,function(a,b){return b}).length?-1:d[a][b]}function m(a,b){var d;c.each(a.main,function(a,b){g.isDefined(d)||(d=parseFloat(b[1]/b[0])<=parseFloat(B.holderRatio)?"a-stretch-vertical":"a-stretch-horizontal")});var e="a-dynamic-image "+d,k=g.getMaxHeightOfMainImage(a.main,A,B),h=g.getMaxWidthOfMainImage(a.main,A,B),l=c("<div></div>"),k={"max-height":k,"max-width":h};l.addClass(e).css(k).attr({"data-old-hires":a.hiRes,
"data-a-manual-replacement":"true",onload:b}).data("a-dynamic-image",a.main);return l}function p(a){var b=A.css("height");null!==b&&a.find(".imgTagWrapper").css("height",b);a.addClass("selected");B.imgTagWrapperClasses&&a.find(".imgTagWrapper").addClass(B.imgTagWrapperClasses)}function z(a,b){if("image"===a.type||"unavailable"===a.type){var c=h(a.color,a.index);if(-1===c)return y.dispatch("updateModel",{data:{index:0,thumbnailIndex:0,variant:"",type:"unavailable"}}),g.showUnavailable(a.color),-1;
var k=v.find(".item.itemNo"+a.thumbnailIndex);if(!g.isjQueryObjDefined(k)){var k=a.thumbnailIndex,k=v.find(".mainImageTemplate").clone().removeClass("template mainImageTemplate").addClass("image item itemNo"+k+" maintain-height"),l=m(c,b);k.find(".placeHolder").replaceWith(l);v.find(".list").append(k);f.loadImageManually(l)}p(k);y.dispatch("loadMagnifier");d(a);B.useIV&&k.css("cursor","pointer");a.isUserGenerated&&(k=w.getPreviousItem(),l=a.variant,g.isDefined(l)&&k.thumbnailIndex!==a.thumbnailIndex&&
(e.postCountMetric("ImageThumbnailSelectedVariant:"+l),0===l.indexOf("IG")&&(e.postCountMetric("IGImageSelectedVariant:"+l),e.postCountMetric("IGImageSelectedEvent:"+a.interaction))));f.trigger("dp:image-block:update",c)}}function q(){var a=v.find(".item .imgTagWrapper"),b=g.getContainerHeight(A,B.holderRatio,B.holderMaxHeight);0<b&&(A.height(b),a.height(b));v.find("img.a-dynamic-image").each(function(){var a=c(this);a.data("a-manual-replacement")&&f.loadDynamicImage(this);var b=a.data("a-dynamic-image"),
d=g.getMaxHeightOfMainImage(b,A,B),b=g.getMaxWidthOfMainImage(b,A,B);a.css({"max-height":d+"px","max-width":b+"px"})})}function r(a){d(w.getCurrentItem(),"mouseenter"===a.type)}var t,B,w,y,C,v,A;return function(b,d,c,e){t=this;B=b;w=d;y=e;B.colorImages[B.landingAsinColor]=B.colorImages[B.defaultColor];t.render=function(b,d,c,e,g,h,l){v=c;C=e;A=g;b=a(d,b,h);k();h||v.find(".list .item").remove();z(w.getCurrentItem(),l);return b};t.update=function(a){k();var b=a.data;if("swatchHover"===a.type)if(b.color===
w.getCurrentItem().color)z(w.getCurrentItem());else{if(!a.captured){var d;d=l(b.color,w.getCurrentItem().variant);d=h(b.color,-1!==d?d:0);if(-1===d)g.showUnavailable(b.color),d=-1;else{var b=v.find(".swatchHoverExp"),c=m(d);b.find(".imgTagWrapper").html(c);f.loadImageManually(c);p(b);f.trigger("dp:image-block:update",d);d=void 0}-1!==d&&(a.captured=!0)}}else"image"===b.type&&(b.interaction=a.type,b.isUserGenerated=!0,z(b),g.selectGivenThumbnail(a.$declarativeParent,C))};y.register("imageHover",r);
y.register("resize",q)}});f.when("A","jQuery","imageBlockUtils","postMetric").register("ImageBlockMagnifierView",function(f,c,g,e){function b(a){q?a.css("cursor","url('"+h.staticImages.zoomIn+"'), auto"):(a.css("cursor","-webkit-zoom-in"),a.css("cursor","-moz-zoom-in"),a.css("cursor","zoom-in"))}function a(a){var b=a.match(/\._((\w|,|\.)+)_\.(gif|jpg|png)$/i);a={};if(g.isDefined(b))for(var b=b[1].split("_"),d=0;d<b.length;d++){var c=b[d].match(/^([A-Z]+)(\d+(\.\d+)?)$/);g.isDefined(c)&&
(a[c[1]]=parseInt(c[2],10))}return a}function d(d,k){function l(){var a;k.useClickZoom?(a=k.offsetInClickZoom,a=[Math.min(1,Math.max(0,W[0]-(R[0]+a))/(R[2]-2*a)),Math.min(1,Math.max(0,W[1]-(R[1]+a))/(R[3]-2*a))]):a=F&&F.updatePosition();if(a&&D.detailSize){var b=[D.detailSize[0]-D.rect.width,D.detailSize[1]-D.rect.height];D.detailImage.get(0).style.left=-(a[0]*b[0])+"px";D.detailImage.get(0).style.top=-(a[1]*b[1])+"px"}}function f(a){var b=K?a.originalEvent.touches[0]||a.originalEvent.changedTouches[0]:
"";W=K?[b.pageX,b.pageY]:[a.pageX,a.pageY]}function n(a){K&&a.preventDefault();f(a);k.useClickZoom?a=[R[0],R[1],R[0]+R[2],R[1]+R[3]]:(a=F?F.offset:d.offsetParent().offset(),a=[J[0]+a.left,J[1]+a.top,J[0]+J[2]+a.left,J[1]+J[3]+a.top]);W[0]<a[0]||W[1]<a[1]||W[0]>=a[2]||W[1]>=a[3]?(k.useClickZoom||p(),Y&&(Y=!1,clearTimeout(T))):(Y||(Y=!0,T=setTimeout(function(){e.postCountMetric("dppc_hoverZoomOpened")},1E3)),l())}function p(a){a&&z.suppressMagnifier(!0);if(P&&(D&&D.hide(),F&&(F.destroy(),F=null),P=
!1,K?(d.unbind("touchmove.magnifier touchstart.magnifier touchend.magnifier"),c(document).trigger("disengaged.magnifier")):c(document).unbind("mousemove.magnifier").trigger("disengaged.magnifier"),A(),a))d.one("click.magnifier touchstart.magnifier",function(a){M(a,!0)})}function M(a,b){b&&z.suppressMagnifier(!1);if(!P&&!L&&(0===ca&&(e.postCountMetric("dppc_hoverTime",new Date-(m.ue&&m.ue.t0||0)),ca=1),Q[O]||(e.postCountMetric("dppc_hoverMain"),Q[O]=1),J=[d.position().left,d.position().top,d.width(),
d.height()],O&&(f(a),D?D.refit().show():D=new S,k.useClickZoom||(F=F||new H),R=D.getWindowSize(),l()),P=!0,K?(d.unbind("touchstart.magnifier touchmove.magnifier").bind("touchmove.magnifier",n).bind("touchend.magnifier",p),c(document).trigger("engaged.magnifier")):(d.unbind("mousemove.magnifier"),c(document).trigger("engaged.magnifier").bind("mousemove.magnifier",n)),b)){var g=c("#zoomWindow");if(0<g.length)g.one("click.magnifier touchend.magnifier",function(a){p(!0)})}}function A(){k.useHoverZoom&&
(K?d.bind("touchstart.magnifier touchmove.magnifier",M):d.bind("mousemove.magnifier",M))}var z=this,E={detailImageUrl:d.attr("data-old-hires"),location:"over",locationElement:d,prelaod:"ready",zIndex:50,offsetInClickZoom:50};k=c.extend(E,k);k.adjustment=[10,0,-10,0];var D=null,F=null,W=null,J=null,R=null,I={"null":1,"":1,undefined:1},P=!1,L=!1,O=k.detailImageUrl,K=k.useHoverZoomIpad||0,ca=0,Q={},H=function(){function a(b){var c=Math.round(Math.min(d.width(),D.rect.width/b));b=Math.round(Math.min(d.height(),
D.rect.height/b));m.css({width:c,height:b});g=[c,b]}var e=this,g=[0,0],l=(D.detailSize&&D.detailSize[0]||5E8)/J[2],f=(D.detailSize&&D.detailSize[1]||5E8)/J[3],l=f>l?f:l;c("#magnifierLens").remove();var m=c("<div id='magnifierLens' />").css({backgroundImage:"url("+k.generalImageUrls.zoomLensBackground+")",position:"absolute"});h.showMagnifierOnHover?b(m):m.css("cursor","pointer");e.updatePosition=function(){var a=[J[2]-g[0],J[3]-g[1]],b=0>=a[0]?.5:Math.max(0,Math.min(1,(W[0]-g[0]/2-J[0]-e.offset.left)/
a[0])),d=0>=a[1]?.5:Math.max(0,Math.min(1,(W[1]-g[1]/2-J[1]-e.offset.top)/a[1])),c=J[0]+Math.round(b*a[0]),a=J[1]+Math.round(d*a[1]);m.get(0).style.left=c+"px";m.get(0).style.top=a+"px";return[b,d]};e.destroy=function(){m.remove()};e.offset=d.offsetParent().offset();a(l);e.updatePosition();m.appendTo(d.parent());D.detailImage[0].complete||D.detailImage.load(function(){var b=D.detailImage.width()/J[2];a(b);e.updatePosition()})};H.preload=function(){z.preload(k.generalImageUrls.lensBackgroundUrl)};
var S=function(){function b(){var a={};if("over"===k.location){var a=k.useClickZoom,e={},l=c("#leftCol"),n=c("#centerCol"),M=c("#rightCol"),q=c("#hover-zoom-end"),v=g.isjQueryObjDefined(l)?l.outerHeight():n.outerHeight();e.top=g.isjQueryObjDefined(l)?l.offset().top:n.offset().top;e.bottom=v+e.top;e.right=M.offset().left;e.left=a?0:l.offset().left+l.outerWidth();g.isjQueryObjDefined(q)&&q.offset().top>e.bottom&&(e.bottom=q.offset().top);a=e}else"right"===k.location&&(a=d.offset(),a={left:a.left+d.outerWidth(),
top:a.top,right:a.left+d.outerWidth()+400,bottom:a.top+400});k.minHeightElement&&(a.bottom=Math.max(a.bottom,a.top+c(k.minHeightElement).outerHeight()));a.bottom=Math.min(a.bottom,c(m).scrollTop()+c(m).height());a.left+=f[0];a.top+=f[1];a.right+=f[2];a.bottom+=f[3];a.width=a.right-a.left;a.height=a.bottom-a.top;k.enhancedHoverOverlay&&g.isDefined(m.pageXOffset)&&(e=c(m).width(),a.width=e-a.left+m.pageXOffset-18,a.height-=14);p.css({left:a.left,top:a.top,width:a.width,height:a.height});h.rect=a;return h}
function e(b){var d=new Image;h.detailSize=[0,0];d.onload=function(){h.detailSize=[d.width,d.height];l()};d.src=b.attr("src");if(0<d.width&&0<d.height)h.detailSize=[d.width,d.height];else if(k.detailImageSize)h.detailSize=k.detailImageSize;else{b=a(d.src);var c=J[2]/J[3];b.SS||b.AA?(b=b.SS||b.AA,h.detailSize=[b,b]):b.SX?h.detailSize=[b.SX,Math.round(b.SX/c)]:b.SY?h.detailSize=[Math.round(b.SY*c),b.SY]:b.SL&&(h.detailSize=1<=c?[b.SL,Math.round(b.SL/c)]:[Math.round(b.SL*c),b.SL])}}var h=this,f=k.adjustment;
c("#zoomWindow").remove();var n={overflow:"hidden",position:"absolute",backgroundColor:"white",zIndex:k.zIndex};k.enhancedHoverOverlay&&(n.boxShadow="0 6px 8px 2px rgba(0,0,0,.25)",n.border="1px solid #949494",n.borderColor="rgb(148,148,148)");var p=c("<div id='zoomWindow' />").css(n);k.fadeMagnifier&&p.fadeIn(200);k.useClickZoom&&(q?p.css("cursor",'url("'+k.zoomOutIcon+'"), auto'):(p.css("cursor","-webkit-zoom-out"),p.css("cursor","-moz-zoom-out"),p.css("cursor","zoom-out")));h.updateImage=function(a){a=
c("<img id='detailImg' src='"+a+"'/>").css("position","absolute");h.detailImage&&h.detailImage.remove();p.append(a);c(document).trigger("updated.magnifier");h.detailImage=a;e(h.detailImage)};h.refit=function(){b();e(h.detailImage);return h};k.fadeMagnifier?(h.show=function(){p.fadeIn(200);return h},h.hide=function(){p.fadeOut(200);return h}):(h.show=function(){p.show();return h},h.hide=function(){p.hide();return h});h.destroy=function(){p.remove();return h};h.getWindowSize=function(){return[h.rect.left,
h.rect.top,h.rect.width,h.rect.height]};h.updateImage(O);b();p.appendTo(document.body)},Y=!1,T;z.preload=function(a){a=c.makeArray(a);for(var b=a.length,d=0;d<b;d++)a[d]instanceof Array?z.preload(a[d]):"string"===typeof a[d]&&a[d]&&!I[a[d]]&&(I[a[d]]=new Image,I[a[d]].src=a[d])};z.changeImage=function(a,b){P&&p();O=b;d.attr("src",a);z.preload(a);J=[d.position().left,d.position().top,d.width(),d.height()];b&&("immediately"===k.preload?z.preload(b,!0):c(m).ready(function(){z.preload(b)}),D?D.updateImage(b):
d.attr("data-old-hires",b))};z.destroy=function(){d.unbind("touchstart touchstart.magnifier touchmove.magnifier mousemove.magnifier");c(document).unbind("mousemove.magnifier");F&&F.destroy();F=null;D&&D.destroy();D=null};z.detailImage=function(){return D.detailImage};z.suppressMagnifier=function(a){L=a};z.isEngaged=function(){return P};z.engageMagnifier=M;z.disengageMagnifier=p;d[0].complete?A():d.one("load",A);z.preload(d.attr("src"));if(k.preload){var U=k.detailImageUrl,E=function(){z.preload(U,
!0);k.useClickZoom||H.preload()},aa=k.preload;aa.constructor!==Array&&(aa=[aa]);for(var ja=0;ja<aa.length;ja++)if("immediately"===aa[ja])E();else if(c(m)[aa[ja]])c(m)[aa[ja]](E);else c(m).bind(aa[ja],E)}return z}function k(){if(h.useHoverZoom){var a={adjustment:[0,0,1,1],generalImageUrls:h.staticImages,location:"over",minHeightElement:"#imageBlock",preload:"ready",zIndex:190,useHoverZoomIpad:h.useHoverZoomIpad,useHoverZoom:h.useHoverZoom,useClickZoom:h.useClickZoom,zoomOutIcon:h.staticImages.zoomOutCur,
enhancedHoverOverlay:h.enhancedHoverOverlay};p&&(p.destroy(),p=D);var b=z.find(".image.item.selected img[data-old-hires]").not("[data-old-hires='']");g.isjQueryObjDefined(b)&&(h.useClickZoom?(b.one("click.loadmagnifier touchstart.loadmagnifier",function(c){p=new d(b,a);p.engageMagnifier(c,!0)}),q?b.css("cursor",'url("'+h.staticImages.zoomInCur+'"), auto'):(b.css("cursor","-webkit-zoom-in"),b.css("cursor","-moz-zoom-in"),b.css("cursor","zoom-in"))):p=new d(b,a))}}var l,h,n,p,z,q=c.browser.msie||navigator.userAgent.match(/msie|trident/i);
return function(a,b,d,c){l=this;h=a;n=c;l.render=function(a,b,d,c,e,g){z=d;p&&(p.destroy(),p=D)};l.update=function(a){};n.register("loadMagnifier",k);n.register("resize",k)}});f.when("A","jQuery","imageBlockUtils").register("ImageBlockTwisterView",function(f,c,g){function e(a,b,c){a=(a=c?c:g.getColorFromState(b.getState().hovered_variations,d))&&""!==a?a:d.defaultColor;l.dispatch("updateView",{type:"swatchHover",data:{color:a}})}function b(a,b,c,e){a=(a=e?e:g.getColorFromState(b.getState().selected_variations,
d))&&""!==a?a:d.defaultColor;a===k.getCurrentItem().color?"function"===typeof c&&c():l.dispatch("updateSelection",{type:"swatchClick",data:{color:a},onload:c})}var a,d,k,l;return function(c,g,m,z){a=this;d=c;k=g;l=z;f.on("image-block-twister-swatch-hover",e);f.on("image-block-twister-swatch-click",b);a.render=function(a,b,d,c,e){};a.update=function(a){}}});f.when("A","jQuery","Airy","imageBlockUtils","ImageBlockLoader","postMetric").register("ImageBlockVideoView",function(f,c,g,e,b,a){function d(a,
b,d,g){!e.isjQueryObjDefined(a.find(".a-button-selected"))&&(d=r.getCurrentItem(),!g||q.prioritizeVideos||"chromeless-video"===d.type&&q.autoplayVideo)&&(g=h(d.color,0),-1!==g&&(b+=0,t.dispatch("updateModel",{data:{index:0,thumbnailIndex:b,variant:g.variant,type:q.useChromelessVideoPlayer?"chromeless-video":"chromeful-video"}}),b=a.find(".item").get(b),e.selectGivenThumbnail(c(b),a)))}function k(a){if(!q.useChildVideos)return q.videos;if(q.colorToVideo[a])return q.colorToVideo[a];var d=q.colorToAsin[a];
if(d&&d.asin){var c={};c.params={asin:d.asin,productGroupID:q.productGroupID,useAiryVideoPlayer:!0,useChromelessVideoPlayer:q.useChromelessVideoPlayer,isUDP:q.isUDP};c.success=function(b){b&&(q.colorToVideo[a]=b,b={type:"updatedData",data:r.getCurrentItem()},t.dispatch("updateView",b))};b.load("/gp/product/features/apparel-main-image/videos.html",c);return q.colorToVideo&&q.colorToVideo[a]}}function l(b,d,k,h){return g.embed({isShowFirstFrameWhenReadyEnabled:!0,parentElement:b[0],streamingUrls:d.url,
swfUrl:k.swfUrl,foresterMetadataParams:k.foresterMetadataParams,backgroundColor:"transparent",flashParams:{wmode:"transparent"},experiments:{supportChromelessPlayback:!0},bindings:{canplay:function(){var d=e.isjQueryObjDefined(b.find("video"))?"HTML5":"FLASH";a.postCountMetric("dppc_chromelessVideo:"+d)},playing:function(){b.parent().css("z-index",8)},videounsupported:function(){t.dispatch("selectThumbnail",0);a.postCountMetric("dppc_chromelessVideo:VIDEO_UNSUPPORTED")},error:function(){t.dispatch("selectThumbnail",
0);a.postCountMetric("dppc_chromelessVideo:ERROR")},ended:function(){C.seek(0)}},cuePoints:[{values:d.durationSeconds-1,type:"position",callback:function(a,d,e){a=e.durationSeconds-e.playheadTimeSeconds;b.parent().css("background-color","white").find(".airy-renderer-container").fadeTo(1E3*a,.1,function(){b.parent().css({"background-color":"transparent","z-index":-1});t.dispatch("selectThumbnail",0);c(this).show().css("opacity",1)})}}]})}function h(a,b){var d;if(q.useChildVideos){if(!e.isDefined(q.colorToVideo))return-1;
d=q.colorToVideo[a]}else d=q.videos;return e.isDefined(d)&&e.isDefined(d[b])&&e.isDefined(d[b].url)?d[b]:-1}function m(a){if("chromeful-video"===a.type||"chromeless-video"===a.type){var b=h(a.color,a.index);if(-1===b)return-1;if("chromeful-video"===a.type){a=q.holderRatio;var d=parseInt(b.videoWidth,10),c=parseInt(b.videoHeight,10);w.parent().css("z-index",2);0!==c&&0!==d&&(d/=c,a>d?w.css("width",d/a*100+"%"):w.css("height",a/d*100+"%"));C?(C.show(),e.loadMediaIntoAiry(C,b,v),y.show()):(C=e.createAiryInstanceForChromeful(w,
b,v),y.find("#videoCaption").text(q.staticStrings.playVideo))}else C?(C.show(),e.loadMediaIntoAiry(C,b,v),C.play()):(C=l(w,b,v))&&C.play()}}function p(b,g,h){g=k(g);var l=b;e.isDefined(g)&&0<g.length&&q.alwaysIncludeVideo&&b===q.maxAlts&&(B.find(".item:last").remove(),b--);e.isDefined(g)&&(c.each(g,function(d,c){if(b<q.maxAlts){var g=q.useChromelessVideoPlayer?"chromeless-video":"chromeful-video";e.createThumbnail({type:g,index:d,thumbnailIndex:b,variant:c.variant},c.thumb,B);A||(A=!0,a.postCountMetric("chromeless-video"===
g?"dppc_chromelessVideoAvailable":"dppc_chromefulVideoAvailable"));b++}}),d(B,l,b,h));return b}var z,q,r,t,B,w,y,C,v,A=!1;return function(a,b,d,c){z=this;q=a;r=b;t=c;v=q.airyConfig;q.colorToVideo={};q.colorToVideo[q.landingAsinColor]=q.colorToVideo[q.defaultColor]=q.videos;z.render=function(a,b,d,c,e,g){B=c;w=e.find("#main-video-container");y=w.parent().find("#video-canvas-caption");a=p(b,a,g);m(r.getCurrentItem());return a};z.update=function(a){C&&(C.hide(),w.parent().css("z-index",-1),y.hide());
var b=a.data;if("swatchHover"===a.type)b.color===r.getCurrentItem().color&&m(r.getCurrentItem());else if("chromeful-video"===b.type||"chromeless-video"===b.type)m(b),e.selectGivenThumbnail(a.$declarativeParent,B)}}});f.when("A","a-modal","a-tooltip","jQuery","imageBlockUtils","postMetric").register("ImageBlockImmersiveView",function(f,c,g,e,b,a){function d(a){return a.hiRes||a.large||a.main[a.main.length-1]}function k(a,d){var c=f.copy(a);if(b.isDefined(a)&&a.length>d){try{for(var e=
-1,g=0;g<a.length;g++){var k=a.charAt(g);if(" "===k||"."===k||"?"===k||";"===k||","===k||":"===k)e=g;if(g===d-4){c=a.substring(0,-1===e?g:e);break}}}catch(h){c=a.substring(0,d-3)}c+="..."}return c}function l(a){a=a.replace(/\._(AA|SS)\d+_/,"").replace(/\._SX\d+_SY\d+_CR,0,0,\d+,\d+_/,"");a=a.replace(/\._(US)\d+_/,"").replace(/\._SR\d+,\d+_/,"").replace(/\._SP[0-9,C]+_/,"");var b=a.lastIndexOf(".");return a=a.substring(0,b)+"._AA50_"+a.substring(b)}function h(){L.find("#ivTitle").click(function(){P.hide()})}
function n(a,b){var d=parseInt(a.css(b),10);return isNaN(d)?0:d}function p(){var a=L.find("#ivStage"),b=P.$container.find(".a-popover-wrapper"),d=b.find(".a-popover-inner"),b=b.height()-n(d,"padding-top")-n(d,"padding-bottom");L.css("height",b);var d=L.find("#ivTitle").outerHeight(!0),c=L.find("#ivVariationSelection").outerHeight(!0),e=L.find("#ivMediaSelection").outerHeight(!0),g=L.find("#ivThumbs"),k=n(g,"margin-top")+n(g,"margin-bottom");g.css("height",b-d-c-e-k);L.find("#ivLargeImage").css("height",
b);a.css("width",L.width()-n(L,"padding-left")-n(L,"padding-right")-L.find("#ivThumbColumn").width()-n(a,"margin-left")-n(a,"margin-right"))}function z(){L.find("#ivMediaSelect").change(function(){var a=e(this).val();"all"===a?(L.find("#ivVideoList").hide(),L.find("#ivThumbs").show(),L.find(".ivThumbVideo").show(),"chromeful-video"===H.type&&L.find("#ivVideo_"+H.index).click()):"images"===a?(L.find("#ivVideoList").hide(),L.find("#ivThumbs").show(),L.find(".ivThumbVideo").hide(),"chromeful-video"===
H.type&&L.find("#ivImage_0").click()):"videos"===a&&(L.find("#ivVideoList").show(),L.find("#ivThumbs").hide(),"image"===H.type?L.find("#ivVideoList_0").click():L.find("#ivVideoList_"+H.index).click())})}function q(){var a=L.find("#ivStage").find("#ivLargeImage"),b=a.width(),d=a.height(),c=a.find(".fullscreen");c.removeAttr("style");var e=c.width(),g=c.height();0<c.length&&(c[0].naturalWidth&&(e=c[0].naturalWidth),c[0].naturalHeight&&(g=c[0].naturalHeight));a.css("cursor","auto");var e=0===e?1:e,g=
0===g?1:g,k=Math.min(b/e,d/g),h=g*k,l=e*k;1>k?(T?a.css("cursor","url('"+J.staticImages.zoomIn+"'), auto"):(a.css("cursor","-webkit-zoom-in"),a.css("cursor","-moz-zoom-in"),a.css("cursor","zoom-in")),ja=!0):ja=!1;e=Math.min(l,e);g=Math.min(h-20,g);c.css({"margin-top":(d-g)/2,"margin-left":(b-e)/2,height:g,width:e});a.css("visibility","visible");aa=!1}function r(a){var b=L.find("#ivLargeImage");b.css("visibility","hidden");b.empty();b.animate({opacity:1},200);b.append(a);q()}function t(){S&&S.hide();
L.find("#ivLargeVideo").css("display","none");L.find("#ivLargeImage").css("display","block");var a;b.isDefined(O)&&(a=d(O[H.index]));if(b.isDefined(a)){L.find(".fullscreen").remove();var c=e("<img>").attr("src",a).addClass("fullscreen"),g=L.find("#ivLargeImage");g.animate({opacity:.4},200,function(){c.load(function(){r(c)});if(c[0].complete)r(c);else{g.empty();var a=(g.height()-104)/2,b=(g.width()-80)/2;e("<img>").attr("src",J.staticImages.spinner).css({position:"relative",top:a+"px",left:b+"px"}).appendTo(g)}})}}
function B(){var a=parseInt(H.index,10)+1;a>=K.length||L.find("#ivVideo_"+a).click()}function w(){var a;b.isDefined(K)&&(a=K[H.index]);if(b.isDefined(a)){L.find("#ivLargeImage").css("display","none").empty();var d=L.find("#ivLargeVideo").css("display","block");S?(S.isDetached()&&S.attach(d[0]),b.loadMediaIntoAiry(S,a,Y),S.show()):(S=b.createAiryInstanceForChromeful(d,a,Y,"ImmersiveView"),Y.enableContinuousPlay&&S.bind("ended",B));S.play({isAsync:!0})}}function y(){H=R.getCurrentItem();var a;if("image"===
H.type)a=L.find("#ivImage_"+H.index);else if("chromeful-video"===H.type||"chromeless-video"===H.type)a=L.find("#ivVideo_"+H.index);b.isjQueryObjDefined(a)||(a=L.find("#ivImage_0"));C(a)}function C(a){L.find(".ivThumb").removeClass("selected");a.addClass("selected");a.hasClass("ivThumbVideo")?(H.type="chromeful-video",H.index=a.attr("id").split("_")[1],w()):(H.type="image",H.index=a.attr("id").split("_")[1],t())}function v(){L.delegate(".ivThumb","click",function(){var a=e(this);C(a)});L.delegate(".ivThumbVideoListOuter",
"click",function(){L.find(".ivThumbVideoListOuter").removeClass("selected");var a=e(this);a.addClass("selected");H.type="chromeful-video";H.index=a.attr("id").split("_")[1];w()})}function A(){S&&!S.isDetached()&&(Y.volume=S.getVolume(),S.detach(),!document.all||m.atob||document.addEventListener||(S=null));L.find("#ivLargeImage").empty()}function D(a,b){return 0<b?b/2:Math.min(0,Math.max(b,a))}function E(a){var b=ga.top-(a.pageY-pa[1])*Z;a=D(ga.left-(a.pageX-pa[0])*Z,ma.left);b=D(b,ma.top);L.find(".fullscreen").css({left:a,
top:b})}function N(){L.delegate("#ivLargeImage","click",function(a){if(aa)q();else if(ja){L.find(".fullscreen").removeAttr("style");if(ja){var b=L.find("#ivLargeImage"),d=b.find(".fullscreen");T?b.css("cursor","url('"+J.staticImages.zoomOut+"'), auto"):(b.css("cursor","-webkit-zoom-out"),b.css("cursor","-moz-zoom-out"),b.css("cursor","zoom-out"));aa=!0;var c=L.find("#ivLargeImage");ma.left=c.width()-d.width();ma.top=c.height()-d.height();var c=b.height()/2,e=b.width()/2;pa=[b.offset().left+e,b.offset().top+
c];ga.top=c-d.height()/2;ga.left=e-d.width()/2;d.css({position:"relative",left:ga.left,top:ga.top});Z=Math.max(d.height()/b.height(),d.width()/b.width())}E(a)}});L.delegate("#ivLargeImage","mousemove",function(a){aa&&E(a)})}function F(){var d;(d=!J.useIV)||(d=R.getCurrentItem().color,d=J.colorImages&&J.colorImages[d]&&0<J.colorImages[d].length?!0:!1,d=!d);if(!d){a.postCountMetric("dppc_immersiveViewOpened");if(b.isDefined(P))P.show();else{d=e("#auiImmersiveViewDiv");var g=e(m).height()-150,h=e(m).width()-
75;P=c.create(d,{name:"immersiveView",activate:"onclick",width:h,height:g,popoverLabel:"ImmersiveView",hideHeader:!0});d.click()}if(U){L=e("#ivMain");d=R.getCurrentItem().color;O=J.colorImages[d];K=J.useChildVideos?J.colorToVideo[d]:J.videos;H=R.getCurrentItem();Q=ca=0;b.isDefined(O)&&(ca=O.length);b.isDefined(K)&&(Q=K.length);d=L.find("#ivTitle");d.attr("title",J.title);d.text(k(J.title,45));if(b.isDefined(m.DetailPage)&&b.isDefined(m.DetailPage.StateController)){d=L.find("#ivVariationSelection");
d.empty();var g=m.DetailPage.StateController.getState(),h=g.variation_label_order,n;for(n in h)if(h.hasOwnProperty(n)){var p=h[n],q=g.selected_variations[p],p=g.variation_display_labels[p];q&&e("<div/>").addClass("ivVariations").text(p+":"+q).appendTo(d)}}n=L.find("#ivMediaSelect");0===ca||0===Q?(n.parent().hide(),L.find("#ivThumbs").addClass("noMediaSelection")):(n.empty(),e("<option/>").attr("value","all").prop("selected",!0).text(J.staticStrings.allMedia+" ("+(ca+Q)+")").appendTo(n),e("<option/>").attr("value",
"images").text(J.staticStrings.images+" ("+ca+")").appendTo(n),e("<option/>").attr("value","videos").text(J.staticStrings.videos+" ("+Q+")").appendTo(n),n.parent().show(),n.val("all"));n=L.find("#ivThumbs");n.find(".ivRow").not(".placeholder").remove();d=ca+Q;for(h=g=0;g<d;)for(q=n.find(".ivRow.placeholder").clone().removeClass("placeholder").appendTo(n),p=0;3>p&&g<d;p++,g++,h++)if(h<ca){var r=O[g].thumb,v=n.find(".ivThumb.placeholder").clone().removeClass("placeholder").attr("id","ivImage_"+g).appendTo(q);
v.find(".ivThumbImage").css("background",'url("'+l(r)+'") center no-repeat')}else if(r=K[g-ca],v=n.find(".ivThumb.placeholder").clone().removeClass("placeholder").addClass("ivThumbVideo").attr("id","ivVideo_"+(g-ca)).appendTo(q),v.find(".ivThumbImage").css("background",'url("'+r.thumbUrl+'") center no-repeat'),b.isDefined(r)){var t={position:"triggerTop"},z=L.find("#ivThumbs").find(".ivThumbVideoPopover.placeholder").clone().removeClass("placeholder");z.find(".ivVideoPopoverTitle").text(r.title);
z.find(".ivVideoPopoverDuration").text(r.durationTimestamp);t.inlineContent=z[0];f.declarative.create(v,"a-tooltip",t)}n=L.find("#ivVideoList");n.find(".ivThumbVideoListOuter").not(".placeholder").remove();d=n.find(".placeholder");for(g=0;g<Q;g++)h=K[g],q=d.clone().removeClass("placeholder").appendTo(n),q.attr("id","ivVideoList_"+g),q.find(".ivThumbImage").css("background",'url("'+h.thumbUrl+'") center no-repeat'),q.find(".ivThumbTitle").text(h.title),q.find(".ivThumbDuration").text(h.durationTimestamp);
Y=J.airyConfig;U=!1;ia()}}}var W,J,R,I,P,L,O,K,ca,Q,H,S,Y,T=e.browser.msie||navigator.userAgent.match(/msie|trident/i),U=!0,aa=!1,ja=!1,ma={},ga={},Z,pa,ia=f.once(function(){z();v();N();f.on("a:popover:afterUpdatePosition:immersiveView",p);f.on("a:popover:afterShow:immersiveView",y);f.on("a:popover:afterHide:immersiveView",A);h()});return function(a,b,d,c){W=this;J=a;R=b;I=c;W.render=function(a,b,d,c,e,g){U=!0};W.update=function(a){};I.register("imageClick",F)}});f.when("A","jQuery",
"imageBlockUtils").register("ImageBlockLoader",function(f,c,g){return{load:function(c,b){b=b||{};b.timeout=b.timeout||4E3;f.ajax(c,b)}}});f.when("A","jQuery","Airy","postMetric","ImageBlockATF","ImageBlockBTF").register("imageBlockUtils",function(f,c,g,e,b,a){function d(a){return null!==a&&"undefined"!==typeof a}function k(a){var b=0;c.each(a,function(a,d){var c=parseInt(d[1],10);c>b&&(b=c)});return b}function l(a){var b=0;c.each(a,function(a,d){var c=parseInt(d[0],10);c>b&&(b=c)});return b}
var h,m,p=c.extend(!0,{},b,a);return{isDefined:d,isjQueryObjDefined:function(a){return 0!==a.length},getMaxHeightOfMainImage:function(a,b,d){b=b.height();if(d.naturalMainImageSize)return b;a=l(a);0<a&&(b=Math.min(b,a));return b},getMaxWidthOfMainImage:function(a,b,d){b=b.width();if(d.naturalMainImageSize)return b;a=k(a);0<a&&(b=Math.min(b,a));return b},getContainerHeight:function(a,b,c){a=a.get(0);var e=0;d(a)&&(e=a.offsetWidth/b,e=Math.min(e,c));return e},getColorFromState:function(a,b){if(a){b=
b||p;var d="";c.each(b.visualDimensions,function(b,c){a[c]&&(d+=" "+a[c])});return d&&d.substring(1)}},createThumbnail:function(a,b,d){var c=d.find(".template").clone().removeClass("template").addClass("item"),e=document.createElement("img");e.src=b;c.find(".placeHolder").replaceWith(e);f.declarative.create(c,"thumb-action",a);d.append(c)},selectGivenThumbnail:function(a,b){var d=a.find(".a-button");b.find(".a-button").removeClass("a-button-selected").removeClass("a-button-focus");d.addClass("a-button-selected").addClass("a-button-focus")},
createAiryInstanceForChromeful:function(a,b,d,k){var l=c.extend({},d.foresterMetadataParams);null!==k&&(l.method+="."+k);var f=[];b.disabledViewIds&&(f=b.disabledViewIds);return g.embed({parentElement:a[0],streamingUrls:b.url,contentId:b.mediaObjectId,contentMinAge:Number(b.minimumAge||"")||0,contentTitle:b.title,swfUrl:d.swfUrl,foresterMetadataParams:l,backgroundColor:"transparent",flashParams:{wmode:"transparent"},slateImages:{preloadSlate:b.slateUrl,postMediaSlate:b.slateUrl},videoAds:d.videoAds,
bindings:{play:function(){"ImmersiveView"===k?h||(h=!0,e.postCountMetric("dppc_chromefulVideoPlayedIV")):m||(m=!0,e.postCountMetric("dppc_chromefulVideoPlayedPV"))}},disabledViewIds:f})},loadMediaIntoAiry:function(a,b,d){a&&a.getMediaSourceInfo()!==b.url&&a.loadMedia({mediaSourceInfo:b.url,contentId:b.mediaObjectId,contentMinAge:Number(b.minimumAge||"")||0,contentTitle:b.title,slateImages:{preloadSlate:b.slateUrl,postMediaSlate:b.slateUrl}})},showUnavailable:function(a){a&&(c("#imageBlock .unvailableVariation").html(a),
c("#imageBlock .variationUnavailable").show())},hideUnavailable:function(){c("#imageBlock .variationUnavailable").hide()}}})})})(function(){var f=window.AmazonUIPageJS||window.P,m=f._namespace||f.attributeErrors;return m?m("DetailPageImageBlockAssets"):f}(),window);